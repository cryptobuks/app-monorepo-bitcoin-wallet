(this.webpackJsonp=this.webpackJsonp||[]).push([[71,9,83,84],{3029:function(e,t,n){"use strict";n.r(t),n.d(t,"stackScreenList",(function(){return ge})),n.d(t,"StackNavigator",(function(){return Oe}));var r=n(32),a=n(260),o=n(2),i=n.n(o),c=n(15),s=n.n(c),u=n(124),l=n(10),d=n.n(l),f=n(100),p=n(1),b=n(3570),v=n(292),h=n(3164),m=n(2076),y=n(43),j=n(343),g=n(466),O=n(14),w=n(3),x=n.n(w),S=n(202),P=n(20),A=n(3184),C=n(394),E=n(3223),k=C.b.actions,M=k.updateIsLoading,D=k.updatePreloadingCreateAccount,_=k.updateSelectedWalletId,T=k.updateSelectedNetworkId;function R(){return function(){var e=Object(E.a)(),t=e.isOpenDelay,n=(e.isCloseFromOpen,e.preloadingCreateAccount),r=e.activeWallet,a=(e.activeNetwork,e.activeAccount,e.activeWalletRef),o=e.activeNetworkRef,i=e.isOpen,c=y.a.serviceAccountSelector,s=y.a.dispatch;Object(p.useRef)().current=t&&i,Object(p.useRef)(n).current=n;var u=Object(p.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.runAfterInteractions;return t?S.a.runAfterInteractions((function(){return c.setSelectedWalletToActive()})):c.setSelectedWalletToActive()}),[c]);Object(p.useEffect)((function(){return P.a.accountSelector.info("useAccountSelectorEffects mount"),function(){P.a.accountSelector.info("useAccountSelectorEffects unmounted")}}),[]),Object(p.useEffect)((function(){r&&u({runAfterInteractions:!0})}),[r,u]),Object(A.a)((function(){(function(){var e=x()((function*(){if(!t){var e,n,r=null==(e=a.current)?void 0:e.id,i=null==(n=o.current)?void 0:n.id;s(M(!1),D(void 0),_(r),T(i)),P.a.accountSelector.info("Reset selected walletId & networkId after close",{networkId:i,walletId:r})}}));return function(){return e.apply(this,arguments)}})()()}),[t])}(),null}var B=n(125),N=n(3185);function I(){return function(){var e=Object(N.a)(),t=e.visible,n=e.existsHardwareWallet;Object(p.useEffect)((function(){return P.a.accountSelector.info("WalletSelectorTrigger mount"),function(){P.a.accountSelector.info("WalletSelectorTrigger unmounted")}}),[]),Object(p.useEffect)((function(){P.a.accountSelector.info("WalletSelector visible="+t.toString()),t&&n&&B.a.syncDeviceConnectStatus()}),[n,t])}(),null}var F=n(463),L=n(145),W=n(0),U=["name","component"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=Object(F.a)((function(){return n.e(87).then(n.bind(null,3551))})),G=Object(F.a)((function(){return n.e(56).then(n.bind(null,3437))})),V=Object(F.a)((function(){return n.e(91).then(n.bind(null,3562))})),Q=Object(F.a)((function(){return Promise.all([n.e(3),n.e(46)]).then(n.bind(null,4064))})),J=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(109)]).then(n.bind(null,4065))})),K=Object(F.a)((function(){return Promise.all([n.e(13),n.e(38)]).then(n.bind(null,4100))})),Y=Object(F.a)((function(){return n.e(847).then(n.bind(null,4066))})),X=Object(F.a)((function(){return n.e(79).then(n.bind(null,4067))})),Z=Object(F.a)((function(){return Promise.all([n.e(1),n.e(49)]).then(n.bind(null,3428))})),$=Object(F.a)((function(){return n.e(80).then(n.bind(null,3549))})),ee=Object(F.a)((function(){return n.e(97).then(n.bind(null,4068))})),te=Object(F.a)((function(){return n.e(112).then(n.bind(null,4069))})),ne=Object(F.a)((function(){return n.e(85).then(n.bind(null,4070))})),re=Object(F.a)((function(){return n.e(89).then(n.bind(null,4071))})),ae=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(106)]).then(n.bind(null,4097))})),oe=Object(F.a)((function(){return n.e(849).then(n.bind(null,4072))})),ie=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(13),n.e(3),n.e(6),n.e(4),n.e(7),n.e(69)]).then(n.bind(null,4101))})),ce=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(110)]).then(n.bind(null,5686))})),se=Object(F.a)((function(){return n.e(850).then(n.bind(null,5667))})),ue=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(95)]).then(n.bind(null,4102))})),le=Object(F.a)((function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,4073))})),de=Object(F.a)((function(){return Promise.all([n.e(0),n.e(59)]).then(n.bind(null,4074))})),fe=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(14)]).then(n.bind(null,3038))})),pe=Object(F.a)((function(){return n.e(68).then(n.bind(null,4110))})),be=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(13),n.e(17),n.e(44),n.e(3),n.e(6),n.e(4),n.e(7),n.e(15),n.e(31)]).then(n.bind(null,5670))})),ve=Object(F.a)((function(){return n.e(111).then(n.bind(null,4117))})),he=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(90)]).then(n.bind(null,4108))})),me=Object(F.a)((function(){return Promise.all([n.e(0),n.e(58)]).then(n.bind(null,4087))})),ye=Object(F.a)((function(){return n.e(70).then(n.bind(null,4106))})),je=Object(F.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(17),n.e(3),n.e(6),n.e(4),n.e(7),n.e(108)]).then(n.bind(null,4098))})),ge=[{name:L.a.FullTokenListScreen,component:Q,i18nTitle:"asset__tokens"},{name:L.a.ScreenTokenDetail,component:ie,alwaysShowBackButton:!0},{name:L.a.ScreenOnekeyLiteDetail,component:J},{name:L.a.ExploreScreen,component:G},{name:L.a.DAppListScreen,component:H},{name:L.a.MyDAppListScreen,component:V},{name:L.a.TransactionHistoryScreen,component:ce},{name:L.a.Protected,component:ee},{name:L.a.AddressBook,component:ve,i18nTitle:"title__address_book"},{name:L.a.SwapHistory,component:pe},{name:L.a.VolumeHaptic,component:Y},{name:L.a.CloudBackup,component:X},{name:L.a.CloudBackupPreviousBackups,component:$},{name:L.a.CloudBackupDetails,component:Z},{name:L.a.PushNotification,component:te},{name:L.a.PushNotificationManagePriceAlert,component:re},{name:L.a.PushNotificationManageAccountDynamic,component:ne},{name:L.a.MarketDetail,component:K,alwaysShowBackButton:!0},{name:L.a.Revoke,component:ae,alwaysShowBackButton:!0},{name:L.a.NFTMarketStatsList,component:de},{name:L.a.NFTMarketLiveMintingList,component:le},{name:L.a.NFTMarketCollectionScreen,component:ue},{name:L.a.RevokeRedirect,component:oe},{name:L.a.NFTPNLScreen,component:he},{name:L.a.OverviewDefiListScreen,component:me},{name:L.a.WalletSwitch,component:ye},{name:L.a.BulkSender,component:je,alwaysShowBackButton:!0}],Oe=Object(b.a)(),we=Object(p.memo)((function(){var e=Object(f.a)(),t=Object(u.a)(["background-default","border-subdued"]),n=d()(t,2),r=n[0],a=n[1],o=Object(p.useMemo)((function(){return e?ge.map((function(e){var t=e.name,n=e.component,o=s()(e,U);return Object(W.jsx)(Oe.Screen,{name:t,component:n,options:{animation:O.a.isNativeAndroid?"none":"default",header:function(e){return Object(W.jsx)(h.a,q(q({style:{backgroundColor:r,borderBottomWidth:0,shadowColor:a}},e),o))}}},t)})):null}),[r,a,e]);return Object(W.jsxs)(Oe.Navigator,{children:[Object(W.jsxs)(Oe.Group,{screenOptions:{headerShown:!1},children:[Object(W.jsx)(Oe.Screen,{name:L.a.InitialTab,component:be}),!1,Object(W.jsx)(Oe.Screen,{name:L.a.HomeOnboarding,component:fe})]}),Object(W.jsx)(Oe.Group,{children:o})]})}));we.displayName="Dashboard";t.default=function(){var e=y.a.dispatch,t=Object(a.b)().reduxReady;return Object(p.useEffect)((function(){var n;t&&(g.a.addUpdaterListener(),null==(n=g.a.checkUpdate())||n.then((function(t){t&&e(Object(j.f)(),Object(j.a)(t))})).catch())}),[e,t]),Object(W.jsx)(v.a,{children:Object(W.jsxs)(r.a,{ref:m.setMainScreenDom,w:"full",h:"full",children:[Object(W.jsx)(we,{}),Object(W.jsx)(R,{}),Object(W.jsx)(I,{}),Object(W.jsx)(se,{})]})})}},3148:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),a=n.n(r),o=n(10),i=n.n(o),c=n(1),s=n(47),u=n(765);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.loadingDelay,o=void 0===r?0:r,l=n.checkIsMounted,d=Object(c.useState)(),f=i()(d,2),p=f[0],b=f[1],v=Object(c.useState)(!1),h=i()(v,2),m=h[0],y=h[1],j=Object(c.useRef)(),g=Object(u.a)();return j.current=e,Object(c.useEffect)((function(){a()((function*(){var e=function(){return l&&g.current||!l};try{if(e()){y(!0);var t=yield null==j||null==j.current?void 0:j.current();e()&&b(t)}}finally{yield Object(s.g)(o),e()&&y(!1)}}))()}),t),{result:p,isLoading:m}}},3164:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(124),i=n(100),c=n(15),s=n.n(c),u=n(1),l=n(24),d=n(27),f=n(1138),p=n(32),b=n(199),v=n(172),h=n(0),m=function(e){var t=e.navigation,n=void 0===t?Object(v.b)():t,r=Object(i.a)();return Object(h.jsx)(b.a,{type:"plain",size:"lg",name:r?"ArrowLeftOutline":"ArrowSmallLeftOutline",onPress:function(){return null==n?void 0:n.goBack()},circle:!0})},y=n(10),j=n.n(y),g=n(429),O=n(72),w=function(e){var t=e.title,n=e.subtitle,r=e.i18nTitle,a=e.i18nSubtitle,o=e.inCenter,c=void 0===o||o,s=e.children,d=Object(i.a)(),f=Object(g.a)(),b=Object(u.useMemo)((function(){return[r?f.formatMessage({id:r}):t,a?f.formatMessage({id:a}):n]}),[r,f,t,a,n]),v=j()(b,2),m=v[0],y=v[1],w=Object(u.useMemo)((function(){return Object(h.jsxs)(p.a,{flex:1,justifyContent:"center",alignItems:c?"center":"flex-start",style:l.a.absoluteFill,zIndex:-1,children:[s,!!m&&Object(h.jsx)(O.a,{typography:c?"Heading":"PageHeading",children:m}),!!y&&Object(h.jsx)(O.a,{typography:"Caption",color:"text-subdued",children:y})]})}),[s,c,y,m]),x=Object(u.useMemo)((function(){return Object(h.jsxs)(p.a,{flex:1,flexDirection:"row",alignItems:"baseline",children:[s,!!m&&Object(h.jsx)(O.a,{typography:"Heading",children:m}),!!y&&Object(h.jsx)(O.a,{typography:"Body2",ml:"12px",color:"text-subdued",children:y})]})}),[s,y,m]);return d?w:x},x=["headerLeft","headerRight","headerTitle","safeTop","alwaysShowBackButton","style","navigation","options","route","back"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=l.a.create({content:{flex:1,flexDirection:"row",alignItems:"center"},left:{justifyContent:"center",alignItems:"flex-start"},right:{justifyContent:"center",alignItems:"flex-end"},expand:{flexGrow:1,flexBasis:0}});t.a=function(e){var t=e.headerLeft,n=e.headerRight,r=e.headerTitle,a=e.safeTop,c=e.alwaysShowBackButton,b=e.style,v=e.navigation,y=e.options,j=void 0===y?{}:y,g=(e.route,e.back),O=s()(e,x),S=Object(f.d)(),C=Object(i.a)(),E=Object(o.a)("background-default"),k=C?56:64,M=Boolean(g||c||t),D=Object(u.useMemo)((function(){if(r)return Object(h.jsx)(w,{inCenter:M,children:r()});if("function"===typeof j.headerTitle)return Object(h.jsx)(w,{inCenter:M,children:j.headerTitle()});var e=j,t=P({title:e.title,i18nTitle:e.i18nTitle,subtitle:e.subtitle,i18nSubtitle:e.i18nSubtitle},O);return Object(h.jsx)(w,P({inCenter:M},t))}),[M,r,O,j]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.a,{pointerEvents:"box-none",style:[l.a.absoluteFill,{zIndex:0,backgroundColor:E}]}),Object(h.jsx)(d.a,{pointerEvents:"box-none",style:[{height:k,marginTop:null!=a?a:S.top,backgroundColor:E},b],children:Object(h.jsxs)(d.a,{pointerEvents:"box-none",style:[A.content,{marginHorizontal:C?16:32}],children:[Object(h.jsxs)(d.a,{pointerEvents:"box-none",style:[A.left,{marginStart:S.left}],children:[(!!g||c)&&Object(h.jsx)(p.a,{ml:"-6px",mr:"8px",children:Object(h.jsx)(m,{navigation:v})}),t?t():null==j.headerLeft?void 0:j.headerLeft()]}),D,Object(h.jsx)(d.a,{pointerEvents:"box-none",style:[A.right,A.expand,{marginEnd:S.right}],children:n?n():null==j.headerRight?void 0:j.headerRight()})]})})]})}},3184:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e,t){var n=Object(r.useRef)(!0);return Object(r.useEffect)((function(){n.current?n.current=!1:e()}),t)}},3185:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(100),a=n(1),o=n(73),i=n(178),c=n(39);function s(){var e=Object(r.a)(),t=Object(i.h)((function(e){return e.accountSelector})),n=t.isDesktopWalletSelectorVisible,s=t.isMobileWalletSelectorDrawerOpen,u=Object(c.l)().wallets,l=Object(a.useMemo)((function(){return u.some((function(e){return e.type===o.c}))}),[u]),d=e?s:n;return{visible:d,isOpenFromClose:!Object(i.t)(d)&&d,existsHardwareWallet:l}}},3207:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n.n(r),o=n(10),i=n.n(o),c=n(1),s=n(20),u=n(43),l=n(39);function d(){var e=Object(l.l)().hardwareWallets,t=Object(l.m)().deviceUpdates,n=Object(l.e)((function(e){return e.hardware.connected})),r=Object(c.useState)(),o=i()(r,2),d=o[0],f=o[1],p=Object(c.useCallback)((function(e){var r,a;if(e)return{isConnected:n.includes(e),hasUpgrade:!(null==t||null==(r=t[e])||!r.ble)||!(null==t||null==(a=t[e])||!a.firmware)}}),[n,t]);return Object(c.useEffect)((function(){s.a.accountSelector.info("useEffect hardwareWallets changed >>> useDeviceStatusOfHardwareWallet"),a()((function*(){var t=(yield u.a.engine.getHWDevices()).reduce((function(e,t){return e[t.id]=t,e}),{});f(e.reduce((function(e,n){if(!n.associatedDevice)return e;var r=t[n.associatedDevice];return r&&(e[n.associatedDevice]=p(r.mac)),e}),{}))}))()}),[p,e]),{devicesStatus:d}}},3223:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(100),a=n(1),o=n(43),i=n(178),c=n(39),s=n(3148),u=n(1157),l=n(3207);function d(){var e=o.a.engine,t=Object(r.a)(),n=Object(i.h)((function(e){return e.accountSelector})),d=n.networkId,f=n.walletId,p=n.accountsGroup,b=n.isLoading,v=n.preloadingCreateAccount,h=n.isOpenDelay,m=n.isOpen,y=n.accountSelectorMode,j=Object(i.i)(m,t?u.g:u.e+100),g=Object(i.t)(m),O=!g&&m,w=g&&!m,x=Object(c.l)().wallets,S=Object(i.m)().enabledNetworks,P=Object(l.a)().devicesStatus,A=Object(i.f)(),C=A.account,E=A.wallet,k=A.network,M=Object(a.useRef)(C);M.current=C;var D=Object(a.useRef)(E);D.current=E;var _=Object(a.useRef)(k);_.current=k;var T=Object(i.h)((function(e){return e.refresher.refreshAccountSelectorTs})),R=d,B=f,N=Object(a.useCallback)((function(){}),[]),I=Object(s.a)((function(){return f?e.getWalletSafe(f):Promise.resolve(null)}),[f,x]).result,F=Object(s.a)((function(){return d?e.getNetworkSafe(d):Promise.resolve(null)}),[d,S]).result,L=Object(a.useMemo)((function(){if(null==p||!p.length)return!0;var e=0;return p.forEach((function(t){var n;return e+=(null==t||null==(n=t.data)?void 0:n.length)||0})),e<=0}),[p]);return Object(a.useMemo)((function(){return{wallets:x,refreshAccountSelectorTs:T,devicesStatus:P,isOpenFromClose:O,isCloseFromOpen:w,isOpenDelay:h,isOpenDelayForShow:j,isOpen:m,selectedNetwork:F,selectedNetworkId:R,selectedWallet:I,selectedWalletId:B,accountsGroup:p,isLoading:b,isAccountsGroupEmpty:L,preloadingCreateAccount:v,refreshAccounts:N,activeAccount:C,activeWallet:E,activeNetwork:k,activeAccountRef:M,activeNetworkRef:_,activeWalletRef:D,accountSelectorMode:y}}),[x,T,P,O,w,h,j,m,F,R,I,B,p,b,L,v,N,C,E,k,y])}},3238:function(e,t,n){"use strict";n.r(t),n.d(t,"ScanQrcodeRoutes",(function(){return Kt.a}));var r=n(100),a=n(252),o=n(162),i=n(240),c=n(3419),s=n(32),u=n(41),l=n(3),d=n.n(l),f=n(652),p=n(458),b=n(57),v=n(429),h=n(43),m=n(39),y=n(125),j=n(3416),g=n(3091),O=n(145),w=n(461),x=n(0),S=function(){var e,t=Object(v.a)(),n=Object(b.u)(),r=Object(b.x)().params,l=r.address,S=r.possibleNetworks,P=void 0===S?[]:S,A=Object(p.a)().bottom,C=Object(f.a)({defaultValues:{network:P[0]}}),E=C.control,k=C.getValues,M=Object(m.d)(),D=M.account,_=M.wallet;return Object(x.jsx)(a.b,{onPrimaryActionPress:d()((function*(){var e=h.a.serviceNetwork;yield e.changeActiveNetwork(k("network"));var t=Object(m.a)(),r=t.accountId,a=t.networkId;n.navigate(O.c.Modal,{screen:O.b.Send,params:{screen:w.a.PreSendToken,params:{accountId:r,networkId:a,from:"",to:l,amount:""}}})})),primaryActionTranslationId:"action__next",hideSecondaryAction:!0,header:t.formatMessage({id:"modal__preview"}),scrollViewProps:{pb:A+"px",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(s.a,{borderColor:"border-subdued",borderWidth:"1px",borderRadius:"12px",borderStyle:"dashed",alignItems:"center",justifyContent:"center",p:"20px",mb:"32px",children:Object(x.jsx)(u.h.Body2,{textAlign:"center",wordBreak:"break-all",children:l})}),Object(x.jsxs)(o.a,{children:[Object(x.jsx)(j.a,{hideHelpText:!0,selectableNetworks:P,control:E,name:"network"}),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.h.Body2Strong,{mb:1,children:t.formatMessage({id:"form__account"})}),Object(x.jsxs)(i.a,{p:"15px",borderWidth:1,borderColor:"border-disabled",borderRadius:"12px",alignItems:"center",bg:"surface-disabled",children:[Object(x.jsx)(g.b,{walletImage:null==_?void 0:_.type,hwWalletType:(null==_?void 0:_.deviceType)||Object(y.b)(null==_?void 0:_.associatedDevice),avatar:null==_?void 0:_.avatar,size:"sm",mr:"12px"}),Object(x.jsx)(c.a,{color:"text-disabled",hiddenAvatar:!0,address:null!=(e=null==D?void 0:D.address)?e:"",name:null==D?void 0:D.name})]})]})]})]})}})};S.displayName="PreviewSend";var P,A,C,E,k,M,D,_,T=S,R=n(115),B=n(103),N=n(10),I=n.n(N),F=n(1),L=n.n(F),W=n(2),U=n.n(W),z=n(6),q=n.n(z),H=n(9),G=n.n(H),V=n(12),Q=n.n(V),J=n(5),K=n.n(J),Y=n(34),X=n(93),Z=n(15),$=n.n(Z),ee=n(24),te=n(27),ne=n(142);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.front="front",e.back="back"}(P||(P={})),function(e){e.on="on",e.off="off",e.auto="auto",e.torch="torch"}(A||(A={})),function(e){e.on="on",e.off="off",e.auto="auto",e.singleShot="singleShot"}(C||(C={})),function(e){e.auto="auto",e.sunny="sunny",e.cloudy="cloudy",e.shadow="shadow",e.incandescent="incandescent",e.fluorescent="fluorescent",e.continuous="continuous",e.manual="manual"}(E||(E={})),function(e){e.png="png",e.jpg="jpg"}(k||(k={})),function(e){e.H264="avc1",e.HEVC="hvc1",e.JPEG="jpeg",e.AppleProRes422="apcn",e.AppleProRes4444="ap4h"}(M||(M={})),function(e){e.off="off",e.standard="standard",e.cinematic="cinematic",e.auto="auto"}(D||(D={})),function(e){e["2160p"]="2160p",e["1080p"]="1080p",e["720p"]="720p",e["480p"]="480p",e["4:3"]="4:3"}(_||(_={}));function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=d()((function*(e){var t=function(e){return{optional:[{sourceId:e}]}},n=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null},r=yield new Promise((function(e){return MediaStreamTrack.getSources((function(t){return e(t)}))})),a=null,o=null;r.forEach((function(e){"audio"===e.kind?a=e.id:"video"===e.kind&&(o=e.id)}));var i=n(e.audioConstraints);i&&(a=i);var c=n(e.videoConstraints);return c&&(o=c),[t(a),t(o)]}))).apply(this,arguments)}function ce(e,t,n){return se.apply(this,arguments)}function se(){return(se=d()((function*(e,t,n){var r={video:"undefined"===typeof n||n};return e||(r.audio="undefined"===typeof t||t),yield de(r)}))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=d()((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(ve())return yield ce(t,e.audio,e.video);var n=yield oe(e),r=I()(n,2),a=r[0],o=r[1];return yield ce(t,a,o)}))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return(fe=d()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return yield pe(ae(ae({},e),{},{video:t||e.video}))}catch(n){if(!t&&"ConstraintNotSatisfiedError"===n.name)return yield de(e,!0);throw n}}))).apply(this,arguments)}function pe(e){return be.apply(this,arguments)}function be(){return(be=d()((function*(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;return new Promise((function(n,r){return t.call(navigator,e,n,r)}))}))).apply(this,arguments)}function ve(){return Y.e.isDOMAvailable&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)}function he(e){return me.apply(this,arguments)}function me(){return(me=d()((function*(e){return yield ge(["front","user","facetime"],"user",e)}))).apply(this,arguments)}function ye(e){return je.apply(this,arguments)}function je(){return(je=d()((function*(e){return yield ge(["back","rear"],"environment",e)}))).apply(this,arguments)}function ge(e,t,n){return Oe.apply(this,arguments)}function Oe(){return(Oe=d()((function*(e,t,n){if(!n){if(!navigator.mediaDevices.enumerateDevices)return null;n=yield navigator.mediaDevices.enumerateDevices()}var r=n.filter((function(e){return"videoinput"===e.kind})),a=r.filter((function(t){return e.some((function(e){return t.label.toLowerCase().includes(e)}))})),o=I()(a,1)[0],i=r.filter((function(e){if(!("getCapabilities"in e))return null;var n=e.getCapabilities();return n.facingMode?n.facingMode.find((function(e){return t})):null})),c=I()(i,1)[0];return(null==c?void 0:c.deviceId)||(null==o?void 0:o.deviceId)||null}))).apply(this,arguments)}function we(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}function xe(e){return"Permission dismissed"===e.message?{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function Se(){return Pe.apply(this,arguments)}function Pe(){return(Pe=d()((function*(){try{return yield we({video:!0}),{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return xe({message:e.message})}}))).apply(this,arguments)}function Ae(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=d()((function*(e){var t,n;if(null==(t=navigator)||null==(n=t.permissions)||!n.query)throw new Y.g("expo-camera","navigator.permissions API is not available");switch((yield navigator.permissions.query({name:e})).state){case"prompt":return{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}var Ee,ke,Me={get name(){return"ExponentCameraManager"},get Type(){return{back:"back",front:"front"}},get FlashMode(){return{on:"on",off:"off",auto:"auto",torch:"torch"}},get AutoFocus(){return{on:"on",off:"off",auto:"auto",singleShot:"singleShot"}},get WhiteBalance(){return{auto:"auto",continuous:"continuous",manual:"manual"}},get VideoQuality(){return{}},get VideoStabilization(){return{}},isAvailableAsync:function(){var e=d()((function*(){return ve()}));return function(){return e.apply(this,arguments)}}(),takePicture:function(){var e=d()((function*(e,t){return yield t.takePicture(e)}));return function(t,n){return e.apply(this,arguments)}}(),pausePreview:function(){var e=d()((function*(e){yield e.pausePreview()}));return function(t){return e.apply(this,arguments)}}(),resumePreview:function(){var e=d()((function*(e){return yield e.resumePreview()}));return function(t){return e.apply(this,arguments)}}(),getAvailableCameraTypesAsync:function(){var e=d()((function*(){if(!ve()||!navigator.mediaDevices.enumerateDevices)return[];var e=yield navigator.mediaDevices.enumerateDevices();return(yield Promise.all([(yield he(e))&&P.front,(yield ye())&&P.back])).filter(Boolean)}));return function(){return e.apply(this,arguments)}}(),getAvailablePictureSizes:function(){var e=d()((function*(e,t){return yield t.getAvailablePictureSizes(e)}));return function(t,n){return e.apply(this,arguments)}}(),getPermissionsAsync:function(){var e=d()((function*(){return Ae("camera")}));return function(){return e.apply(this,arguments)}}(),requestPermissionsAsync:function(){var e=d()((function*(){return Se()}));return function(){return e.apply(this,arguments)}}(),getCameraPermissionsAsync:function(){var e=d()((function*(){return Ae("camera")}));return function(){return e.apply(this,arguments)}}(),requestCameraPermissionsAsync:function(){var e=d()((function*(){return Se()}));return function(){return e.apply(this,arguments)}}(),getMicrophonePermissionsAsync:function(){var e=d()((function*(){return Ae("microphone")}));return function(){return e.apply(this,arguments)}}(),requestMicrophonePermissionsAsync:function(){var e=d()((function*(){try{return yield we({audio:!0}),{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return xe({message:e.message})}}));return function(){return e.apply(this,arguments)}}()},De=n(60),_e=n.n(De);function Te(e){switch(e){case"torch":return!0;case"on":case"off":case"auto":default:return!1}}function Re(e){switch(e){case"on":case"auto":return"continuous";case"off":return"none";case"singleShot":return"single-shot";default:return}}function Be(e){switch(e){case"on":case"auto":return"continuous";case"off":return"manual";case"singleShot":return"single-shot";default:return}}var Ne=Object.keys({"3840x2160":3840/2160,"1920x1080":1920/1080,"1280x720":1280/720,"640x480":640/480,"352x288":352/288}),Ie=((Ee={})[k.jpg]="image/jpeg",Ee[k.png]="image/png",Ee),Fe={audio:!1,video:!0},Le=((ke={})[P.front]="user",ke[P.back]="environment",ke),We={user:P.front,environment:P.back};function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e.readyState!==e.HAVE_ENOUGH_DATA)return null;var n=ze(e,t),r=n.getContext("2d",{alpha:!1});if(!r||!n.width||!n.height)return null;var a=r.getImageData(0,0,n.width,n.height);return a}function ze(e,t){var n=t.scale,r=void 0===n?1:n,a=t.isImageMirror,o=void 0!==a&&a,i=function(e,t,n){var r=e*n;return{width:r,height:t/(e/r)}}(e.videoWidth,e.videoHeight,r),c=i.width,s=i.height,u=document.createElement("canvas");u.width=c,u.height=s;var l=u.getContext("2d",{alpha:!1});if(!l)throw new Error("Context is not defined");return o&&l.setTransform(-1,0,0,1,u.width,0),l.drawImage(e,0,0,c,s),u}function qe(e,t){var n=function(e){var t={scale:1,imageType:k.png,isImageMirror:!1};for(var n in e)n in e&&void 0!==e[n]&&n in t&&(t[n]=e[n]);return t}(t),r=ze(e,n),a=n.imageType,o=n.quality;return function(e,t,n){_e()(Object.values(k).includes(t),"expo-camera: "+t+" is not a valid ImageType. Expected a string from: "+Object.values(k).join(", "));var r=Ie[t];return t===k.jpg?(_e()(n<=1&&n>=0,"expo-camera: "+n+" is not a valid image quality. Expected a number from 0...1"),e.toDataURL(r,n)):e.toDataURL(r)}(r,a,void 0===o?.92:o)}function He(e,t,n){var r={audio:!1,video:{}};if(function(e,t,n){return void 0!==e&&void 0!==t&&void 0!==n}(e,t,n))return Fe;var a,o=navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():null;if(!o||!o.facingMode||!o.width||!o.height)return Fe;if(e&&Object.values(P).includes(e)){var i=Le[e];if(/WebKit/.test(navigator.userAgent)&&!/Edg/.test(navigator.userAgent)){var c,s="user"===i?"exact":"ideal";r.video.facingMode=((c={})[s]=i,c)}else r.video.facingMode={ideal:Le[e]}}return(a=r.video)&&"boolean"!==typeof a.video&&(r.video.width=t,r.video.height=n),r}function Ge(){return(Ge=d()((function*(e,t,n){try{return yield Ve(e,t,n)}catch(a){if(a instanceof OverconstrainedError&&"facingMode"===a.constraint){var r=e===P.back?P.front:P.back;return yield Ve(r,t,n)}throw a}}))).apply(this,arguments)}function Ve(e,t,n){return Qe.apply(this,arguments)}function Qe(){return(Qe=d()((function*(e,t,n){var r=He(e,t,n);return yield ue(r)}))).apply(this,arguments)}function Je(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=d()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&t.getVideoTracks&&(yield Promise.all(t.getVideoTracks().map((function(t){return Ye(e,t,n)}))))}))).apply(this,arguments)}function Ye(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=d()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.getCapabilities(),a={},o=["exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","zoom"];for(var i of o)r[i]&&(a[i]=et(r[i],n[i]));function c(t,a,o){return tt({constraintKey:t,settingsKey:a,convertedSetting:o(n[a]),capabilities:r,settings:n,cameraType:e})}r.focusMode&&void 0!==n.autoFocus&&(a.focusMode=c("focusMode","autoFocus",Be)),r.torch&&void 0!==n.flashMode&&(a.torch=c("torch","flashMode",Te)),r.whiteBalanceMode&&void 0!==n.whiteBalance&&(a.whiteBalanceMode=c("whiteBalanceMode","whiteBalance",Re));try{yield t.applyConstraints({advanced:[a]})}catch(s){0}}))).apply(this,arguments)}function Ze(e){e&&(e.getAudioTracks&&e.getAudioTracks().forEach((function(e){return e.stop()})),e.getVideoTracks&&e.getVideoTracks().forEach((function(e){return e.stop()})),"function"===typeof e.stop&&e.stop())}function $e(e,t){var n,r=null!=(n=window.URL.createObjectURL)?n:window.webkitURL.createObjectURL;if("undefined"!==typeof e.srcObject?e.srcObject=t:"undefined"!==typeof e.mozSrcObject?e.mozSrcObject=t:t&&r&&(e.src=r(t)),!t){var a,o,i,c=null!=(a=window.URL.revokeObjectURL)?a:window.webkitURL.revokeObjectURL,s=null!=(o=null!=(i=e.src)?i:e.srcObject)?o:e.mozSrcObject;c&&"string"===typeof s&&c(s)}}function et(e,t){if(t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1];return(e-n[0])*(t[1]-t[0])/(n[1]-n[0])+t[0]}(t,[e.min,e.max]);return Math.min(e.max,Math.max(e.min,n))}}function tt(e){var t=e.constraintKey,n=e.settingsKey,r=e.convertedSetting,a=e.capabilities,o=e.settings;e.cameraType,o[n];if(!Array.isArray(a[t])||!r||a[t].includes(r))return r}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var at=["autoFocus","flashMode","exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","whiteBalance","zoom"];function ot(e,t,n,r){var a=r.onCameraReady,o=r.onMountError,i=F.useRef(!1),c=F.useRef([]),s=F.useRef({autoFocus:"continuous",flashMode:"off",whiteBalance:"continuous",zoom:1}),u=F.useState(null),l=I()(u,2),f=l[0],p=l[1],b=F.useMemo((function(){return f?f.getTracks()[0].getSettings():null}),[f]),v=F.useMemo((function(){if(!b)return null;var e=b.facingMode;return We[void 0===e?"user":e]}),[b]),h=F.useCallback(d()((function*(){try{return yield function(e,t,n){return Ge.apply(this,arguments)}(t)}catch(e){return o&&o({nativeEvent:e}),null}})),[t,o]),m=F.useCallback(d()((function*(){var e=yield h();return function(e,t){if(!e||!t)return!1;var n=e.getTracks()[0].getSettings(),r=t.getTracks()[0].getSettings();return n.deviceId===r.deviceId}(e,f)||(c.current.some((function(t){return t.id===(null==e?void 0:e.id)}))||c.current.push(e),p(e),a&&a()),!1})),[h,p,a,f,c.current]);return F.useEffect((function(){i.current||(i.current=!0,m().then((function(e){i.current=e})).catch((function(){i.current=!1})))}),[t]),F.useEffect((function(){var e={};for(var r of Object.keys(n))if(at.includes(r)){var a=n[r];a!==s.current[r]&&(e[r]=a)}var o=!!Object.keys(e).length,i=rt(rt({},s.current),e);o&&Je(t,f,e),s.current=i}),[n.autoFocus,n.flashMode,n.exposureCompensation,n.colorTemperature,n.iso,n.brightness,n.contrast,n.saturation,n.sharpness,n.focusDistance,n.whiteBalance,n.zoom]),F.useEffect((function(){e.current&&$e(e.current,f)}),[e.current,f]),F.useEffect((function(){return function(){for(var t of c.current)Ze(t);e.current&&$e(e.current,f)}}),[]),function(e,t){F.useEffect((function(){e&&e.addEventListener("loadedmetadata",(function(){requestAnimationFrame((function(){t()}))}))}),[e])}(e.current,(function(){Je(t,f,s.current)})),{type:v,mediaTrackSettings:b}}var it=n(1877);var ct=["type","pictureSize","poster"];function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=F.forwardRef((function(e,t){var n,r,a=e.type,o=(e.pictureSize,e.poster),i=$()(e,ct),c=F.useRef(null),s=ot(c,a,i,{onCameraReady:function(){i.onCameraReady&&i.onCameraReady()},onMountError:i.onMountError}),u=F.useMemo((function(){var e,t;return!(null==(e=i.barCodeScannerSettings)||null==(t=e.barCodeTypes)||!t.includes("qr")||!i.onBarCodeScanned)}),[null==(n=i.barCodeScannerSettings)?void 0:n.barCodeTypes,i.onBarCodeScanned]);!function(e,t){var n=t.isEnabled,r=t.captureOptions,a=t.interval,o=t.onScanned,i=t.onError,c=F.useRef(!1),s=F.useRef(void 0);function u(){return l.apply(this,arguments)}function l(){return(l=d()((function*(){if(c.current&&o)try{var t=Ue(e.current,r);if(t){var n=yield Object(it.scanImageData)(t),l=I()(n,1)[0];l&&o({nativeEvent:{type:l.typeName,data:l.decode(),cornerPoints:l.points}})}}catch(p){i&&i({nativeEvent:p})}finally{if(0===a)return void f();var d=!a||a<0?16:a;s.current=setTimeout((function(){u()}),d)}else f()}))).apply(this,arguments)}function f(){c.current=!1,clearTimeout(s.current)}F.useEffect((function(){n?(c.current=!0,u()):f()}),[n]),F.useEffect((function(){return function(){f()}}),[])}(c,{interval:null==(r=i.barCodeScannerSettings)?void 0:r.interval,isEnabled:u,captureOptions:{scale:1,isImageMirror:s.type===P.front},onScanned:function(e){i.onBarCodeScanned&&i.onBarCodeScanned(e)}}),F.useImperativeHandle(t,(function(){return{getAvailablePictureSizes:function(){var e=d()((function*(e){return Ne}));return function(t){return e.apply(this,arguments)}}(),takePicture:function(){var e=d()((function*(e){var t,n;if(!c.current||(null==(t=c.current)?void 0:t.readyState)!==(null==(n=c.current)?void 0:n.HAVE_ENOUGH_DATA))throw new Y.a("ERR_CAMERA_NOT_READY","HTMLVideoElement does not have enough camera data to construct an image yet.");var r=s.mediaTrackSettings;if(!r)throw new Y.a("ERR_CAMERA_NOT_READY","MediaStream is not ready yet.");return function(e,t,n){var r=qe(e,n),a={uri:r,base64:r,width:0,height:0};if(t){var o=t.width,i=void 0===o?0:o,c=t.height,s=void 0===c?0:c;a.width=i,a.height=s,a.exif=t}return n.onPictureSaved&&n.onPictureSaved(a),a}(c.current,r,ut(ut({},e),{},{onPictureSaved:function(t){e.onPictureSaved&&e.onPictureSaved(t),i.onPictureSaved&&i.onPictureSaved({nativeEvent:{data:t,id:-1}})}}))}));return function(t){return e.apply(this,arguments)}}(),resumePreview:function(){var e=d()((function*(){c.current&&c.current.play()}));return function(){return e.apply(this,arguments)}}(),pausePreview:function(){var e=d()((function*(){c.current&&c.current.pause()}));return function(){return e.apply(this,arguments)}}()}}),[s.mediaTrackSettings,i.onPictureSaved]);var l=F.useMemo((function(){var e=s.type===Me.Type.front;return[ee.a.absoluteFill,ft.video,{transform:e?[{scaleX:-1}]:void 0}]}),[s.type]);return F.createElement(te.a,{pointerEvents:"box-none",style:[ft.videoWrapper,i.style]},F.createElement(dt,{autoPlay:!0,playsInline:!0,muted:!0,poster:o,pointerEvents:i.pointerEvents,ref:c,style:l}),i.children)})),dt=F.forwardRef((function(e,t){return Object(ne.a)("video",ut(ut({},e),{},{ref:t}))})),ft=ee.a.create({videoWrapper:{flex:1,alignItems:"stretch"},video:{width:"100%",height:"100%",objectFit:"cover"}}),pt={type:Me.Type,flashMode:Me.FlashMode,autoFocus:Me.AutoFocus,whiteBalance:Me.WhiteBalance};function bt(e){var t=function(e){if(!e||"object"!==typeof e)return{};var t={};for(var n of Object.entries(e)){var r=I()(n,2),a=r[0],o=r[1];t[a]="string"===typeof o&&pt[a]?pt[a][o]:o}return t}(e);return t.onBarCodeScanned&&(t.barCodeScannerEnabled=!0),t.onFacesDetected&&(t.faceDetectorEnabled=!0),"android"!==Y.e.OS&&(delete t.ratio,delete t.useCamera2Api),"web"!==Y.e.OS&&delete t.poster,t}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K()(e);if(t){var a=K()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q()(this,n)}}var yt={},jt=1;function gt(e){var t=e.nativeEvent,n=t.id,r=t.data,a=yt[n];a&&(a(r),delete yt[n])}var Ot=function(e){G()(n,e);var t=mt(n);function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._lastEvents={},e._lastEventsTimes={},e._onCameraReady=function(){e.props.onCameraReady&&e.props.onCameraReady()},e._onMountError=function(t){var n=t.nativeEvent;e.props.onMountError&&e.props.onMountError(n)},e._onObjectDetected=function(t){return function(n){var r=n.nativeEvent,a=r.type;e._lastEvents[a]&&e._lastEventsTimes[a]&&JSON.stringify(r)===e._lastEvents[a]&&(new Date).getTime()-e._lastEventsTimes[a].getTime()<500||t&&(t(r),e._lastEventsTimes[a]=new Date,e._lastEvents[a]=JSON.stringify(r))}},e._setReference=function(t){t?(e._cameraRef=t,"web"===Y.e.OS?e._cameraHandle=t:e._cameraHandle=Object(X.a)(t)):(e._cameraRef=null,e._cameraHandle=null)},e}n.isAvailableAsync=function(){var e=d()((function*(){if(!Me.isAvailableAsync)throw new Y.g("expo-camera","isAvailableAsync");return yield Me.isAvailableAsync()}));return function(){return e.apply(this,arguments)}}(),n.getAvailableCameraTypesAsync=function(){var e=d()((function*(){if(!Me.getAvailableCameraTypesAsync)throw new Y.g("expo-camera","getAvailableCameraTypesAsync");return yield Me.getAvailableCameraTypesAsync()}));return function(){return e.apply(this,arguments)}}(),n.getAvailableVideoCodecsAsync=function(){var e=d()((function*(){if(!Me.getAvailableVideoCodecsAsync)throw new Y.g("Camera","getAvailableVideoCodecsAsync");return yield Me.getAvailableVideoCodecsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getPermissionsAsync=function(){var e=d()((function*(){return Me.getPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestPermissionsAsync=function(){var e=d()((function*(){return Me.requestPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getCameraPermissionsAsync=function(){var e=d()((function*(){return Me.getCameraPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestCameraPermissionsAsync=function(){var e=d()((function*(){return Me.requestCameraPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getMicrophonePermissionsAsync=function(){var e=d()((function*(){return Me.getMicrophonePermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestMicrophonePermissionsAsync=function(){var e=d()((function*(){return Me.requestMicrophonePermissionsAsync()}));return function(){return e.apply(this,arguments)}}();var r=n.prototype;return r.takePictureAsync=function(){var e=d()((function*(e){var t=function(e){var t=e&&"object"===typeof e?e:{};if(t.quality||(t.quality=1),t.onPictureSaved){var n=jt++;yt[n]=t.onPictureSaved,t.id=n,t.fastMode=!0}return t}(e);return yield Me.takePicture(t,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.getSupportedRatiosAsync=function(){var e=d()((function*(){if(!Me.getSupportedRatios)throw new Y.g("Camera","getSupportedRatiosAsync");return yield Me.getSupportedRatios(this._cameraHandle)}));return function(){return e.apply(this,arguments)}}(),r.getAvailablePictureSizesAsync=function(){var e=d()((function*(e){if(!Me.getAvailablePictureSizes)throw new Y.g("Camera","getAvailablePictureSizesAsync");return yield Me.getAvailablePictureSizes(e,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.recordAsync=function(){var e=d()((function*(e){if(!Me.record)throw new Y.g("Camera","recordAsync");var t=function(e){var t=e||{};return t&&"object"===typeof t?"string"===typeof t.quality&&(t.quality=Ot.Constants.VideoQuality[t.quality]):t={},t}(e);return yield Me.record(t,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.stopRecording=function(){if(!Me.stopRecording)throw new Y.g("Camera","stopRecording");Me.stopRecording(this._cameraHandle)},r.pausePreview=function(){if(!Me.pausePreview)throw new Y.g("Camera","pausePreview");Me.pausePreview(this._cameraHandle)},r.resumePreview=function(){if(!Me.resumePreview)throw new Y.g("Camera","resumePreview");Me.resumePreview(this._cameraHandle)},r.render=function(){var e=bt(this.props),t=this.props.onBarCodeScanned?this._onObjectDetected(this.props.onBarCodeScanned):void 0,n=this._onObjectDetected(this.props.onFacesDetected);return F.createElement(lt,ht(ht({},e),{},{ref:this._setReference,onCameraReady:this._onCameraReady,onMountError:this._onMountError,onBarCodeScanned:t,onFacesDetected:n,onPictureSaved:gt}))},q()(n)}(F.Component);Ot.Constants={Type:Me.Type,FlashMode:Me.FlashMode,AutoFocus:Me.AutoFocus,WhiteBalance:Me.WhiteBalance,VideoQuality:Me.VideoQuality,VideoStabilization:Me.VideoStabilization||{},VideoCodec:Me.VideoCodec},Ot.ConversionTables=pt,Ot.defaultProps={zoom:0,ratio:"4:3",focusDepth:0,faceDetectorSettings:{},type:Me.Type.back,autoFocus:Me.AutoFocus.on,flashMode:Me.FlashMode.off,whiteBalance:Me.WhiteBalance.auto},Ot.useCameraPermissions=Object(Y.h)({getMethod:Ot.getCameraPermissionsAsync,requestMethod:Ot.requestCameraPermissionsAsync}),Ot.useMicrophonePermissions=Object(Y.h)({getMethod:Ot.getMicrophonePermissionsAsync,requestMethod:Ot.requestMicrophonePermissionsAsync});Ot.Constants,Ot.getPermissionsAsync,Ot.requestPermissionsAsync,Ot.getCameraPermissionsAsync;var wt=Ot.requestCameraPermissionsAsync,xt=(Ot.getMicrophonePermissionsAsync,Ot.requestMicrophonePermissionsAsync,n(1210)),St=n(1144),Pt=n(14),At=n(626),Ct=n(1174),Et=n(1162),kt=n(3747),Mt=n(285),Dt=n(23);function _t(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}function Tt(e){return"Permission dismissed"===e.message?{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function Rt(){return(Rt=d()((function*(){try{return yield _t({video:!0}),{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return Tt({message:e.message})}}))).apply(this,arguments)}function Bt(){return(Bt=d()((function*(){var e,t;if(null==(e=navigator)||null==(t=e.permissions)||!t.query)throw new Y.g("expo-barcode-scanner","navigator.permissions API is not available");switch((yield navigator.permissions.query({name:"camera"})).state){case"prompt":return{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}var Nt={get name(){return"ExpoBarCodeScannerModule"},get BarCodeType(){return{code39mod43:"code39mod43",code138:"code138",interleaved2of5:"interleaved2of5",aztec:"aztec",ean13:"ean13",ean8:"ean8",qr:"qr",pdf417:"pdf417",upc_e:"upc_e",datamatrix:"datamatrix",code39:"code39",code93:"code93",itf14:"itf14",codabar:"codabar",code128:"code128",upc_a:"upc_a"}},get Type(){return{front:"front",back:"back"}},requestPermissionsAsync:function(){var e=d()((function*(){return function(){return Rt.apply(this,arguments)}()}));return function(){return e.apply(this,arguments)}}(),getPermissionsAsync:function(){var e=d()((function*(){return function(){return Bt.apply(this,arguments)}()}));return function(){return e.apply(this,arguments)}}()},It=n(107);function Ft(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K()(e);if(t){var a=K()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q()(this,n)}}var Lt=function(e){G()(n,e);var t=Ft(n);function n(){return t.apply(this,arguments)}return n.prototype.render=function(){return L.a.createElement(te.a,null,L.a.createElement(It.a,null,"BarCodeScanner Component not supported on the web"))},q()(n)}(L.a.Component);function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K()(e);if(t){var a=K()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q()(this,n)}}var qt=Nt.BarCodeType,Ht=Nt.Type,Gt=function(e){G()(n,e);var t=zt(n);function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).lastEvents={},e.lastEventsTimes={},e.onObjectDetected=function(t){return function(n){var r=n.nativeEvent,a=r.type;e.lastEvents[a]&&e.lastEventsTimes[a]&&JSON.stringify(r)===e.lastEvents[a]&&Date.now()-e.lastEventsTimes[a]<500||t&&(t(r),e.lastEventsTimes[a]=new Date,e.lastEvents[a]=JSON.stringify(r))}},e}n.getPermissionsAsync=function(){var e=d()((function*(){return Nt.getPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestPermissionsAsync=function(){var e=d()((function*(){return Nt.requestPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.scanFromURLAsync=function(){var e=d()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.values(qt);if(!Nt.scanFromURLAsync)throw new Y.g("expo-barcode-scanner","scanFromURLAsync");if(Array.isArray(t)&&!t.length)throw new Error("No barCodeTypes specified; provide at least one barCodeType for scanner");if("ios"===Dt.a.OS){if(Array.isArray(t)&&!t.includes(qt.qr))throw new Error("Only QR type is supported by scanFromURLAsync() on iOS");return yield Nt.scanFromURLAsync(e,[qt.qr])}return yield Nt.scanFromURLAsync(e,t)}));return function(t){return e.apply(this,arguments)}}();var r=n.prototype;return r.render=function(){var e=this.convertNativeProps(this.props),t=this.props.onBarCodeScanned;return F.createElement(Lt,Ut(Ut({},e),{},{onBarCodeScanned:this.onObjectDetected(t)}))},r.convertNativeProps=function(e){var t={};for(var r of Object.entries(e)){var a=I()(r,2),o=a[0],i=a[1];"string"===typeof i&&n.ConversionTables[o]?t[o]=n.ConversionTables[o][i]:t[o]=i}return t},q()(n)}(F.Component);Gt.Constants={BarCodeType:qt,Type:Ht},Gt.ConversionTables={type:Ht},Gt.defaultProps={type:Ht.back,barCodeTypes:Object.values(qt)},Gt.usePermissions=Object(Y.h)({getMethod:Gt.getPermissionsAsync,requestMethod:Gt.requestPermissionsAsync});Gt.Constants,Gt.getPermissionsAsync,Gt.requestPermissionsAsync,Gt.usePermissions,Gt.scanFromURLAsync;var Vt=function(e){var t=e.style,n=e.isActive,r=e.children,a=e.onQrcodeScanned;return n?Object(x.jsx)(Ot,{style:t,onBarCodeScanned:function(e){var t=e.data;return a(t)},barCodeScannerSettings:{barCodeTypes:[Gt.Constants.BarCodeType.qr]},children:r}):null};Vt.displayName="ScanCamera";var Qt=Vt,Jt=n(1876),Kt=n(681),Yt=function(){var e,t=Object(v.a)(),n=Object(p.a)().bottom,o=Object(F.useState)(Y.d.UNDETERMINED),c=I()(o,2),u=c[0],l=c[1],f=Object(F.useRef)(!1),h=Object(b.t)(),m=Object(r.a)(),y=Object(Ct.a)(),j=null==(e=Object(b.x)().params)?void 0:e.onScanCompleted,g=Object(F.useCallback)(function(){var e=d()((function*(e){if(!f.current&&e){if(f.current=!0,j)return j(e),void y.goBack();var t=yield Object(Et.b)(e);if(t){if(t.type===Kt.b.MIGRATE)return y.goBack(),void setTimeout((function(){Object(kt.a)({serverAddress:e.replace(Mt.b,"")})}),150);y.replace(Kt.a.ScanQrcodeResult,t)}else y.goBack()}}));return function(t){return e.apply(this,arguments)}}(),[y,j]),O=Object(F.useCallback)(d()((function*(){var e=yield Object(xt.a)({base64:!Pt.a.isNative,allowsMultipleSelection:!1});if(!e.cancelled){var t=yield Object(Jt.a)(e.uri);t&&g(t)}})),[g]),w=Object(F.useCallback)(d()((function*(){g(yield Object(St.b)())})),[g]);return Object(F.useEffect)((function(){wt().then((function(e){var t=e.status;return l(t)}))}),[]),Object(F.useEffect)((function(){h&&(f.current=!1)}),[h]),u===Y.d.GRANTED?Object(x.jsx)(a.b,{hidePrimaryAction:!0,hideSecondaryAction:!0,header:t.formatMessage({id:"title__scan_qr_code"}),headerDescription:Pt.a.isNativeIOSPhone?Object(x.jsx)(s.a,{h:"8px"}):void 0,height:"535px",footer:Object(x.jsxs)(i.a,{mb:n,py:"16px",px:m?"16px":"24px",space:"12px",justifyContent:"center",children:[Object(x.jsx)(B.a,{flexGrow:m?1:void 0,size:m?"xl":"base",onPress:O,leftIconName:"PhotoMini",children:t.formatMessage({id:"action__choose_an_image"})}),Pt.a.canGetClipboard?Object(x.jsx)(B.a,{flexGrow:m?1:void 0,size:m?"xl":"base",leftIconName:"ClipboardMini",onPress:w,children:t.formatMessage({id:"action__paste"})}):null]}),staticChildrenProps:{flex:1},children:Object(x.jsx)(Qt,{style:{flex:1},isActive:h,onQrcodeScanned:g,children:Object(x.jsx)(R.a,{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden",children:Object(x.jsx)(s.a,{borderWidth:400,borderColor:"rgba(0,0,0,.5)",borderRadius:"425px",children:Object(x.jsx)(s.a,{size:"256px",borderWidth:4,borderColor:"white",borderRadius:"24px"})})})})}):u===Y.d.DENIED?Object(x.jsx)(At.a,{type:"camera"}):null};Yt.displayName="ScanQrcode";var Xt=Yt,Zt=n(130),$t=n(85),en=n(179),tn=n(267),nn=n(3110),rn=n(31),an=n(333),on=n(3212);function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un={borderWidth:ee.a.hairlineWidth,borderColor:"border-subdued",bgColor:"surface-default",mb:"16px",borderRadius:"12px",overflow:"hidden"},ln={p:"4",flexDirection:"row",alignItems:"center",justifyContent:"space-between",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"}};function dn(e){var t=e.data,n=Object(v.a)(),r=Object(F.useCallback)((function(){Object(St.a)(t),en.a.show({title:n.formatMessage({id:"msg__copied"})})}),[t,n]);return Object(x.jsx)(Zt.a,sn(sn({},ln),{},{onPress:r,children:Object(x.jsxs)(i.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"Square2StackOutline"}),Object(x.jsx)(u.h.Body1Strong,{children:n.formatMessage({id:"action__copy"})})]})}))}var fn=function(){var e=Object(v.a)(),t=Object(b.u)(),n=Object(p.a)().bottom,r=Object(m.d)().wallet,o=Object(b.x)().params,c=o.type,l=o.data,d=o.possibleNetworks,f=e.formatMessage({id:"title__qr_code_info"});c===Kt.b.URL?f=e.formatMessage({id:"title__url"}):c!==tn.b.WATCHING&&c!==tn.b.ADDRESS||(f=e.formatMessage({id:"form__address"}));var y="watching"===(null==r?void 0:r.type),j=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(s.a,sn(sn({},un),{},{children:[c===Kt.b.URL&&Object(x.jsxs)(Zt.a,sn(sn({},ln),{},{onPress:function(){var e;h.a.dispatch(Object(an.i)(l)),null==(e=t.getParent())||e.navigate(O.d.Discover)},children:[Object(x.jsxs)(i.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"GlobeAltOutline"}),Object(x.jsx)(u.h.Body1Strong,{children:e.formatMessage({id:"form__view_in_explore"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})),(c===tn.b.WATCHING||c===tn.b.ADDRESS)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(Zt.a,sn(sn({},ln),{},{borderBottomRadius:0,onPress:function(){t.navigate(Kt.a.PreviewSend,{address:l,possibleNetworks:d})},isDisabled:y,children:[Object(x.jsxs)(i.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"PaperAirplaneOutline",color:y?"icon-disabled":"icon-default"}),Object(x.jsx)(u.h.Body1Strong,{color:y?"text-disabled":"text-default",children:e.formatMessage({id:"form__send_tokens"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",size:20,color:y?"icon-disabled":"icon-subdued"})]})),Object(x.jsx)(s.a,{h:ee.a.hairlineWidth,bgColor:"divider"}),Object(x.jsxs)(Zt.a,sn(sn({},ln),{},{borderRadius:0,onPress:function(){t.navigate(rn.h.Modal,{screen:rn.e.AddressBook,params:{screen:on.a.NewAddressRoute,params:{address:l,possibleNetworks:d}}})},children:[Object(x.jsxs)(i.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"BookOpenOutline"}),Object(x.jsx)(u.h.Body1Strong,{children:e.formatMessage({id:"form__add_to_address_book"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})),Object(x.jsx)(s.a,{h:ee.a.hairlineWidth,bgColor:"divider"})]}),(c===tn.b.WATCHING||c===tn.b.MNEMONIC||c===tn.b.IMPORTED)&&Object(x.jsxs)(Zt.a,sn(sn({},ln),{},{borderTopRadius:0,onPress:function(){t.navigate(rn.h.Modal,{screen:rn.e.CreateWallet,params:{screen:nn.b.AddExistingWalletModal,params:{mode:c,presetText:l}}})},children:[Object(x.jsxs)(i.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"EyeOutline"}),Object(x.jsx)(u.h.Body1Strong,{textTransform:"capitalize",children:e.formatMessage({id:"action__watch_lowercase"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]}))]})),Object(x.jsx)(s.a,sn(sn({},un),{},{children:Object(x.jsx)(dn,{data:l})}))]});return Object(x.jsx)(a.b,{hidePrimaryAction:!0,hideSecondaryAction:!0,header:f,footer:null,scrollViewProps:{pb:n+"px",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(s.a,{borderColor:"border-subdued",borderWidth:ee.a.hairlineWidth,bgColor:"surface-subdued",borderRadius:"12px",alignItems:"center",justifyContent:"center",p:"24px",mb:"32px",children:Object(x.jsx)(u.h.Body1,{textAlign:"center",wordBreak:"break-all",children:l})}),j]})}})},pn=n(456),bn=Object(pn.a)(),vn=[{name:Kt.a.ScanQrcode,component:Xt},{name:Kt.a.ScanQrcodeResult,component:fn},{name:Kt.a.PreviewSend,component:T}];t.default=function(){var e=Object(r.a)();return Object(x.jsx)(bn.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:vn.map((function(e){return Object(x.jsx)(bn.Screen,{name:e.name,component:e.component},e.name)}))})}},3528:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(10),a=n.n(r),o=n(57),i=n(1),c=n(24),s=n(27),u=n(1138),l=n(3031),d=n(1185),f=n(3032),p=n(1184);function b(e){var t=Object(u.c)(),n=Object(u.d)(),r=i.useContext(p.a),c=i.useContext(f.a),b=e.focused,h=e.modal,m=void 0!==h&&h,y=e.header,j=e.headerShown,g=void 0===j||j,O=e.headerTransparent,w=e.headerStatusBarHeight,x=void 0===w?r?0:n.top:w,S=e.navigation,P=e.route,A=e.children,C=e.style,E=i.useState((function(){return Object(d.a)(t,m,x)})),k=a()(E,2),M=k[0],D=k[1];return i.createElement(l.a,{accessibilityElementsHidden:!b,importantForAccessibility:b?"auto":"no-hide-descendants",style:[v.container,C]},i.createElement(s.a,{style:v.content},i.createElement(p.a.Provider,{value:r||!1!==g},i.createElement(f.a.Provider,{value:g?M:null!=c?c:0},A))),g?i.createElement(o.f.Provider,{value:S},i.createElement(o.h.Provider,{value:P},i.createElement(s.a,{onLayout:function(e){var t=e.nativeEvent.layout.height;D(t)},style:O?v.absolute:null},y))):null)}var v=c.a.create({container:{flex:1,flexDirection:"column-reverse"},content:{flex:1},absolute:{position:"absolute",top:0,left:0,right:0}})},3548:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return b}));var r,a=n(3),o=n.n(a),i=n(430),c=n.n(i),s=n(10),u=n.n(s),l=n(1),d=n(43),f=n(3085),p=n(3208);function b(){var e=Object(p.a)().showVerify,t=d.a.serviceCloudBackup,n=Object(l.useCallback)(function(){var e=o()((function*(e){var n=yield t.getDataForBackup(e);return{status:r.SUCCESS,data:n}}));return function(t){return e.apply(this,arguments)}}(),[t]);return{exportDataRequest:Object(l.useCallback)(o()((function*(){return new Promise((function(a){t.getDataForBackup("").then((function(t){!function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=u()(e,2),r=(n[0],n[1]);c()(r)||(t=!1)})),t}(JSON.parse(t.publicData))?e((function(e){n(e).then((function(e){a(e)}))}),(function(){a({status:r.CANCEL})}),null,f.a.Secret):a({status:r.EMPTY})}))}))})),[n,t,e])}}!function(e){e.SUCCESS="success",e.EMPTY="empty",e.CANCEL="cancel"}(r||(r={}))},3570:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(15),i=n.n(o),c=n(57),s=n(1),u=n(3059),l=n(3528),d=n(3058),f=n(3067),p=n(3066),b=n(153),v=n(24),h=n(27);function m(e){var t=e.state,n=e.descriptors;return s.createElement(u.a,null,s.createElement(h.a,{style:y.container},t.routes.map((function(e,r){var a,o=t.index===r,i=0!==r,c=null===(a=t.routes[r-1])||void 0===a?void 0:a.key,u=c?n[c]:void 0,m=n[e.key],j=m.options,g=m.navigation,O=m.render,w=j.header,x=j.headerShown,S=j.headerTintColor,P=j.headerBackImageSource,A=j.headerLeft,C=j.headerRight,E=j.headerTitle,k=j.headerTitleAlign,M=j.headerTitleStyle,D=j.headerStyle,_=j.headerShadowVisible,T=j.headerTransparent,R=j.contentStyle,B=j.headerBackTitle;return s.createElement(l.a,{key:e.key,focused:o,route:e,navigation:g,headerShown:x,headerTransparent:T,header:void 0!==w?w({back:u?{title:Object(d.a)(u.options,u.route.name)}:void 0,options:j,route:e,navigation:g}):s.createElement(f.a,{title:Object(d.a)(j,e.name),headerTintColor:S,headerLeft:"function"===typeof A?function(e){var t=e.tintColor;return A({tintColor:t,canGoBack:i,label:B})}:void 0===A&&i?function(e){var t=e.tintColor;return s.createElement(p.a,{tintColor:t,backImage:void 0!==P?function(){return s.createElement(b.a,{source:P,style:[y.backImage,{tintColor:t}]})}:void 0,onPress:g.goBack,canGoBack:i})}:A,headerRight:"function"===typeof C?function(e){var t=e.tintColor;return C({tintColor:t})}:C,headerTitle:"function"===typeof E?function(e){var t=e.children,n=e.tintColor;return E({children:t,tintColor:n})}:E,headerTitleAlign:k,headerTitleStyle:M,headerStyle:[T?{position:"absolute",backgroundColor:"transparent"}:null,D,!1===_?{shadowOpacity:0,borderBottomWidth:0}:null]}),style:[v.a.absoluteFill,{display:o?"flex":"none"}]},s.createElement(h.a,{style:[y.contentContainer,R]},O()))}))))}var y=v.a.create({container:{flex:1},contentContainer:{flex:1},backImage:{height:24,width:24,margin:3,resizeMode:"contain"}}),j=["initialRouteName","children","screenListeners","screenOptions"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.m)((function(e){var t=e.initialRouteName,n=e.children,r=e.screenListeners,a=e.screenOptions,o=i()(e,j),u=Object(c.v)(c.j,{initialRouteName:t,children:n,screenListeners:r,screenOptions:a}),l=u.state,d=u.descriptors,f=u.navigation;return s.useEffect((function(){var e;return null===f||void 0===f||null===(e=f.addListener)||void 0===e?void 0:e.call(f,"tabPress",(function(e){var t=f.isFocused();requestAnimationFrame((function(){l.index>0&&t&&!e.defaultPrevented&&f.dispatch(O(O({},c.i.popToTop()),{},{target:l.key}))}))}))}),[f,l.index,l.key]),s.createElement(m,w({},o,{state:l,navigation:f,descriptors:d}))}))},3747:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r,a=n(2),o=n.n(a),i=n(1154),c=n(103),s=n(654),u=n(115),l=n(199),d=n(1146),f=n(85),p=n(755),b=n(32),v=n(72),h=n(289),m=n(179),y=n(3),j=n.n(y),g=n(430),O=n.n(g),w=n(10),x=n.n(w),S=n(1),P=n(57),A=n(4900),C=n(429),E=n(24),k=n(384),M=n(145),D=n(43),_=n(392),T=n(953),R=n(285),B=n(3548),N=n(0);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Success=0]="Success",e[e.Fail=1]="Fail",e[e.Connecting=2]="Connecting"}(r||(r={}));var L=Object(R.d)(),W=function(e){var t=e.serverAddress,n=e.serverInfo,a=e.closeOverlay,o=D.a.serviceMigrate,y=Object(S.useRef)(n),g=Object(S.useState)((function(){return n?r.Success:r.Connecting})),w=x()(g,2),_=w[0],I=w[1],F=Object(S.useState)(L),W=x()(F,2),U=W[0],z=W[1],q=Object(S.useState)(y.current),H=x()(q,2),G=H[0],V=H[1],Q=Object(S.useMemo)((function(){return Object(R.g)(U)}),[U]),J=Object(S.useMemo)((function(){if(G)return Object(R.g)(G)}),[G]),K=Object(S.useState)(!0),Y=x()(K,2),X=Y[0],Z=Y[1],$=Object(C.a)(),ee=Object(B.b)().exportDataRequest,te=Object(P.u)();Object(S.useEffect)((function(){_===r.Connecting&&setTimeout((function(){o.connectServer(t).then((function(e){e?(y.current=e,V(e),I(r.Success)):I(r.Fail)}))}),500)}),[_,t,o]),Object(S.useEffect)((function(){_===r.Success&&void 0!==y.current&&(X?(z(L),V(y.current)):(z(y.current),V(L)))}),[_,U,X,G]);var ne=Object(S.useCallback)(j()((function*(){var e=yield ee(),n=e.status,r=e.data;if(n===B.a.SUCCESS){var a=yield o.sendDataToServer({ipAddress:t,data:JSON.stringify(r)});return a&&J?m.a.show({title:"\ud83e\uddd9 "+$.formatMessage({id:"msg__data_sent_to_platform"},{platform:J.name})}):m.a.show({title:$.formatMessage({id:"form__failed"})},{type:"error"}),a}return n===B.a.EMPTY&&m.a.show({title:$.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1})),[ee,$,J,t,o]),re=Object(S.useCallback)(j()((function*(){var e=yield o.getDataFromServer({ipAddress:t});return!!e&&("number"===typeof e?void(e===k.a.ConnectFail&&I(r.Fail)):function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=x()(e,2),r=(n[0],n[1]);O()(r)||(t=!1)})),t}(JSON.parse(e.public))?(m.a.show({title:$.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1):(o.disConnectServer(t),a(),te.navigate(M.c.Onboarding,{screen:T.a.MigrationPreview,params:{data:e}}),!0))})),[a,$,te,t,o]),ae=Object(S.useState)(!1),oe=x()(ae,2),ie=oe[0],ce=oe[1],se=Object(S.useCallback)(j()((function*(){ce(!0),X?(yield ne(),o.disConnectServer(t),a()):yield re(),ce(!1)})),[a,re,X,ne,t,o]),ue=Object(S.useMemo)((function(){return _===r.Connecting?Object(N.jsx)(p.a,{title:"",subTitle:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(h.b,{size:"lg"}),Object(N.jsx)(v.a,{mt:"12px",typography:"DisplayMedium",children:$.formatMessage({id:"content__connecting"})})]})}):_===r.Fail?Object(N.jsx)(p.a,{emoji:"\ud83d\udeab",title:$.formatMessage({id:"modal__failed_to_connect"}),subTitle:$.formatMessage({id:"modal__migrating_data_connection_failed_desc"})}):_===r.Success&&J&&Q?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(b.a,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:E.a.hairlineWidth,children:[Object(N.jsxs)(b.a,{py:"16px",children:[Object(N.jsx)(v.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:$.formatMessage({id:"content__from"})}),Object(N.jsxs)(b.a,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[Object(N.jsx)(f.a,{name:Q.logo,size:24,color:"icon-subdued"}),Object(N.jsx)(v.a,{typography:"Body1Strong",flex:1,ml:"8px",children:Q.name}),X&&Object(N.jsx)(A.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:Object(N.jsx)(d.a,{size:"sm",type:"info",title:$.formatMessage({id:"content__current"})})})]})]}),Object(N.jsx)(b.a,{borderBottomWidth:E.a.hairlineWidth,borderColor:"border-subdued"}),Object(N.jsxs)(b.a,{py:"16px",children:[Object(N.jsx)(v.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:$.formatMessage({id:"content__to"})}),Object(N.jsxs)(b.a,{paddingX:"16px",flexDirection:"row",justifyContent:"space-between",mt:"12px",children:[Object(N.jsx)(f.a,{name:J.logo,size:24,color:"icon-subdued"}),Object(N.jsx)(v.a,{typography:"Body1Strong",flex:1,ml:"8px",children:J.name}),!X&&Object(N.jsx)(A.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:Object(N.jsx)(d.a,{size:"sm",type:"info",title:$.formatMessage({id:"content__current"})})})]})]}),Object(N.jsx)(u.a,{position:"absolute",width:"full",height:"full",children:Object(N.jsx)(l.a,{onPress:function(){Z((function(e){return!e}))},name:"SwitchVerticalOutline",circle:!0,type:"basic",size:"base",iconColor:"icon-default"})})]}),Object(N.jsxs)(b.a,{mt:"24px",children:[ie&&!X&&Object(N.jsx)(s.a,{customIconName:"EllipsisHorizontalCircleMini",title:$.formatMessage({id:"modal__migrating_data_awaiting_confirmation"},{from:Q.name}),alertType:"success",dismiss:!1}),Object(N.jsx)(c.a,{mt:"12px",size:"xl",type:"primary",onPress:se,isLoading:ie,children:$.formatMessage({id:"action__migrate"})})]})]}):void 0}),[_,$,ie,X,se,Q,J]);return Object(N.jsx)(i.a,{title:$.formatMessage({id:"modal__migrating_data"}),headerDescription:_===r.Success?Object(N.jsxs)(v.a,{typography:"Caption",color:"text-success",children:["\ud83c\udf89 ",$.formatMessage({id:"modal__migrating_data_desc"})]}):null,closeOverlay:function(){o.disConnectServer(t),a()},children:ue})},U=function(e){return Object(_.a)((function(t){return Object(N.jsx)(W,F(F({},e),{},{closeOverlay:t}))}))}}}]);