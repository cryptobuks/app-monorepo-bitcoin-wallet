(this.webpackJsonp=this.webpackJsonp||[]).push([[15],{3217:function(t,e,n){"use strict";var r=n(32),o=n(115),i=n(2),a=n.n(i),u=n(199),c=n(15),s=n.n(c),d=n(1),l=n(119),f=n(1784),p=n(181),h=n(714),v=n(628),m=n(0),y=["children","renderLeftArrow","renderRightArrow","bg","selectedIndex","leftButtonProps","rightButtonProps"];function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=Object(d.forwardRef)((function(t,e){var n=t.children,i=t.renderLeftArrow,a=t.renderRightArrow,c=t.bg,b=void 0===c?"surface-default":c,g=t.selectedIndex,w=t.leftButtonProps,k=t.rightButtonProps,j=s()(t,y),I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(d.useRef)(e);return Object(d.useEffect)((function(){t&&("function"===typeof t?t(n.current):t.current=n.current)}),[t]),n}(e),T=Object(l.a)(!1),A=Object(l.a)(!1),x=Object(l.a)(0),P=Object(l.a)(0),S=Object(l.a)(0),C=Object(d.useCallback)((function(t){S.value=t,P.value&&(A.value=Math.floor(S.value-x.value)>P.value)}),[]),R=Object(f.a)(function(){var t=function(t){var e=t.contentOffset,n=t.contentSize;x.value=e.x,T.value=x.value>0,A.value=Math.floor(n.width-x.value)>P.value};return t._closure={currentOffsetX:x,showLeftArrow:T,showRightArrow:A,containerWidth:P},t.asString="function _f({contentOffset:contentOffset,contentSize:contentSize}){const{currentOffsetX,showLeftArrow,showRightArrow,containerWidth}=jsThis._closure;{currentOffsetX.value=contentOffset.x;showLeftArrow.value=currentOffsetX.value>0;showRightArrow.value=Math.floor(contentSize.width-currentOffsetX.value)>containerWidth.value;}}",t.__workletHash=0xd8f9392efcb,t.__location="/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx (64:6)",t}(),[]),N=Object(d.useRef)([]),B=Object(d.useRef)(0),D=Object(d.useRef)(),F=Object(d.useCallback)((function(t){if(I.current){var e=N.current[t];if(e&&B.current){var n=e.x+e.width/2-B.current/2;return D.current=void 0,I.current.scrollTo({x:n,animated:!0})}}D.current=t}),[I]),U=d.Children.count(n);Object(d.useEffect)((function(){N.current=[],D.current=void 0}),[U]),Object(d.useEffect)((function(){void 0!==g&&F(g)}),[F,g]);var q=Object(d.useCallback)((function(){var t;null==(t=I.current)||t.scrollTo({x:x.value-P.value||0,animated:!0})}),[]),E=Object(d.useCallback)((function(){var t;null==(t=I.current)||t.scrollTo({x:x.value+P.value,animated:!0})}),[]),_=Object(d.useCallback)((function(t){var e=t.nativeEvent.layout.width;P.value=e,A.value=Math.floor(S.value-x.value)>P.value}),[]);return Object(m.jsxs)(r.a,O(O({bg:b},j),{},{onLayout:_,children:[Object(m.jsx)(p.default.View,{style:[{position:"absolute"},Object(h.a)(function(){var t=function(){return{opacity:Object(v.a)(T.value?1:0,{duration:300}),scale:Object(v.a)(T.value?1:0,{duration:300}),zIndex:Object(v.a)(T.value?1:-1,{duration:300})}};return t._closure={withTiming:v.a,showLeftArrow:T},t.asString="function _f(){const{withTiming,showLeftArrow}=jsThis._closure;{return{opacity:withTiming(showLeftArrow.value?1:0,{duration:300}),scale:withTiming(showLeftArrow.value?1:0,{duration:300}),zIndex:withTiming(showLeftArrow.value?1:-1,{duration:300})};}}",t.__workletHash=4700141212306,t.__location="/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx (150:14)",t.__optimalization=2,t}(),[])],children:Object(m.jsx)(o.a,{bg:b,children:i?i({onPress:q}):Object(m.jsx)(u.a,O({type:"plain",circle:!0,name:"ChevronLeftMini",size:"sm",onPress:q},w))})}),Object(m.jsx)(p.default.ScrollView,{ref:I,onLayout:function(t){var e=t.nativeEvent.layout.width;B.current=e,D.current&&F(D.current)},style:{flex:1},horizontal:!0,onScroll:R,scrollEventThrottle:16,showsHorizontalScrollIndicator:!1,onContentSizeChange:C,children:d.Children.map(n,(function(t,e){return Object(d.cloneElement)(t,O(O({},t.props),{},{onPress:function(){F(e),null==t.props.onPress||t.props.onPress()},onLayout:function(t){var n=t.nativeEvent.layout,r=n.width,o=n.x;N.current[e]={x:o,width:r}}}))}))}),Object(m.jsx)(p.default.View,{style:[{position:"absolute",right:0},Object(h.a)(function(){var t=function(){return{opacity:Object(v.a)(A.value?1:0,{duration:300}),scale:Object(v.a)(A.value?1:0,{duration:300}),zIndex:Object(v.a)(A.value?1:-1,{duration:300})}};return t._closure={withTiming:v.a,showRightArrow:A},t.asString="function _f(){const{withTiming,showRightArrow}=jsThis._closure;{return{opacity:withTiming(showRightArrow.value?1:0,{duration:300}),scale:withTiming(showRightArrow.value?1:0,{duration:300}),zIndex:withTiming(showRightArrow.value?1:-1,{duration:300})};}}",t.__workletHash=0xa6e322ee692,t.__location="/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx (234:14)",t.__optimalization=2,t}(),[])],children:Object(m.jsx)(o.a,{bg:b,children:a?a({onPress:E}):Object(m.jsx)(u.a,O({type:"plain",circle:!0,name:"ChevronRightMini",size:"sm",onPress:E},k))})})]}))}));g.displayName="ScrollableButtonGroup";e.a=g},3233:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p}));var r=n(10),o=n.n(r),i=n(16),a=n.n(i),u=n(1),c=n(43),s=n(39);function d(){var t=function(){var t=Object(s.e)((function(t){return t.swapTransactions.transactions}));return Object(u.useMemo)((function(){var e=Object.values(t).reduce((function(t,e){return t.concat.apply(t,a()(Object.values(e)))}),[]);return a()(e).sort((function(t,e){return t.addedTime>e.addedTime?-1:1}))}),[t])}();return Object(u.useMemo)((function(){return t.filter((function(t){return"swap"===t.type}))}),[t])}function l(){var t=Object(s.e)((function(t){return t.runtime.wallets}));return Object(u.useMemo)((function(){return t.reduce((function(t,e){return t.concat(e.accounts.map((function(t){return{accountId:t,walletId:e.id}})))}),[])}),[t])}function f(){var t=d(),e=l(),n=Object(s.e)((function(t){return t.runtime.networks})),r=Object(u.useMemo)((function(){return n.map((function(t){return t.id}))}),[n]),o=Object(u.useMemo)((function(){return e.map((function(t){return t.accountId}))}),[e]);return t.filter((function(t){return o.includes(t.accountId)&&r.includes(t.networkId)}))}function p(t,e){var n=l(),r=Object(u.useState)((function(){return n.find((function(e){return e.accountId===t}))?void 0:null})),i=o()(r,2),a=i[0],s=i[1];return Object(u.useEffect)((function(){var r=n.find((function(e){return e.accountId===t}));r&&c.a.engine.getAccounts([r.accountId],e).then((function(t){var e=o()(t,1)[0];e&&s(e)}))}),[n,t,e]),a}},3252:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(2),o=n.n(r),i=n(15),a=n.n(i),u=n(130),c=n(240),s=n(41),d=n(115),l=n(1148),f=n(85),p=n(1),h=n(3217),v=n(0),m=["buttons","selectedIndex","onButtonPress","size","bg","maxTextWidth"];function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(t){var e=t.text,n=t.leftIcon,r=t.leftImage,o=t.leftComponentRender,i=t.isCurrent,a=t.onPress,h=t.leftIconSize,m=t.onLayout,y=t.size,b=t.maxTextWidth,O=t.leftIconSelectedColor,g="sm"===y,w=h||(g?"16px":"20px"),k=O||"icon-hovered",j=Object(p.useMemo)((function(){var t="0px";return e.length>0&&(t=g?"4px":"8px"),t}),[g,e.length]);return Object(v.jsx)(u.a,{mr:"8px",onPress:a,onLayout:m,children:function(t){var a=t.isHovered,u=t.isPressed;return Object(v.jsxs)(c.a,{alignItems:"center",h:g?"32px":"36px",px:g?"8px":"12px",py:g?"6px":"8px",borderRadius:"9999px",bg:i?"surface-selected":u?"surface-pressed":a?"surface-hovered":"transparent",children:[(!!n||!!r)&&Object(v.jsxs)(d.a,{borderRadius:"9999px",w:w,h:w,mr:j,children:[!!n&&Object(v.jsx)(f.a,{name:n,color:i?k:"icon-default"}),!!r&&Object(v.jsx)(l.a,{height:w,width:w,src:r})]}),null==o?void 0:o(),e.length>0?Object(v.jsx)(s.h.Body2Strong,{maxW:b,isTruncated:!0,color:i?"text-default":"text-subdued",children:e}):null]})}})},g=function(t){var e=t.buttons,n=t.selectedIndex,r=t.onButtonPress,o=t.size,i=void 0===o?"sm":o,u=t.bg,c=void 0===u?"surface-default":u,s=t.maxTextWidth,d=a()(t,m);return Object(v.jsx)(h.a,b(b({bg:c,overflow:"hidden",w:"full",flexDirection:"row",alignItems:"center",position:"relative",selectedIndex:n},d),{},{children:e.map((function(t,e){return Object(v.jsx)(O,b(b({isCurrent:n===e},t),{},{size:i,maxTextWidth:s,onPress:function(){r(e)}}),e)}))}))};g.displayName="ToggleButtonGroup";var w=g},3285:function(t,e,n){"use strict";n.d(e,"e",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return g}));var r=n(16),o=n.n(r),i=n(3),a=n.n(i),u=n(10),c=n.n(u),s=n(1),d=n(101),l=n(43),f=n(178),p=n(3088),h=n(513),v=function(t,e){var n=Object(s.useState)(!1),r=c()(n,2),o=r[0],i=r[1],u=Object(s.useState)(),d=c()(u,2),f=d[0],p=d[1],h=Object(s.useRef)({keyword:"",count:0});return Object(s.useEffect)((function(){function n(){return(n=a()((function*(e,n){if(0!==e.length){i(!0),p([]);var r=[];try{h.current.count+=1,r=yield l.a.serviceSwap.searchTokens({networkId:null!=n?n:void 0,keyword:t}),e===h.current.keyword&&n===h.current.networkId&&p(r)}finally{h.current.count-=1,0===h.current.count&&i(!1)}}else p(void 0)}))).apply(this,arguments)}h.current.keyword=t,h.current.networkId=e,function(t,e){n.apply(this,arguments)}(t,e)}),[t,e]),{loading:o,result:f}},m=function(t,e){var n=Object(f.c)(t,e);return Object(f.v)(n,2e3)},y=function(t,e){var n=m(null==t?void 0:t.networkId,e);return Object(s.useEffect)((function(){t&&e&&l.a.serviceToken.getAccountTokenBalance({accountId:e,networkId:t.networkId,tokenIds:t.tokenIdOnNetwork?[t.tokenIdOnNetwork]:[]})}),[t,e]),Object(s.useMemo)((function(){var e;if(t)return null==(e=n[Object(d.g)(t)])?void 0:e.balance}),[n,t])},b=function(t){var e=Object(p.b)({networkId:null==t?void 0:t.networkId,contractAdress:null==t?void 0:t.tokenIdOnNetwork});return Object(s.useMemo)((function(){if(t)return e}),[e,t])};function O(t){var e=Object(f.h)((function(t){return t.swapTransactions.tokenList}));return Object(s.useMemo)((function(){var n;if(!e)return[];var r=t;r||(r="All");var o=e.find((function(t){return t.networkId===r}));return null!=(n=null==o?void 0:o.tokens)?n:[]}),[e,t])}function g(t,e){var n=O(t),r=Object(f.b)(t,e),i=m(t,e);return Object(s.useMemo)((function(){var t=[].concat(o()(n),o()(r)),e=new Set,a=function(t){return""+t.networkId+t.tokenIdOnNetwork},u=t.filter((function(t){return!e.has(a(t))&&(e.add(a(t)),!0)})),c=function(t){var e,n,r=t||"main";return Boolean(i[r]&&Number(Object(h.l)(null!=(e=null==(n=i[r])?void 0:n.balance)?e:"0",6))>0)};if(!i)return u;var s=u.filter((function(t){return c(t.tokenIdOnNetwork)})),d=u.filter((function(t){return!c(t.tokenIdOnNetwork)}));return s.concat(d)}),[n,r,i])}},3303:function(t,e,n){"use strict";n.d(e,"g",(function(){return v})),n.d(e,"f",(function(){return m})),n.d(e,"e",(function(){return y})),n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return O})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return w}));var r=n(6),o=n.n(r),i=n(1),a=n(26),u=n.n(a),c=n(429),s=n(178),d=n(761),l=n(513),f=n(3285),p=n(3339),h=function(){function t(t,e){this.token=t,this.typedValue=e,this.base=new u.a(10),this.value=new u.a(e),this.decimals=new u.a(t.decimals),this.amount=this.base.exponentiatedBy(this.decimals).multipliedBy(this.value)}var e=t.prototype;return e.toNumber=function(){return this.amount},e.toFormat=function(){return this.toNumber().toFixed(0)},o()(t)}();function v(t,e){return Object(i.useMemo)((function(){if(t&&e){var n=Object(l.s)(t,e);return new h(t,n.toFixed())}}),[t,e])}function m(){var t=Object(s.h)((function(t){return t.swap.inputToken})),e=Object(s.h)((function(t){return t.swap.outputToken})),n=Object(s.h)((function(t){return t.swap.recipient})),r=Object(s.h)((function(t){return t.swap.sendingAccount})),o=Object(s.h)((function(t){return t.swap.allowAnotherRecipientAddress}));return Object(i.useMemo)((function(){if(t&&e&&(Object(l.p)(t.networkId)===Object(l.p)(e.networkId)&&!o&&r))return{accountId:r.id,address:r.address,name:r.name,networkId:t.networkId,networkImpl:t.impl};return n}),[n,r,o,t,e])}function y(){var t=Object(p.e)().value,e=Object(s.h)((function(t){return t.swap.inputToken})),n=Object(s.h)((function(t){return t.swap.outputToken})),r=Object(s.h)((function(t){return t.swap.independentField})),o=Object(s.h)((function(t){return t.swap.typedValue})),a=Object(s.h)((function(t){return t.swap.inputTokenNetwork})),c=Object(s.h)((function(t){return t.swap.outputTokenNetwork})),d=Object(s.h)((function(t){return t.swap.sendingAccount})),l=m(),f=null==l?void 0:l.address,h=Object(i.useMemo)((function(){if(e&&n&&o&&a&&c&&d&&f&&!new u.a(o).lte(0))return{typedValue:o,independentField:r,networkOut:c,networkIn:a,tokenOut:n,tokenIn:e,slippagePercentage:t,activeAccount:d,receivingAddress:f}}),[o,r,e,n,a,c,t,d,f]);return Object(s.i)(h,500)}function b(){var t=Object(s.h)((function(t){return t.swap.independentField})),e=Object(s.h)((function(t){return t.swap.typedValue})),n=Object(s.h)((function(t){return t.swap.inputToken})),r=Object(s.h)((function(t){return t.swap.outputToken})),o=Object(s.h)((function(t){return t.swap.quote})),a=v(n,Object(l.t)(null==o?void 0:o.sellAmount)),u=v(r,Object(l.t)(null==o?void 0:o.buyAmount)),c=Object(i.useMemo)((function(){var n,r="INPUT"===t?"OUTPUT":"INPUT";return(n={})[t]=e,n[r]="INPUT"===r?Object(l.l)(null==a?void 0:a.value):Object(l.l)(null==u?void 0:u.value),n}),[t,a,u,e]);return{inputAmount:a,outputAmount:u,formattedAmounts:c}}var O=function(){var t=Object(s.h)((function(t){return t.swap.inputToken})),e=Object(s.h)((function(t){return t.swap.sendingAccount})),n=function(){var t=Object(s.h)((function(t){return t.swap.inputToken})),e=Object(s.h)((function(t){return t.swap.typedValue}));return Object(i.useMemo)((function(){if(t&&e)return Object(l.r)(t,e)}),[t,e])}(),r=Object(f.c)(n?t:void 0,null==e?void 0:e.id);return Object(i.useMemo)((function(){if(t&&r&&n)return{insufficient:new h(t,r).toNumber().lt(n),token:t}}),[t,r,n])},g=function(){var t=Object(s.h)((function(t){return t.swap.error})),e=O();return Object(i.useMemo)((function(){return t||(e&&e.insufficient?d.b.InsufficientBalance:void 0)}),[t,e])};function w(){var t=Object(c.a)(),e=Object(s.h)((function(t){return t.swap.inputToken})),n=Object(s.h)((function(t){return t.swap.quoteLimited})),r=b().inputAmount,o=v(e,null==n?void 0:n.max),a=v(e,null==n?void 0:n.min);return Object(i.useMemo)((function(){var n,i;if(r&&e&&(o||a)){if(a){var u=a.typedValue;a.amount.gt(r.amount)&&(n=t.formatMessage({id:"msg__str_minimum_amount"},{0:u+" "+e.symbol}),i=u)}if(o){var c=o.typedValue;o.amount.lt(r.amount)&&(n=t.formatMessage({id:"msg__str_maximum_amount"},{0:c+" "+e.symbol}),i=c)}}if(n&&i)return{message:n,value:i}}),[r,e,o,a,t])}},3339:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"e",(function(){return h})),n.d(e,"d",(function(){return v}));var r=n(1),o=n(26),i=n.n(o),a=n(429),u=n(178),c=n(513),s=n(3285);function d(){var t=Object(a.a)();return Object(r.useCallback)((function(e){var n;if("approve"===e.type)return e.approval?t.formatMessage({id:"title__approve"})+" "+(null==(n=e.approval)?void 0:n.token.symbol):""+t.formatMessage({id:"title__approve"});if("swap"===e.type&&e.tokens){var r=e.tokens,o=r.from,i=r.to;return Object(c.l)(o.amount,4)+" "+o.token.symbol+" \u2192 "+(Object(c.l)(i.amount,4)+" "+i.token.symbol)}return""}),[t])}function l(){var t=Object(u.h)((function(t){return t.swap.inputToken})),e=Object(u.h)((function(t){return t.swap.outputToken})),n=Object(s.d)(t),r=Object(s.d)(e),o=Object(u.h)((function(t){var e;return null==(e=t.swap.quote)?void 0:e.instantRate}));if(r&&n&&o){var i=Object(c.j)(n,r);if(Object(c.x)(o,i)){var a=Object(c.z)(Object(c.j)(Object(c.y)(i,o),i),100);return Number(a)}}}function f(){var t=Object(u.h)((function(t){return t.swapTransactions.recommendedSlippage}));return Object(r.useMemo)((function(){var e,n,r;return{stable:null!=(e=null==t?void 0:t.stable)?e:"0.1",popular:null!=(n=null==t?void 0:t.popular)?n:"0.5",others:null!=(r=null==t?void 0:t.others)?r:"1"}}),[t])}function p(){var t=Object(u.h)((function(t){return t.swap.inputToken})),e=Object(u.h)((function(t){return t.swap.outputToken})),n=Object(u.h)((function(t){return t.swapTransactions.slippage})),o=Object(u.h)((function(t){return t.swapTransactions.coingeckoIds})),i=f(),a=Object(r.useCallback)((function(t){if(o&&t){var e=o.popular,n=o.stable;return n&&n.includes(t)?{type:"stable",value:i.stable}:e&&e.includes(t)?{type:"popular",value:i.popular}:{type:"others",value:i.others}}}),[o,i]);return Object(r.useMemo)((function(){if((!n||"auto"===n.mode)&&t&&e){var r=a(t.coingeckoId),o=a(e.coingeckoId);return Number(null==r?void 0:r.value)>Number(null==o?void 0:o.value)?r:o}}),[n,t,e,a])}function h(){var t=Object(u.h)((function(t){return t.swapTransactions.slippage})),e=p(),n=Object(r.useMemo)((function(){var n,r;return e?{mode:"auto",value:null!=(r=e.value)?r:"1"}:{mode:null==t?void 0:t.mode,value:null!=(n=null==t?void 0:t.value)?n:"1"}}),[e,t]);return Object(u.i)(n,500)}var v=function(){var t=Object(u.h)((function(t){return t.swap.quote})),e=h().value;return Object(r.useMemo)((function(){if(t){var n=t.minAmountOut,r=t.estimatedBuyAmount,o=t.buyAmount;if(n)return Number(n);var a=r||o;if(a){var u=new i.a(a);if(!u.isNaN())return u.minus(u.multipliedBy(Number(e)/100)).toFixed()}}}),[t,e])}},3371:function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t.HistoryRequestModal="HistoryRequestModal",t.TicketDetailModal="TicketDetailModal",t.ReplyTicketModel="ReplyTicketModel",t.SubmitRequestModal="SubmitRequestModal"}(r||(r={}))},3374:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(72),o=n(115),i=n(32),a=n(277),u=n(0);function c(t){return"https://node.onekey.so/proxyimg?base="+t}var s=function(t){var e=t.sources,n=t.size||4;if(!e||0===e.length)return null;if(1===e.length)return Object(u.jsx)(i.a,{borderRadius:"full",w:n,h:n,overflow:"hidden",bgColor:"surface-neutral-default",children:Object(u.jsx)(a.a,{size:n,src:c(e[0]),testID:e[0]})},e[0]);var r=function(t,e){return t<=0?0:-e/2};return Object(u.jsx)(i.a,{flexDirection:"row",alignItems:"center",children:e.map((function(t,e){return Object(u.jsx)(o.a,{ml:r(e,n),borderRadius:"full",h:n,w:n,overflow:"hidden",bgColor:"surface-neutral-default",children:Object(u.jsx)(a.a,{size:n,src:c(t)})},t)}))})};e.b=function(t){var e=t.providers,n=t.typography,o=void 0===n?"Caption":n,a=t.color,c=void 0===a?"text-subdued":a,d=t.fontWeight,l=void 0===d?400:d;if(!e)return Object(u.jsx)(i.a,{flexDirection:"row",flexGrow:1,children:Object(u.jsx)(r.a,{typography:o,color:c,isTruncated:!0,children:"OneKey Swap"})});if(1===e.length)return Object(u.jsxs)(i.a,{flexDirection:"row",alignItems:"center",flexGrow:1,children:[e[0].logoUrl?Object(u.jsx)(s,{sources:[e[0].logoUrl]}):null,Object(u.jsx)(r.a,{ml:2,typography:o,color:c,fontWeight:l,isTruncated:!0,children:e[0].name})]});if(e.length>1){var f=e.map((function(t){return t.logoUrl})).filter(Boolean);return Object(u.jsxs)(i.a,{alignItems:"center",flexDirection:"row",flexGrow:1,children:[f.length>0?Object(u.jsx)(s,{sources:f}):null,Object(u.jsxs)(r.a,{ml:"2",typography:o,color:c,fontWeight:l,isTruncated:!0,children:[e.length," Exchanges"]})]})}return Object(u.jsx)(i.a,{alignItems:"center",flexDirection:"row",flexGrow:1,children:Object(u.jsx)(r.a,{typography:o,color:c,children:"OneKey Swap"})})}},3375:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return p}));var r,o,i,a,u=n(36),c="https://www.bangwo8.com/osp2016/im/pc/index.php?vendorID=782460&uid=&customSource=onekey",s=[u.a.eth,u.a.bsc,u.a.polygon,u.a.fantom,u.a.avalanche,u.a.celo,u.a.optimism,u.a.arbitrum],d=((r={})[u.a.heco]="https://0x.onekey.so/swap/v1/quote",r[u.a.goerli]="https://goerli.api.0x.org/swap/v1/quote",r),l=((o={})[u.a.eth]=60,o[u.a.bsc]=30,o[u.a.polygon]=30,o[u.a.fantom]=30,o[u.a.avalanche]=30,o[u.a.celo]=60,o[u.a.optimism]=60,o[u.a.heco]=15,o[u.a.okt]=15,o),f=((i={})[u.a.okt]=[{name:"CherrySwap",logoUrl:"https://common.onekey-asset.com/logo/CherrySwap.png"}],i[u.a.heco]=[{name:"MDex",logoUrl:"https://common.onekey-asset.com/logo/MdexSwap.png"}],i[u.a.xdai]=[{name:"HoneySwap",logoUrl:"https://common.onekey-asset.com/logo/HoneySwap.png"}],i),p=((a={})[u.a.eth]=.01,a[u.a.bsc]=.01,a[u.a.polygon]=.1,a[u.a.btc]=.001,a[u.a.optimism]=1e-4,a[u.a.xrp]=11,a[u.a.trx]=5,a[u.a.bch]=.01,a[u.a.algo]=.2,a)},3779:function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var r=n(2),o=n.n(r),i=n(3),a=n.n(i),u=n(6),c=n.n(u),s=n(78),d=n.n(s),l=n(26),f=n.n(l),p=n(174),h=n(56),v=n(11),m=n(20),y=n(43),b=n(513),O=n(36),g=n(3375),w=n(761);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=function(){function t(){this.type=w.a.zeroX,this.client=d.a.create({timeout:1e4})}var e=t.prototype;return e.getBaseUrl=function(){var t=a()((function*(t){var e,n=yield y.a.serviceSwap.getServerEndPoint();return((e={})[O.a.eth]=n+"/0x/quote?chainID=ethereum",e[O.a.bsc]=n+"/0x/quote?chainID=bsc",e[O.a.polygon]=n+"/0x/quote?chainID=polygon",e[O.a.fantom]=n+"/0x/quote?chainID=fantom",e[O.a.avalanche]=n+"/0x/quote?chainID=avalanche",e[O.a.celo]=n+"/0x/quote?chainID=celo",e[O.a.optimism]=n+"/0x/quote?chainID=optimism",e[O.a.arbitrum]=n+"/0x/quote?chainID=arbitrum",e)[t]}));return function(e){return t.apply(this,arguments)}}(),e.isSupported=function(t,e){return t.id===e.id&&g.f.includes(t.id)},e.getProviderLogo=function(t){return"https://common.onekey-asset.com/logo/"+t+".png"},e.fetch0xQuote=function(){var t=a()((function*(t,e){var n=this,r=(yield this.client.get(t,{params:e})).data.data;return{providers:(null==r?void 0:r.sources.filter((function(t){return Number(t.proportion)>0}))).map((function(t){return{name:t.name.split("_").join(" "),logoUrl:n.getProviderLogo(t.name)}})),data:r}}));return function(e,n){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){var e,n=t.networkIn,r=t.networkOut,o=t.tokenIn,i=t.tokenOut,a=t.slippagePercentage,u=t.independentField,c=t.typedValue,s=t.activeAccount,d=t.receivingAddress;if(this.isSupported(n,r)&&d===s.address){var l=+a/100,f={sellToken:o.tokenIdOnNetwork||b.A,buyToken:i.tokenIdOnNetwork||b.A,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:b.k,affiliateAddress:b.b};"INPUT"===u?f.sellAmount=new b.a(o,c).toFormat():f.buyAmount=new b.a(i,c).toFormat();var p=yield this.getBaseUrl(o.networkId);if(p){var h=yield this.fetch0xQuote(p,f),v=h.providers,m=h.data,y={type:this.type,instantRate:m.price,allowanceTarget:m.allowanceTarget,buyAmount:m.buyAmount,buyTokenAddress:m.buyTokenAddress,sellAmount:m.sellAmount,sellTokenAddress:m.sellTokenAddress,arrivalTime:null!=(e=g.a[n.id])?e:30,percentageFee:m.percentageFee,providers:v};return m.data&&(y.txData={from:s.address,to:m.to,data:m.data,value:m.value}),y.instantRate="INPUT"===u?m.price:Object(b.j)(1,m.price),{data:y}}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){var e=t.networkIn,n=t.networkOut,r=t.tokenIn,o=t.tokenOut,i=t.slippagePercentage,a=t.independentField,u=t.typedValue,c=t.activeAccount,s=t.txData,d=t.receivingAddress;if(this.isSupported(e,n)&&d===c.address){if(s)return{data:s};var l=+i/100,f={sellToken:r.tokenIdOnNetwork||b.A,buyToken:o.tokenIdOnNetwork||b.A,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:b.k,affiliateAddress:b.b,takerAddress:c.address};"INPUT"===a?f.sellAmount=new b.a(r,u).toFormat():f.buyAmount=new b.a(o,u).toFormat();var p=yield this.getBaseUrl(r.networkId);if(p)return{data:j(j({},(yield this.fetch0xQuote(p,f)).data),{},{from:c.address})}}}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.nonce;if(void 0!==r)return{status:yield y.a.serviceHistory.queryTransactionNonceStatus({networkId:e,accountId:n,nonce:r})};var o=yield y.a.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-t.addedTime>36e5?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),c()(t)}();function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t){return t.tokenIdOnNetwork?t.tokenIdOnNetwork:"So11111111111111111111111111111111111111112"}var P=function(){function t(){this.type=w.a.jupiter,this.client=d.a.create({timeout:6e4})}var e=t.prototype;return e.getBaseURL=function(){var t=a()((function*(){return(yield y.a.serviceSwap.getServerEndPoint())+"/jupiter"}));return function(){return t.apply(this,arguments)}}(),e.isSupported=function(t,e){return t.id===e.id&&"sol"===t.impl},e.fetchPrice=function(){var t=a()((function*(t,e){var n=(yield this.getBaseURL())+"/v1/price",r=yield this.client.get(n,{params:{id:x(t),vsToken:x(e)}});if(r.data)return r.data.data}));return function(e,n){return t.apply(this,arguments)}}(),e.buildSwapTransaction=function(){var t=a()((function*(t,e,n){var r=(yield this.getBaseURL())+"/v1/swap",o=(yield this.client.post(r,{route:t,userPublicKey:e,outputMint:n})).data;if(!(null!=o&&o.cleanupTransaction||null!=o&&o.setupTransaction))return null==o?void 0:o.swapTransaction}));return function(e,n,r){return t.apply(this,arguments)}}(),e.findBestTransaction=function(){var t=a()((function*(t,e,n){for(var r=0;r<t.length;r+=1){var o=t[r],i=yield this.buildSwapTransaction(o,e,n);if(i)return{transaction:i,route:o}}}));return function(e,n,r){return t.apply(this,arguments)}}(),e.doQuote=function(){var t=a()((function*(t,e){var n,r=(yield this.getBaseURL())+"/v1/quote",o=yield this.client.get(r,{params:t});if(o.data){var i=o.data.data,a=yield this.findBestTransaction(i,e,t.outputMint);if(a)return A(A({},a),{},{percentageFee:null==o||null==(n=o.data)?void 0:n.percentageFee})}}));return function(e,n){return t.apply(this,arguments)}}(),e.refreshRecentBlockBash=function(){var t=a()((function*(t,e){return y.a.engine.solanaRefreshRecentBlockBash({transaction:e,accountId:t,networkId:O.a.sol})}));return function(e,n){return t.apply(this,arguments)}}(),e.findRouteAndTransaction=function(){var t=a()((function*(t){var e=t.tokenIn,n=t.tokenOut,r=t.typedValue,o=t.independentField,i=t.activeAccount,a={inputMint:x(e),outputMint:x(n),amount:Object(b.r)("OUTPUT"===o?n:e,r),swapMode:"ExactIn",slippage:t.slippagePercentage,onlyDirectRoutes:!0};"OUTPUT"===o&&(a.swapMode="ExactOut");var u=yield this.doQuote(a,i.address);return u||(a.onlyDirectRoutes=!1,yield this.doQuote(a,i.address))}));return function(e){return t.apply(this,arguments)}}(),e.fetchRawQuote=function(){var t=a()((function*(t){var e=t.tokenIn,n=t.tokenOut,r=yield this.findRouteAndTransaction(t);if(r){var o=r.route,i=r.transaction,a=r.percentageFee;if(o)return{data:{type:this.type,instantRate:Object(b.g)(e.decimals,n.decimals,o.inAmount,o.outAmount),sellTokenAddress:x(e),buyTokenAddress:x(n),providers:[{name:"Jupiter",logoUrl:"https://common.onekey-asset.com/logo/Jupiter.png"}],arrivalTime:30,sellAmount:String(o.inAmount),buyAmount:String(o.outAmount),percentageFee:a,txData:i}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchAdjustedQuote=function(){var t=a()((function*(t){var e=t.tokenIn,n=t.tokenOut,r=t.typedValue;if("OUTPUT"===t.independentField){var o=yield this.fetchPrice(e,n);if(o){var i=Object(b.j)(r,o.price),a=A({},t);a.independentField="INPUT",a.typedValue=i;var u=yield this.findRouteAndTransaction(a);if(u){var c=u.route,s=u.transaction,d=new f.a(Object(b.r)(n,r)),l=new f.a(c.outAmount).isGreaterThan(d.multipliedBy(.95));if(c&&l)return{data:{type:this.type,instantRate:Object(b.g)(e.decimals,n.decimals,c.inAmount,c.outAmount),sellTokenAddress:x(e),buyTokenAddress:x(n),providers:[{name:"Jupiter",logoUrl:"https://common.onekey-asset.com/logo/Jupiter.png"}],arrivalTime:30,sellAmount:String(c.inAmount),buyAmount:String(Object(b.r)(n,r)),txData:s}}}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){if(t.activeAccount.address===t.receivingAddress){var e=yield this.fetchRawQuote(t);return e||this.fetchAdjustedQuote(t)}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){if(t.activeAccount.address===t.receivingAddress){var e=t.activeAccount;if(t.txData)if("string"===typeof t.txData)return{data:yield this.refreshRecentBlockBash(e.id,t.txData)};var n=yield this.findRouteAndTransaction(t);if(n){var r=n.transaction;return{data:yield this.refreshRecentBlockBash(r,e.id)}}}}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.hash;return{status:yield y.a.serviceHistory.queryTransactionByTxid({networkId:e,accountId:n,txid:r})}}));return function(e){return t.apply(this,arguments)}}(),c()(t)}();function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R=function(){function t(){this.type=w.a.mdex,this.client=d.a.create({timeout:1e4})}var e=t.prototype;return e.isSupported=function(t,e){return t.id===e.id&&!!g.c[t.id]},e.fetchQuote=function(){var t=a()((function*(t){var e,n=t.networkIn,r=t.networkOut,o=t.tokenIn,i=t.tokenOut,a=t.slippagePercentage,u=t.independentField,c=t.typedValue,s=t.activeAccount,d=t.receivingAddress;if(this.isSupported(n,r)&&d===s.address){var l=+a/100,f={sellToken:o.tokenIdOnNetwork||b.A,buyToken:i.tokenIdOnNetwork||b.A,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:b.k,affiliateAddress:b.b};"INPUT"===u?f.sellAmount=new b.a(o,c).toFormat():f.buyAmount=new b.a(i,c).toFormat();var p=g.c[o.networkId];if(p){var h=(yield this.client.get(p,{params:f})).data,v={type:this.type,instantRate:h.price,allowanceTarget:h.allowanceTarget,buyAmount:h.buyAmount,buyTokenAddress:h.buyTokenAddress,sellAmount:h.sellAmount,sellTokenAddress:h.sellTokenAddress,providers:null!=(e=g.b[o.networkId])?e:[{name:"OneKey Swap"}],arrivalTime:15};return h.data&&(v.txData={from:s.address,to:h.to,data:h.data,value:h.value}),v.instantRate="INPUT"===u?h.price:Object(b.j)(1,h.price),{data:v}}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){var e=t.networkIn,n=t.networkOut,r=t.tokenIn,o=t.tokenOut,i=t.slippagePercentage,a=t.independentField,u=t.typedValue,c=t.activeAccount,s=t.txData,d=t.receivingAddress;if(this.isSupported(e,n)&&d===c.address){if(s)return{data:s};var l=+i/100,f={sellToken:r.tokenIdOnNetwork||b.A,buyToken:o.tokenIdOnNetwork||b.A,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:b.k,affiliateAddress:b.b,takerAddress:c.address};"INPUT"===a?f.sellAmount=new b.a(r,u).toFormat():f.buyAmount=new b.a(o,u).toFormat();var p=g.c[r.networkId];if(p)return{data:C(C({},(yield this.client.get(p,{params:f})).data),{},{from:c.address})}}}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.nonce;if(void 0!==r)return{status:yield y.a.serviceHistory.queryTransactionNonceStatus({networkId:e,accountId:n,nonce:r})};var o=yield y.a.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-t.addedTime>36e5?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),c()(t)}();function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D,F=function(){function t(){this.type=w.a.socket,this.client=d.a.create({timeout:3e4})}var e=t.prototype;return e.prepare=function(){this.refreshSupportedChains()},e.getBaseURL=function(){var t=a()((function*(){return(yield y.a.serviceSwap.getServerEndPoint())+"/socketBridge"}));return function(){return t.apply(this,arguments)}}(),e.fetchTokenPrice=function(){var t=a()((function*(t){var e,n=(yield this.getBaseURL())+"/token-price",r=yield this.client.get(n,{params:{tokenAddress:Object(b.o)(t),chainId:Object(b.n)(t.networkId)}});return null==r||null==(e=r.data)?void 0:e.result}));return function(e){return t.apply(this,arguments)}}(),e.fetchInstantTokenRate=function(){var t=a()((function*(t,e){var n=yield this.fetchTokenPrice(t),r=yield this.fetchTokenPrice(e);if(n&&r)return new f.a(r.tokenPrice).div(n.tokenPrice).toNumber()}));return function(e,n){return t.apply(this,arguments)}}(),e.fetchInstantTokenRateFromChain=function(){var t=a()((function*(t,e,n){var r,o,i,a,u=(yield this.getBaseURL())+"/quote",c={fromChainId:Object(b.n)(t.networkId),fromTokenAddress:Object(b.o)(t),toChainId:Object(b.n)(e.networkId),toTokenAddress:Object(b.o)(e),fromAmount:Object(b.r)(t,"1"),userAddress:n,sort:"output",singleTxOnly:!0},s=yield this.client.get(u,{params:c}),d=null==(r=s)||null==(o=r.data)?void 0:o.result;if(d){if(d.routes.length>0){var l=d.routes[0],f=Object(b.g)(t.decimals,e.decimals,l.fromAmount,l.toAmount);return Number(f)}if(d.bridgeRouteErrors){var p=Object.values(d.bridgeRouteErrors).find((function(t){return t.maxAmount||t.minAmount}));if(p){var h=(null==p?void 0:p.maxAmount)||(null==p?void 0:p.minAmount);if(h&&(c.fromAmount=h,(d=null==(i=s=yield this.client.get(u,{params:c}))||null==(a=i.data)?void 0:a.result)&&d.routes.length>0)){var v=d.routes[0],m=Object(b.g)(t.decimals,e.decimals,v.fromAmount,v.toAmount);return Number(m)}}}}}));return function(e,n,r){return t.apply(this,arguments)}}(),e.refreshSupportedChains=function(){var t=a()((function*(){var t=yield this.fetchSupportedChains(),e=t.filter((function(t){return t.sendingEnabled})).map((function(t){return String(t.chainId)})),n=t.filter((function(t){return t.receivingEnabled})).map((function(t){return String(t.chainId)}));e.length>0&&(this.supportedSendingChainIds=e),n.length>0&&(this.supportedReceivingChainIds=n)}));return function(){return t.apply(this,arguments)}}(),e.fetchSupportedChains=function(){var t=a()((function*(){var t,e=yield this.getBaseURL(),n=yield this.client.get(e+"/supported/chains");return null==n||null==(t=n.data)?void 0:t.result}));return function(){return t.apply(this,arguments)}}(),e.getBridgeInfo=function(){var t=a()((function*(t){this.supportedBridges||(this.supportedBridges=yield this.fetchSupportedBridges());var e=this.supportedBridges.filter((function(e){return e.name===t||e.bridgeName===t}))[0];return{icon:null==e?void 0:e.icon,displayName:null==e?void 0:e.displayName}}));return function(e){return t.apply(this,arguments)}}(),e.fetchSupportedBridges=function(){var t=a()((function*(){var t,e=yield this.getBaseURL(),n=yield this.client.get(e+"/supported/bridges");return null==n||null==(t=n.data)?void 0:t.result}));return function(){return t.apply(this,arguments)}}(),e.isSupported=function(t,e){var n="evm"===t.impl&&"evm"===e.impl;if(!n)return!1;if(!this.supportedReceivingChainIds||!this.supportedSendingChainIds)return n;var r=Object(b.m)(t),o=Object(b.m)(e);return n&&this.supportedSendingChainIds.includes(r)&&this.supportedReceivingChainIds.includes(o)},e.fetchTransactionData=function(){var t=a()((function*(t){var e=yield this.getBaseURL();return(yield this.client.post(e+"/build-tx",{route:t})).data.result}));return function(e){return t.apply(this,arguments)}}(),e.fetchSimpleQuoteFromInput=function(){var t=a()((function*(t){var e,n,r=(yield this.getBaseURL())+"/quote";if(t.networkIn.id===t.networkOut.id&&"OUTPUT"!==t.independentField){var o;try{o=yield this.client.get(r,{params:{fromChainId:Object(b.n)(t.networkIn.id),fromTokenAddress:Object(b.o)(t.tokenIn),toChainId:Object(b.n)(t.networkOut.id),toTokenAddress:Object(b.o)(t.tokenOut),fromAmount:Object(b.r)(t.tokenIn,t.typedValue),userAddress:t.activeAccount.address,recipient:t.receivingAddress,sort:"output",singleTxOnly:!0}})}catch(m){return}var i=null==(e=o)||null==(n=e.data)?void 0:n.result;if(i&&i.routes.length>0){var a=i.routes.find((function(t){return!!t.isOnlySwapRoute}));if(a){var u,c,s=a.fromAmount,d=Object(b.o)(t.tokenIn),l=a.toAmount,f=Object(b.o)(t.tokenOut),p=Object(b.g)(t.tokenIn.decimals,t.tokenOut.decimals,s,l),h=yield this.fetchTransactionData(a);h&&h.approvalData&&h.approvalData.allowanceTarget&&(u=h.approvalData.allowanceTarget),h&&(c={from:t.activeAccount.address,value:h.value,to:h.txTarget,data:h.txData});var v=[];if(a.userTxs)v=a.userTxs.filter((function(t){return t.protocol})).map((function(t){return t.protocol})).map((function(t){return{name:t.displayName,logoUrl:t.icon}}));return{data:{type:this.type,sellAmount:s,sellTokenAddress:d,buyAmount:l,buyTokenAddress:f,instantRate:p,allowanceTarget:u,txData:c,arrivalTime:30,providers:v}}}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchSimpleQuote=function(){var t=a()((function*(t){if("INPUT"===t.independentField)return this.fetchSimpleQuoteFromInput(t);var e=t.tokenIn,n=t.tokenOut,r=t.typedValue,o=yield this.fetchInstantTokenRateFromChain(e,n,t.activeAccount.address);if(o){var i=Object(b.j)(r,o),a=B({},t);a.independentField="INPUT",a.typedValue=i;var u=yield this.fetchSimpleQuoteFromInput(a);if(null==u||!u.data)return u;var c=new f.a(u.data.buyAmount),s=new f.a(Object(b.r)(n,r));if(c.isGreaterThan(s.multipliedBy(.95))){var d=u.data;return d.buyAmount=Object(b.r)(n,r),{data:d}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchMultichainQuoteFromInput=function(){var t=a()((function*(t){var e,n,r=this,o=(yield this.getBaseURL())+"/quote";if("OUTPUT"!==t.independentField){var i;try{i=yield this.client.get(o,{params:{fromChainId:Object(b.n)(t.networkIn.id),fromTokenAddress:Object(b.o)(t.tokenIn),toChainId:Object(b.n)(t.networkOut.id),toTokenAddress:Object(b.o)(t.tokenOut),fromAmount:Object(b.r)(t.tokenIn,t.typedValue),userAddress:t.activeAccount.address,recipient:t.receivingAddress,sort:"output",singleTxOnly:!0}})}catch(w){return}var a=null==(e=i)||null==(n=e.data)?void 0:n.result;if(a&&a.routes.length>0){var u,c,s=a.routes[0],d=s.fromAmount,l=Object(b.o)(t.tokenIn),f=s.toAmount,p=Object(b.o)(t.tokenOut),h=Object(b.g)(t.tokenIn.decimals,t.tokenOut.decimals,d,f),v=yield this.fetchTransactionData(s);v&&v.approvalData&&v.approvalData.allowanceTarget&&(u=v.approvalData.allowanceTarget),v&&(c={from:t.activeAccount.address,value:v.value,to:v.txTarget,data:v.txData});var m=yield Promise.all(s.usedBridgeNames.map((function(t){return r.getBridgeInfo(t)}))),y=s.usedBridgeNames.map((function(t,e){var n,r;return{name:null==(n=m[e])?void 0:n.displayName,logoUrl:null==(r=m[e])?void 0:r.icon}}));return{data:{type:this.type,sellAmount:d,sellTokenAddress:l,buyAmount:f,buyTokenAddress:p,instantRate:h,allowanceTarget:u,txData:c,arrivalTime:s.serviceTime,providers:y,additionalParams:{socketUsedBridgeNames:s.usedBridgeNames}}}}var O=null==a?void 0:a.bridgeRouteErrors;if(O){var g=Object.values(O).filter((function(t){return t.maxAmount||t.minAmount})).map((function(t){return{max:t.maxAmount,min:t.minAmount}}));if(g.length>0)return{limited:Object(b.f)(g)}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchMultichainQuote=function(){var t=a()((function*(t){if("INPUT"===t.independentField)return this.fetchMultichainQuoteFromInput(t);var e=t.tokenIn,n=t.tokenOut,r=t.typedValue,o=yield this.fetchInstantTokenRateFromChain(e,n,t.activeAccount.address);if(o){var i=Object(b.j)(r,o),a=B({},t);a.independentField="INPUT",a.typedValue=i;var u=yield this.fetchMultichainQuoteFromInput(a);if(null==u||!u.data)return u;var c=new f.a(u.data.buyAmount),s=new f.a(Object(b.r)(n,r));if(c.isGreaterThan(s.multipliedBy(.95))){var d=u.data;return d.buyAmount=Object(b.r)(n,r),{data:d}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){if(this.isSupported(t.networkIn,t.networkOut))return t.networkIn.id===t.networkOut.id?this.fetchSimpleQuote(t):this.fetchMultichainQuote(t)}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){var e=t.txData,n=t.additionalParams;if(e)return{data:e,attachment:{socketUsedBridgeNames:null==n?void 0:n.socketUsedBridgeNames}};var r,o,i=yield this.fetchQuote(t);if(null!=i&&i.data&&(null!=i&&null!=(r=i.data)&&r.txData))return{data:null==i?void 0:i.data.txData,attachment:{socketUsedBridgeNames:null==(o=i.data.additionalParams)?void 0:o.socketUsedBridgeNames}}}));return function(e){return t.apply(this,arguments)}}(),e.querySocketBridgeStatus=function(){var t=a()((function*(t){var e,n;try{var r=yield this.getBaseURL();n=yield this.client.get(r+"/bridge-status",{params:t})}catch(a){return}var o,i=n.data.result;return"COMPLETED"===i.sourceTxStatus&&"COMPLETED"===i.destinationTxStatus||"COMPLETED"===(null==(e=i.refuel)?void 0:e.status)?{status:"sucesss",destinationTransactionHash:i.destinationTransactionHash||(null==(o=i.refuel)?void 0:o.destinationTransactionHash)}:"FAILED"===i.destinationTxStatus||"FAILED"===i.sourceTxStatus?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),e.queryCrosschainTransactionProgress=function(){var t=a()((function*(t){var e=t.nonce,n=t.networkId,r=t.accountId,o=t.tokens,i=t.attachment;if(void 0!==e&&o)for(var a=o.from,u=o.to,c=Object(b.n)(a.networkId),s=Object(b.n)(u.networkId),d=yield y.a.serviceHistory.getTransactionsWithNonce({nonce:e,networkId:n,accountId:r}),l=0;l<d.length;l+=1){var f,p,h,v,m=d[l].decodedTx.txid,O=yield this.querySocketBridgeStatus({fromChainId:c,toChainId:s,transactionHash:m,bridgeName:null==i||null==(f=i.socketUsedBridgeNames)?void 0:f[0]});if("sucesss"===(null==(p=O)?void 0:p.status))return{status:O.status,destinationTransactionHash:O.destinationTransactionHash};if("failed"===(null==(h=O)?void 0:h.status))return{status:O.status};if(null!=(v=O)&&v.destinationTransactionHash)return{destinationTransactionHash:O.destinationTransactionHash}}if(Date.now()-t.addedTime>36e5)return{status:"failed"}}));return function(e){return t.apply(this,arguments)}}(),e.querySimpleTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.nonce;if(r)return{status:yield y.a.serviceHistory.queryTransactionNonceStatus({networkId:e,accountId:n,nonce:r})};var o=yield y.a.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-t.addedTime>36e5?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.tokens;if(e){var n=e.from,r=e.to;return n.networkId===r.networkId?this.querySimpleTransactionProgress(t):this.queryCrosschainTransactionProgress(t)}}));return function(e){return t.apply(this,arguments)}}(),c()(t)}(),U=((D={})[O.a.btc]="BTC",D[O.a.eth]="ETH",D[O.a.bsc]="BSC",D[O.a.heco]="HECO",D[O.a.polygon]="POLYGON",D[O.a.avalanche]="AVAXC",D[O.a.okt]="OKExChain",D[O.a.fantom]="FTM",D[O.a.arbitrum]="ARB",D[O.a.celo]="CELO",D[O.a.optimism]="Optimism",D[O.a.sol]="SOL",D[O.a.trx]="TRX",D[O.a.near]="NEAR",D[O.a.etc]="ETC",D[O.a.ethw]="ETHW",D[O.a.etf]="ETHF",D[O.a.doge]="DOGE",D[O.a.ltc]="LTC",D[O.a.bch]="BCH",D[O.a.apt]="APT",D[O.a.algo]="ALGO",D),q={};function E(t){var e;return null!=(e=U[t.id])?e:""}var _=function(){var t=e.prototype;function e(){this.type=w.a.swftc,this.coinsLastUpdate=0,this.coinCodeRecords={},this.coinCodeRecordsLastUpdate=0,this.networkAddrRecords={},this.networkAddrRecordsLastUpdate=0,this.client=d.a.create({timeout:6e4})}return t.getBaseUrl=function(){var t=a()((function*(){return(yield y.a.serviceSwap.getServerEndPoint())+"/swft"}));return function(){return t.apply(this,arguments)}}(),t.prepare=function(){this.getCoins()},t.isSupported=function(t,e){return!0},t.modifyTxId=function(){var t=a()((function*(t,e){var n=(yield this.getBaseUrl())+"/modifyTxId";return(yield this.client.post(n,{orderId:t,depositTxid:e})).data.data}));return function(e,n){return t.apply(this,arguments)}}(),t.getGroupedCoins=function(){var t=a()((function*(){var t=yield this.getCoins();return this.groupCoinsByChainId(t)}));return function(){return t.apply(this,arguments)}}(),t.getCoin=function(){var t=a()((function*(t,e){var n,r=E(t);return null==(n=(yield this.getNetworkAddrRecords())[r])?void 0:n[e]}));return function(e,n){return t.apply(this,arguments)}}(),t.getLocalCoins=function(){var t=a()((function*(){var t=y.a.serviceSwap;return this.coins?this.coins:yield t.getSwftcCoins()}));return function(){return t.apply(this,arguments)}}(),t.saveLocalCoins=function(){var t=a()((function*(t){var e=y.a.serviceSwap;yield e.setSwftcCoins(t),this.coins=t,this.coinsLastUpdate=Date.now()}));return function(e){return t.apply(this,arguments)}}(),t.getRemoteCoins=function(){var t=a()((function*(){var t=(yield this.getBaseUrl())+"/queryCoinList";return(yield this.client.post(t)).data.data}));return function(){return t.apply(this,arguments)}}(),t.updateCoins=function(){var t=a()((function*(){var t=yield this.getRemoteCoins();this.saveLocalCoins(t)}));return function(){return t.apply(this,arguments)}}(),t.getCoins=function(){var t=a()((function*(){var t=this,e=yield this.getLocalCoins();return e||(e=yield this.getRemoteCoins(),yield this.saveLocalCoins(e)),Date.now()-this.coinsLastUpdate>36e5&&setTimeout((function(){return t.updateCoins()}),10),e}));return function(){return t.apply(this,arguments)}}(),t.getNetworkAddrRecords=function(){var t=a()((function*(){if(this.networkAddrRecords&&Date.now()-this.networkAddrRecordsLastUpdate<36e5)return this.networkAddrRecords;var t=yield this.getCoins(),e={};return t.forEach((function(t){e[t.mainNetwork]||(e[t.mainNetwork]={});var n=t.contact||b.A;e[t.mainNetwork][n]=t})),this.networkAddrRecords=e,this.networkAddrRecordsLastUpdate=Date.now(),this.networkAddrRecords}));return function(){return t.apply(this,arguments)}}(),t.groupCoinsByChainId=function(t){var e={};return t.forEach((function(t){var n=function(t){if(q[t])return q[t];for(var e=Object.keys(U),n=0;n<e.length;n+=1){var r=e[n],o=U[r];if(o&&(q[o]=r,o===t))return r}}(t.mainNetwork);if(n){e[n]||(e[n]=[]);var r=t.contact||b.A;e[n].push(r)}})),e},t.fetchSwftcQuote=function(){var t=a()((function*(t){var e=t.networkIn,n=t.networkOut,r=t.tokenOut,o=t.tokenIn;if(this.isSupported(e,n)){var i=yield this.getNetworkAddrRecords(),a=E(e),u=E(n),c=Object(b.o)(o),s=Object(b.o)(r);if(a&&u){var d,l,f,p,h=null==(d=i[a])||null==(l=d[c])?void 0:l.coinCode,v=null==(f=i[u])||null==(p=f[s])?void 0:p.coinCode,m=(yield this.getBaseUrl())+"/getBaseInfo";if(h&&v)return{depositCoinCode:h,receiveCoinCode:v,rate:(yield this.client.post(m,{depositCoinCode:h,receiveCoinCode:v})).data.data}}}}));return function(e){return t.apply(this,arguments)}}(),t.fetchQuote=function(){var t=a()((function*(t){var e=t.independentField,n=t.tokenIn,r=t.typedValue,o=t.tokenOut,i=yield this.fetchSwftcQuote(t);if(i){var a={type:this.type,instantRate:i.rate.instantRate,sellTokenAddress:Object(b.o)(n),buyTokenAddress:Object(b.o)(o),providers:[{name:"SwftBridge",logoUrl:"https://common.onekey-asset.com/logo/SwftBridge.png"}],arrivalTime:300,sellAmount:"",buyAmount:"",percentageFee:i.rate.percentageFee};"INPUT"===e?(a.sellAmount=Object(b.r)(n,r),a.buyAmount=Object(b.r)(o,function(t,e,n,r){var o=new f.a(t),i=new f.a(e),a=new f.a(n),u=new f.a(r);return o.minus(o.multipliedBy(i)).multipliedBy(a).minus(u).toFixed()}(r,Object(b.C)(i.rate.depositCoinFeeRate,"0"),i.rate.instantRate,i.rate.chainFee))):(a.buyAmount=Object(b.r)(o,r),a.sellAmount=Object(b.r)(n,function(t,e,n,r){var o=new f.a(t),i=new f.a(e),a=new f.a(n),u=new f.a(r);return o.plus(u).div(a).div(new f.a(1).minus(i)).toFixed()}(r,Object(b.C)(i.rate.depositCoinFeeRate,"0"),i.rate.instantRate,i.rate.chainFee)));var u=new b.a(n,i.rate.depositMax).toNumber(),c=new b.a(n,i.rate.depositMin).toNumber();return{data:a,limited:{max:u.toFixed(),min:c.toFixed()}}}}));return function(e){return t.apply(this,arguments)}}(),t.buildTransaction=function(){var t=a()((function*(t){var e=t.typedValue,n=t.independentField,r=t.activeAccount,o=t.tokenIn,i=t.networkIn,a=t.receivingAddress,u=yield this.fetchSwftcQuote(t);if(u&&r){var c=u.depositCoinCode,s=u.receiveCoinCode,d=u.rate,l="",p="";"INPUT"===n?(l=e,p=Object(b.z)(e,d.instantRate)):(p=e,l=Object(b.j)(e,d.instantRate));var h=r.address,v=null!=a?a:r.address,m=r.address,O=yield this.createOrder(c,s,new f.a(l).toFixed(8,f.a.ROUND_DOWN),new f.a(p).toFixed(8,f.a.ROUND_DOWN),h,v,m);return O&&O.data?o.tokenIdOnNetwork?{data:yield y.a.engine.buildEncodedTxFromTransfer({networkId:i.id,accountId:r.id,transferInfo:{from:r.address,to:O.data.platformAddr,amount:l,token:o.tokenIdOnNetwork}}),attachment:{swftcOrderId:O.data.orderId}}:{data:yield y.a.engine.buildEncodedTxFromTransfer({networkId:i.id,accountId:r.id,transferInfo:{from:r.address,to:O.data.platformAddr,amount:l}}),attachment:{swftcOrderId:O.data.orderId}}:{error:{code:O.resCode,msg:O.resMsg}}}}));return function(e){return t.apply(this,arguments)}}(),t.createOrder=function(){var t=a()((function*(t,e,n,r,o,i,a){var u={equipmentNo:o,destinationAddr:i,refundAddr:a,depositCoinAmt:n,receiveCoinAmt:r,depositCoinCode:t,receiveCoinCode:e,sourceType:"H5",sourceFlag:"ONEKEY"},c=(yield this.getBaseUrl())+"/accountExchange";return(yield this.client.post(c,u)).data}));return function(e,n,r,o,i,a,u){return t.apply(this,arguments)}}(),t.getTxOrderInfo=function(){var t=a()((function*(t){var e,n,r=null!=(e=null==(n=t.attachment)?void 0:n.swftcOrderId)?e:t.thirdPartyOrderId;if(r){var o=(yield this.getBaseUrl())+"/queryOrderState";return(yield d.a.post(o,{equipmentNo:t.from,sourceType:"H5",orderId:r})).data.data}}));return function(e){return t.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var t=a()((function*(t){var e,n,r=null!=(e=null==(n=t.attachment)?void 0:n.swftcOrderId)?e:t.thirdPartyOrderId;if(r){var o=(yield this.getBaseUrl())+"/queryOrderState",i=(yield d.a.post(o,{equipmentNo:t.from,sourceType:"H5",orderId:r})).data.data;if("complete"===i.tradeState)return{status:"sucesss",destinationTransactionHash:i.transactionId};if(i.transactionId)return{destinationTransactionHash:i.transactionId}}var a=t.networkId,u=t.accountId,c=t.nonce,s=t.hash;if("evm"===Object(p.g)(a)&&void 0!==c){var l=yield y.a.serviceHistory.queryTransactionNonceStatus({networkId:a,accountId:u,nonce:c});if("canceled"===l||"failed"===l)return{status:l}}else if("evm"!==Object(p.g)(a)){var f=yield y.a.serviceHistory.queryTransactionByTxid({networkId:a,accountId:u,txid:s});if("canceled"===f||"failed"===f)return{status:f}}if(Date.now()-t.addedTime>108e5)return{status:"failed"}}));return function(e){return t.apply(this,arguments)}}(),c()(e)}();function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=function(){function t(){this.httpClient=d.a.create({timeout:6e4}),this.jupiter=new P,this.swftc=new _,this.simple=new I,this.socket=new F,this.mdex=new R,this.quoters=[this.mdex,this.simple,this.socket,this.jupiter,this.swftc],this.transactionReceipts={}}var e=t.prototype;return e.prepare=function(){this.quoters.forEach((function(t){null==t.prepare||t.prepare()}))},e.convertOrderToTransaction=function(){var t=a()((function*(t,e){var n=t.tokenIn,r=t.networkIn,o=t.activeAccount,i=t.sellAmount;if(i&&n){var a=new f.a(i).shiftedBy(-n.decimals).toFixed();return n.tokenIdOnNetwork?yield y.a.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:e.platformAddr,amount:a,token:n.tokenIdOnNetwork}}):yield y.a.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:e.platformAddr,amount:a}})}}));return function(e,n){return t.apply(this,arguments)}}(),e.buildQuote=function(){var t=a()((function*(t){var e=t.responses,n=t.params;if(e&&0!==e.length){var r,o=e.filter((function(t){var e;return null==(e=t.result)?void 0:e.allowanceTarget})).map((function(t){return t.result.allowanceTarget})),i=yield y.a.engine.batchTokensAllowance({networkId:n.tokenIn.networkId,accountId:n.activeAccount.id,tokenIdOnNetwork:n.tokenIn.tokenIdOnNetwork,spenders:o});return i&&i.length===o.length&&o.forEach((function(t,e){var n=i[e];r||(r={}),r[t]=n})),e.map((function(t){var e,n=t.result,o=0;"swft"===n.quoter&&(o=.002);var i,a=o+Number(null!=(e=n.percentageFee)?e:0),u={type:n.quoter,quoterlogo:n.quoterLogo,instantRate:n.instantRate,sellAmount:n.sellAmount,sellTokenAddress:n.sellTokenAddress,buyAmount:n.buyAmount,buyTokenAddress:n.buyTokenAddress,providers:n.sources,percentageFee:n.percentageFee,allowanceTarget:n.allowanceTarget,arrivalTime:n.arrivalTime,needApproved:!1,estimatedBuyAmount:Object(b.z)(n.buyAmount,1-a),minAmountOut:n.minAmountOut,protocolFees:n.protocolFees};if(u.allowanceTarget&&r){var c=r[u.allowanceTarget];void 0!==c&&n.sellAmount&&(u.needApproved=Number(n.sellAmount)>c)}return t.limit&&(i={max:t.limit.max,min:t.limit.min}),{data:u,limited:i}}))}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){var e,n=Object(b.i)(t);if(n){var r=yield y.a.serviceSwap.getCurrentUserSelectedQuoter();r&&(n.quoterType=r);var o=(yield y.a.serviceSwap.getServerEndPoint())+"/swap/v2/quote",i=null==(e=(yield this.httpClient.get(o,{params:n})).data)?void 0:e.data;if(i){var a=yield this.buildQuote({responses:[i],params:t});return null==a?void 0:a[0]}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuotes=function(){var t=a()((function*(t){var e,n=Object(b.i)(t);if(n){var r=(yield y.a.serviceSwap.getServerEndPoint())+"/swap/quote_all",o=null==(e=(yield this.httpClient.get(r,{params:n})).data)?void 0:e.data;if(o){var i=yield this.buildQuote({responses:o,params:t});if(i)return i.filter((function(t){return Boolean(t)}))}}}));return function(e){return t.apply(this,arguments)}}(),e.parseRequestId=function(t){try{var e=t.config.headers,n=null==e?void 0:e["x-onekey-request-id"];if(!n){var r=null==e?void 0:e["X-Request-By"];if("string"===typeof r)n=JSON.parse(r)["x-onekey-request-id"]}return n}catch(o){m.a.common.error("Failed to get request id with reason",o.message)}},e.buildTransaction=function(){var t=a()((function*(t,e){var n,r=Object(b.h)(e);if(r){r.quoterType=t,r.disableValidate=Boolean(e.disableValidate);var o=(yield y.a.serviceSwap.getServerEndPoint())+"/swap/build_tx",i=yield this.httpClient.post(o,r),a=this.parseRequestId(i),u=i.data;if(null!=u&&u.transaction)return"object"===typeof u.transaction?{data:L(L({},u.transaction),{},{from:e.activeAccount.address}),result:u.result,requestId:a}:{data:u.transaction,result:u.result,requestId:a};if(u.order&&null!=(n=u.result)&&n.instantRate)return{data:yield this.convertOrderToTransaction(e,u.order),result:u.result,attachment:{swftcOrderId:u.order.orderId,swftcPlatformAddr:u.order.platformAddr,swftcDepositCoinAmt:u.order.depositCoinAmt,swftcDepositCoinCode:u.order.depositCoinCode,swftcReceiveCoinAmt:u.order.receiveCoinAmt,swftcReceiveCoinCode:u.order.receiveCoinCode},requestId:a}}}));return function(e,n){return t.apply(this,arguments)}}(),e.fetchQuoteLegacy=function(){var t=a()((function*(t){for(var e=0;e<this.quoters.length;e+=1){var n=this.quoters[e];if(n.isSupported(t.networkOut,t.networkIn)){var r=yield n.fetchQuote(t);if(null!=r&&r.data)return r}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransactionLegacy=function(){var t=a()((function*(t,e){for(var n=0;n<this.quoters.length;n+=1){var r=this.quoters[n];if(r.type===t&&r.isSupported(e.networkOut,e.networkIn)){var o=yield r.buildTransaction(e);if(o)return o}}}));return function(e,n){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){if(Object(b.w)(t))return this.simple.queryTransactionProgress(t);for(var e=Object(b.q)(t),n=0;n<this.quoters.length;n+=1){var r=this.quoters[n];if(r.type===e)return r.queryTransactionProgress(t)}}));return function(e){return t.apply(this,arguments)}}(),e.getHistoryTx=function(){var t=a()((function*(t){var e=y.a.serviceHistory,n=t.accountId,r=t.networkId,o=t.nonce;if(Object(p.g)(t.networkId)!==v.I||void 0===o)return(yield e.getLocalHistory({accountId:n,networkId:r})).find((function(e){return e.decodedTx.txid===t.hash}));var i=(yield e.getTransactionsWithNonce({accountId:n,networkId:r,nonce:o})).find((function(t){return t.decodedTx.status===h.c.Confirmed}));return i||void 0}));return function(e){return t.apply(this,arguments)}}(),e.getTransactionReceipt=function(){var t=a()((function*(t,e){var n,r;if(this.transactionReceipts[t]||(this.transactionReceipts[t]={}),null!=(n=this.transactionReceipts[t])&&n[e])return null==(r=this.transactionReceipts[t])?void 0:r[e];var o=yield y.a.serviceNetwork.rpcCall(t,{method:"eth_getTransactionReceipt",params:[e]});return o?(this.transactionReceipts[t][e]=o,o):void 0}));return function(e,n){return t.apply(this,arguments)}}(),e.doQueryReceivedToken=function(){var t=a()((function*(t,e,n){if(Object(b.v)(e.networkId)){var r=yield this.getTransactionReceipt(e.networkId,t);if(r){var o,i=function(t){return"0x"+t.slice(2).replace(/^0+/,"").padStart(40,"0")};if(e.tokenIdOnNetwork){var a,u=null==(a=r.logs)?void 0:a.find((function(t){return i(t.address.toLowerCase())===e.tokenIdOnNetwork.toLowerCase()&&3===t.topics.length&&t.topics[2]&&i(t.topics[2])===n.toLowerCase()}));return null==u?void 0:u.data}var c=null==(o=r.logs)?void 0:o.find((function(t){if(2===t.topics.length){var e=t.topics[0];if("0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65"===i(e).toLowerCase())return!0}return!1}));return null==c?void 0:c.data}}}));return function(e,n,r){return t.apply(this,arguments)}}(),e.getActualReceived=function(){var t=a()((function*(t){if(t.tokens){var e=t.receivingAddress,n=t.tokens,r=n.from,o=n.to;if("swftc"===(null==t?void 0:t.quoterType)){var i=yield this.swftc.getTxOrderInfo(t);if(i)return i.receiveCoinAmt}else{var a=yield this.getHistoryTx(t),u=(null==a?void 0:a.decodedTx.txid)||t.hash;if(Object(b.v)(r.networkId)&&Object(b.v)(o.networkId)&&e)if(u&&r.networkId===o.networkId){var c=yield this.doQueryReceivedToken(u,o.token,e);if(c)return Object(b.s)(t.tokens.to.token,c).toFixed()}else if(t.destinationTransactionHash){var s=yield this.doQueryReceivedToken(t.destinationTransactionHash,o.token,e);if(s)return Object(b.s)(t.tokens.to.token,s).toFixed()}}}}));return function(e){return t.apply(this,arguments)}}(),e.getTxCompletedTime=function(){var t=a()((function*(t){if(t.tokens){var e=t.tokens.to;if(Object(b.v)(e.networkId)){var n=t.hash,r=yield this.getHistoryTx(t);null!=r&&r.decodedTx.txid&&(n=null==r?void 0:r.decodedTx.txid),t.destinationTransactionHash&&(n=t.destinationTransactionHash);var o=yield this.getTransactionReceipt(e.networkId,n);if(null!=o&&o.blockHash){var i=yield y.a.serviceNetwork.rpcCall(e.networkId,{method:"eth_getBlockByHash",params:[o.blockHash,!0]});if(null!=i&&i.timestamp)return new f.a(i.timestamp).multipliedBy(1e3).toFixed()}}}}));return function(e){return t.apply(this,arguments)}}(),e.getTxActualNetworkFee=function(){var t=a()((function*(t){if(t.tokens){var e=t.tokens.from;if(Object(b.v)(e.networkId)){var n=yield this.getHistoryTx(t),r=(null==n?void 0:n.decodedTx.txid)||t.hash,o=yield this.getTransactionReceipt(e.networkId,r);if(o){var i=yield y.a.engine.getNetwork(t.networkId);return Object(b.d)({limit:o.gasUsed,price:Object(b.j)(o.effectiveGasPrice,10**9)},i)}}}}));return function(e){return t.apply(this,arguments)}}(),e.swftModifyTxId=function(){var t=a()((function*(t,e){return this.swftc.modifyTxId(t,e)}));return function(e,n){return t.apply(this,arguments)}}(),c()(t)}();H.client=new H},4060:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(72),o=n(1),i=n(429),a=n(0),u=function(t){var e=t.value,n=t.typography,u=void 0===n?"Caption":n,c=Object(i.a)(),s=Object(o.useMemo)((function(){if(!e)return c.formatMessage({id:"content__str_mins"},{content__str_mins:1});if(e<60)return c.formatMessage({id:"content__str_seconds"},{content__str_seconds:e});var t=Math.ceil(e/60);return c.formatMessage({id:"content__str_mins"},{content__str_mins:t})}),[e,c]);return Object(a.jsxs)(r.a,{typography:u,color:"text-subdued",children:["<",s]})}},4061:function(t,e,n){"use strict";var r=n(2),o=n.n(r),i=n(3),a=n.n(i),u=n(1),c=n(43),s=n(233),d=n(3779),l=n(513);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}e.a=function(t){var e=t.tx,n=t.stopInterval,r=Object(u.useCallback)(a()((function*(){var t=yield d.a.client.queryTransactionProgress(e);if(t){var n=t.status;if(n&&"pending"!==n&&(c.a.dispatch(Object(s.p)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{confirmedTime:Date.now(),status:n}})),e.tokens)){var r=e.tokens.from,i=r.token.tokenIdOnNetwork?[r.token.tokenIdOnNetwork]:[];if(c.a.serviceToken.getAccountTokenBalance({accountId:e.accountId,networkId:r.networkId,tokenIds:i}),e.receivingAddress){var a=yield c.a.serviceAccount.getAccountByAddress({address:e.receivingAddress}),u=e.tokens.to;if(a){var l=u.token.tokenIdOnNetwork?[u.token.tokenIdOnNetwork]:[];c.a.serviceToken.getAccountTokenBalance({accountId:a.id,networkId:u.networkId,tokenIds:l})}}}var p=t.destinationTransactionHash;if(t.destinationTransactionHash&&c.a.dispatch(Object(s.p)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{destinationTransactionHash:t.destinationTransactionHash}})),"sucesss"===n){var h=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e);h.destinationTransactionHash=p;var v=yield d.a.client.getActualReceived(h);c.a.dispatch(Object(s.p)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{actualReceived:v}}));var m=yield d.a.client.getTxCompletedTime(e);m&&c.a.dispatch(Object(s.p)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{confirmedTime:Number(m)}}));var y=yield d.a.client.getTxActualNetworkFee(e);y&&c.a.dispatch(Object(s.p)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{networkFee:y}}))}}})),[]);return Object(u.useEffect)((function(){if(r(),!n){var t=Object(l.w)(e)?5e3:2e4,o=setInterval(r,t);return function(){clearInterval(o)}}}),[]),null}},4062:function(t,e,n){"use strict";var r=n(32),o=n(72),i=n(26),a=n.n(i),u=n(429),c=n(761),s=n(0);function d(t){if(!t)return"0";var e=new a.a(t);return(e=e.multipliedBy(100)).isNaN()?"0":e.toFixed()}function l(t){return!!t&&[c.a.mdex].includes(t)}e.a=function(t){var e=t.type,n=t.percentageFee,i=t.typography,a=void 0===i?"Caption":i,c=t.color,f=void 0===c?"text-subdued":c,p=Object(u.a)();return Object(s.jsx)(r.a,{children:l(e)||n&&0===Number(n)?Object(s.jsxs)(r.a,{flexDirection:"column",alignItems:"flex-end",children:[Object(s.jsx)(o.a,{typography:a,color:f,strikeThrough:!0,children:"0.3%"}),Object(s.jsx)(o.a,{typography:a,color:f,children:p.formatMessage({id:"form__free_limited_time"})})]}):Object(s.jsx)(o.a,{typography:a,color:f,children:n?d(n)+"%":" 0.3%"})})}},4063:function(t,e,n){"use strict";var r=n(130),o=n(85),i=n(72),a=n(10),u=n.n(a),c=n(1),s=n(26),d=n.n(s),l=n(513),f=n(0),p=function(t){var e=Object(l.l)(t,8),n=new d.a(e);return n.isZero()?Object(l.l)(t,16):n.isGreaterThan(1*10**9)?Object(l.l)(t,0):e};e.a=function(t){var e=t.tokenA,n=t.tokenB,a=t.rate,s=t.typography,d=void 0===s?"Body2":s,l=t.color,h=void 0===l?"text-default":l,v=Object(c.useState)(!1),m=u()(v,2),y=m[0],b=m[1];if(!e||!n||!a)return Object(f.jsx)(i.a,{typography:d,color:h,children:"---"});var O=e.symbol,g=n.symbol,w="";return w=y?"1 "+g+" \u2248 "+p(1/Number(a))+" "+O:"1 "+O+" \u2248 "+p(a)+" "+g,Object(f.jsxs)(r.a,{flexDirection:"row",alignItems:"center",onPress:function(){return b((function(t){return!t}))},children:[Object(f.jsx)(i.a,{typography:d,color:h,textAlign:"right",mr:"1",selectable:!1,children:w}),Object(f.jsx)(o.a,{size:16,name:"ArrowsRightLeftMini",color:"icon-subdued"})]})}}}]);