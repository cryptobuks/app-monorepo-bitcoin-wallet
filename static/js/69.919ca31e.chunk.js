(this.webpackJsonp=this.webpackJsonp||[]).push([[69,845],{3027:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalNavigatorRoutes",(function(){return f}));var r=n(2),o=n.n(r),c=n(100),i=n(1),a=n(292),s=n(463),l=n(145),u=n(760),d=n(456),b=n(0);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f,O=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3162))})),p=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3125))})),m=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3136))})),h=Object(s.a)((function(){return n.e(107).then(n.bind(null,3229))})),v=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3194))})),x=Object(s.a)((function(){return n.e(93).then(n.bind(null,3177))})),g=Object(s.a)((function(){return Promise.all([n.e(43),n.e(55)]).then(n.bind(null,3244))})),y=Object(s.a)((function(){return n.e(104).then(n.bind(null,3197))})),w=Object(s.a)((function(){return n.e(65).then(n.bind(null,3115))})),k=Object(s.a)((function(){return Promise.all([n.e(2),n.e(4),n.e(96)]).then(n.bind(null,3216))})),I=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3196))})),P=Object(s.a)((function(){return n.e(6).then(n.bind(null,3199))})),S=Object(s.a)((function(){return Promise.resolve().then(n.bind(null,1158))})),_=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(75)]).then(n.bind(null,3241))})),C=Object(s.a)((function(){return n.e(843).then(n.bind(null,3137))})),T=Object(s.a)((function(){return n.e(105).then(n.bind(null,3245))})),D=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3193))})),M=Object(s.a)((function(){return Promise.all([n.e(1),n.e(37)]).then(n.bind(null,3178))})),A=Object(s.a)((function(){return Promise.all([n.e(1),n.e(86)]).then(n.bind(null,3127))})),L=Object(s.a)((function(){return Promise.all([n.e(3),n.e(94)]).then(n.bind(null,3195))})),E=Object(s.a)((function(){return Promise.all([n.e(0),n.e(39),n.e(47)]).then(n.bind(null,3240))})),R=Object(s.a)((function(){return n.e(844).then(n.bind(null,3198))})),H=Object(s.a)((function(){return n.e(98).then(n.bind(null,3231))})),B=Object(s.a)((function(){return n.e(41).then(n.bind(null,3128))})),F=Object(s.a)((function(){return n.e(101).then(n.bind(null,3247))})),N=Object(s.a)((function(){return n.e(103).then(n.bind(null,3250))})),z=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(71)]).then(n.bind(null,3238))})),V=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3192))})),W=Object(s.a)((function(){return n.e(76).then(n.bind(null,3246))})),U=Object(s.a)((function(){return Promise.resolve().then(n.bind(null,955))})),G=Object(s.a)((function(){return Promise.all([n.e(5),n.e(15),n.e(48)]).then(n.bind(null,3237))})),K=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3129))})),q=Object(s.a)((function(){return Promise.resolve().then(n.bind(null,1159))})),X=Object(s.a)((function(){return n.e(102).then(n.bind(null,3234))})),J=Object(s.a)((function(){return n.e(88).then(n.bind(null,3243))})),Y=Object(s.a)((function(){return Promise.all([n.e(0),n.e(64)]).then(n.bind(null,3251))})),Q=Object(s.a)((function(){return n.e(42).then(n.bind(null,3242))})),Z=Object(s.a)((function(){return n.e(81).then(n.bind(null,3248))}));!function(e){e.ReceiveTokenNavigator="ReceiveTokenNavigator",e.SendNavigator="SendNavigator"}(f||(f={}));var $=[{name:l.b.CreateAccount,component:m},{name:l.b.RecoverAccount,component:h},{name:l.b.Receive,component:B},{name:l.b.Send,component:V},{name:l.b.ScanQrcode,component:z},{name:l.b.BackupWallet,component:O},{name:l.b.TransactionDetail,component:K},{name:l.b.ManageToken,component:L},{name:l.b.SubmitRequest,component:U},{name:l.b.HistoryRequest,component:_},{name:l.b.Password,component:R},{name:l.b.OnekeyLiteReset,component:P},{name:l.b.OnekeyLiteChangePinInputPin,component:I},{name:l.b.DappConnectionModal,component:x},{name:l.b.Collectibles,component:p},{name:l.b.CreateWallet,component:v},{name:l.b.ManagerWallet,component:A},{name:l.b.ManagerAccount,component:M},{name:l.b.EnableLocalAuthentication,component:y},{name:l.b.ManageNetwork,component:D},{name:l.b.OnekeyHardware,component:k},{name:l.b.HardwareUpdate,component:S},{name:l.b.Discover,component:g},{name:l.b.Swap,component:G},{name:l.b.UpdateFeature,component:q},{name:l.b.FiatPay,component:w},{name:l.b.AddressBook,component:J},{name:l.b.ImportBackupPassword,component:C},{name:l.b.Staking,component:W},{name:l.b.ManageConnectedSites,component:T},{name:l.b.PushNotification,component:H},{name:l.b.Webview,component:X},{name:l.b.Revoke,component:F},{name:l.b.NFTMarket,component:E},{name:l.b.Overview,component:Y},{name:l.b.CurrencySelect,component:Z},{name:l.b.BulkSender,component:N},{name:l.b.Market,component:Q}],ee=Object(d.a)();t.default=Object(i.memo)((function(){var e=Object(c.a)(),t=Object(i.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1,presentation:"modal"},Object(u.a)({isVerticalLayout:e}))}),[e]);return Object(b.jsx)(a.a,{children:Object(b.jsx)(ee.Navigator,{screenOptions:t,children:$.map((function(e){return Object(b.jsx)(ee.Screen,{name:e.name,component:e.component},e.name)}))})})}))},3079:function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return p}));var r=n(10),o=n.n(r),c=n(1),i=n(178),a=n(14),s=n(43);function l(){var e=Object(c.useState)({}),t=o()(e,2),n=t[0],r=t[1],a=function(){var e=Object(i.h)((function(e){return e.discover.history}));return Object(c.useMemo)((function(){var t={};return Object.values(e).forEach((function(e){var n=e.webSite;if(n){var r=n.url;if(r){var o=new URL(r).host;t[o]=n}}})),t}),[e])}(),l=Object(i.h)((function(e){return e.discover.userBrowserHistories})),u=Object(c.useMemo)((function(){return l?l.filter((function(e){return e.dappId})).map((function(e){return e.dappId})):[]}),[l]);return Object(c.useEffect)((function(){u&&u.length&&s.a.serviceDiscover.getDappsByIds(u).then((function(e){r(e.reduce((function(e,t){return e[t._id]=t,e}),{}))}))}),[u]),Object(c.useMemo)((function(){return l?l.map((function(e){var t,r,o=e.dappId,c=e.url;if(o&&n[o]){var i=n[o];return{id:i._id,dapp:i}}var s=new URL(c).host,l=a[s];return{id:c,webSite:{url:c,title:null!=(t=e.title)?t:null==l?void 0:l.title,favicon:null!=(r=e.logoUrl)?r:l.favicon}}})):[]}),[l,n,a])}function u(){var e=Object(c.useState)([]),t=o()(e,2),n=t[0],r=t[1],a=Object(i.h)((function(e){return e.discover.dappHistory})),l=Object(c.useMemo)((function(){return a?Object.entries(a).sort((function(e,t){return t[1].timestamp-e[1].timestamp})).map((function(e){return e[0]})).filter((function(e){return!Number.isNaN(e)})):[]}),[a]);return Object(c.useEffect)((function(){l&&s.a.serviceDiscover.getDappsByIds(l).then((function(e){r(e.map((function(e){return{id:e._id,dapp:e}})))}))}),[l]),n}function d(){var e=Object(i.h)((function(e){return e.discover.bookmarks}));return Object(c.useMemo)((function(){return e?e.map((function(e){return{id:e.url,webSite:{title:e.title,favicon:e.icon,url:e.url}}})):[]}),[e])}function b(){var e=Object(i.h)((function(e){return e.discover.home}));return Object(c.useMemo)((function(){return e?e.tagDapps.filter((function(e){return e.items.length>0})):[]}),[e])}function j(e){var t=Object(c.useState)([]),n=o()(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){e&&s.a.serviceDiscover.getCategoryDapps(e).then(i)}),[e]),r}function f(e){var t=Object(c.useState)([]),n=o()(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){e&&s.a.serviceDiscover.getTagDapps(e).then(i)}),[e]),r}function O(){var e=Object(i.h)((function(e){return e.discover.home}));return Object(c.useMemo)((function(){return e?e.categories:[]}),[e])}function p(){var e=a.a.isNativeIOS||a.a.isMas,t=Object(i.h)((function(e){return e.discover.showBookmark})),n=Object(i.h)((function(e){var t;return null==(t=e.settings.devMode)?void 0:t.hideDiscoverContent}));return Object(c.useMemo)((function(){return!n&&(!e||t)}),[t,e,n])}},3232:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.StakingAmount="StakingAmount",e.StakingETHNotes="StakingETHNotes",e.StakedETHOnKele="StakedETHOnKele"}(r||(r={}))},3236:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(1152),o=n(0),c=["1D","1W","1M","1Y","All"],i=["1","7","30","365","max"],a=["content__past_24_hours","content__past_7_days","content__past_month","content__past_year","content__since_str"],s=function(e){var t=e.selectedIndex,n=e.onTimeChange,i=e.enabled;return Object(o.jsx)(r.a,{enabled:i,style:{marginTop:5},values:c,onValueChange:n,selectedIndex:t})};s.displayName="TimeControl",t.d=s},3304:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(3),o=n.n(r),c=n(10),i=n.n(c),a=n(43);function s(e,t,n,r){var o=e(t,{height:r,layout:{background:{color:"transparent"}},crosshair:{vertLine:{visible:!1},horzLine:{visible:!1}},grid:{vertLines:{visible:!1},horzLines:{visible:!1}},timeScale:{visible:!1,fixLeftEdge:!0,fixRightEdge:!0,lockVisibleTimeRangeOnResize:!0},rightPriceScale:{visible:!1},handleScale:{pinch:!1,mouseWheel:!1}}),c=function(){o.applyOptions({width:t.clientWidth})};return o.subscribeCrosshairMove((function(e){var t=e.time,r=e.seriesPrices;n({time:t,price:r.values().next().value})})),o.timeScale().fitContent(),window.addEventListener("resize",c),window._onekey_chart=o,{chart:o,handleResize:c}}function l(e){var t=e.lineColor,n=e.topColor,r=e.bottomColor,o=e.data,c=o.map((function(e){var t=i()(e,2);return{time:t[0],value:t[1]}})),a=window._onekey_chart;if(!a._onekey_series){var s=a.addAreaSeries({lineColor:t,topColor:n,bottomColor:r,lineWidth:2,crosshairMarkerBorderColor:"#fff",crosshairMarkerRadius:5});return s.setData(c),void(a._onekey_series=s)}var l=a._onekey_series;l.applyOptions({lineColor:t,topColor:n,bottomColor:r}),l.setData(c),o.length>2&&a.timeScale().setVisibleLogicalRange({from:.4,to:o.length-1.4})}var u=function(){var e=o()((function*(e){var t=e.networkId,n=e.contract,r=void 0===n?"main":n,o=e.vs_currency,c=void 0===o?"usd":o,i=e.points,s=e.days;return(yield a.a.engine.getChart({networkId:t,addresses:[r],days:s,vs_currency:c,points:i}))[r]}));return function(t){return e.apply(this,arguments)}}()},3372:function(e,t,n){e.exports=n.p+"static/media/kele_pool.8ff3dce4.png"},3373:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(178);function o(e,t){return Object(r.h)((function(n){var r,o;return null==(r=n.staking.keleETH2StakingState)||null==(o=r[null!=t?t:""])?void 0:o[null!=e?e:""]}))}function c(e,t){return Object(r.h)((function(n){var r,o;return null==(r=n.staking.stakingActivities)||null==(o=r[t])?void 0:o[e]}))}},3376:function(e,t,n){"use strict";var r=n(2),o=n.n(r),c=n(4),i=n.n(c),a=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){return Object(a.jsxs)(i.a,l(l({viewBox:"0 0 358 160",fill:"currentColor"},e),{},{children:[Object(a.jsx)(c.Path,{d:"M340.11 16.0064C347.852 16.0064 350.258 0 358 0V160H0V89.463C7.74194 89.463 15.484 95.038 23.2259 95.038C30.9679 95.038 38.7098 89.845 46.4518 88.9552C54.1937 88.0654 61.9358 88.5103 69.6778 87.6205C77.4197 86.7306 85.1615 74.6404 92.9034 71.9121C100.645 69.1838 108.387 100.56 116.129 97.8317C123.871 95.1034 131.613 47.4332 139.355 47.4332C147.097 47.4332 155.506 58.5234 163.248 58.5234C170.99 58.5234 178.065 43.7073 185.807 42.0845C193.549 40.4617 203.425 61.243 211.167 60.5171C218.909 59.7912 235.973 33.7274 243.715 33.7274C250.6 34.5138 250.6 44.5178 273.512 49.0196C281.254 49.0196 285.916 22.966 293.658 19.5183C301.4 16.0706 311.841 31.431 319.583 27.511C327.325 23.591 332.368 16.0064 340.11 16.0064Z",fill:"url(#paint0_linear_5149_43265)"}),Object(a.jsx)(c.Defs,{children:Object(a.jsxs)(c.LinearGradient,{id:"paint0_linear_5149_43265",x1:"179",y1:"0",x2:"179",y2:"160",gradientUnits:"userSpaceOnUse",children:[Object(a.jsx)(c.Stop,{stopColor:"#3D3D4D"}),Object(a.jsx)(c.Stop,{offset:"1",stopColor:"#1D1D2A",stopOpacity:"0"})]})})]}))}},3377:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),o=n(429),c=n(3081),i=n(3236),a=function(e,t){var n=Object(o.a)(),a=Object(c.a)().formatDate;return Object(r.useMemo)((function(){var r;return e===i.b.length-1?n.formatMessage({id:i.b[e]},{0:t?null==(r=a(new Date(t)).split(","))?void 0:r[0]:""}):n.formatMessage({id:i.b[e]})}),[a,n,e,t])}},3378:function(e,t,n){"use strict";var r=n(32),o=n(289),c=n(100),i=n(10),a=n.n(i),s=n(1),l=n(14),u=n(3081),d=n(3379),b=n(3376),j=n(130),f=n(85),O=n(41),p=n(429),m=n(3073),h=n(1151),v=n(0),x=function(e){var t,n=e.price,o=e.basePrice,c=e.time,i=e.onPriceSubscribe,a=Object(p.a)(),s=a.formatMessage({id:"content__price_uppercase"});if(null!==n){var l=Object(h.a)({basePrice:o,price:n}),u=l.gainText,d=l.percentageGain,b=l.gainTextColor;t=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.h.Body2Strong,{color:b,children:[u,"(",d,")"]}),Object(v.jsx)(O.h.Body2Strong,{color:"text-subdued",ml:"8px",children:c})]})}else t=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{name:"ExclamationTriangleMini",size:16}),Object(v.jsx)(O.h.Body2Strong,{color:"text-subdued",ml:"8px",children:a.formatMessage({id:"content__data_for_this_token_is_not_included_yet"})})]});return Object(v.jsxs)(r.a,{flexDirection:"column",children:[Object(v.jsx)(O.h.Subheading,{color:"text-subdued",children:s}),Object(v.jsxs)(j.a,{my:2,disabled:Boolean(!i),flexDirection:"row",alignItems:"center",onPress:function(){i&&i(n||0)},children:[Object(v.jsx)(O.h.DisplayXLarge,{mr:2,children:Object(v.jsx)(m.f,{value:n||0})}),i?Object(v.jsx)(f.a,{name:"BellSolid",size:20}):null]}),Object(v.jsx)(r.a,{flexDirection:"row",alignItems:"center",children:t})]})},g=function(e){var t,n=e.data,i=e.isFetching,j=e.timeDefaultLabel,f=e.children,O=e.onPriceSubscribe,p=Object(u.a)().formatDate,m=Object(s.useState)(),h=a()(m,2),g=h[0],y=h[1],w=Object(s.useState)(""),k=a()(w,2),I=k[0],P=k[1],S=Object(c.a)(),_=null!=n&&n.length?n[0][1]:0,C=null!=n&&n.length?n[n.length-1][1]:0;t=n?"undefined"===g||void 0===g?C:"string"===typeof g?+g:g:null;var T=Object(s.useCallback)((function(e){var t;t=e.time instanceof Date?p(e.time):"number"===typeof e.time?p(new Date(e.time)):"string"===typeof e.time?p(new Date(+e.time)):"",P(t),y(e.price)}),[p]),D=Object(v.jsx)(x,{onPriceSubscribe:O,price:t,time:I||j,basePrice:_}),M=n?Object(v.jsx)(d.a,{isFetching:i,height:S?190:240,data:n,onHover:T}):Object(v.jsx)(b.a,{width:"100%",height:"100%",preserveAspectRatio:"none"}),A=n&&0===n.length?Object(v.jsx)(o.b,{}):M;return S?Object(v.jsxs)(v.Fragment,{children:[D,Object(v.jsx)(r.a,{h:"190px",mt:"25px",justifyContent:"center",alignItems:"center",children:l.a.isNative?M:A}),f]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(r.a,{flexDirection:"row",justifyContent:"space-between",children:[D,Object(v.jsx)(r.a,{w:"280px",children:f})]}),Object(v.jsx)(r.a,{h:"240px",mt:"30px",justifyContent:"center",alignItems:"center",children:A})]})};g.displayName="ChartWithLabel";t.a=g},3379:function(e,t,n){"use strict";var r=n(124),o=n(1),c=n(3792),i=n(3304),a=n(0),s=function(e){var t=e.data,n=e.onHover,r=e.lineColor,s=e.topColor,l=e.bottomColor,u=e.height,d=Object(o.useRef)(null);return Object(o.useEffect)((function(){if(d.current){var e=Object(i.a)(c.a,d.current,n,u),t=e.chart,r=e.handleResize;return function(){window.removeEventListener("resize",r),t.remove()}}}),[]),Object(o.useEffect)((function(){Object(i.c)({bottomColor:l,topColor:s,lineColor:r,data:t})}),[l,s,t,r]),Object(a.jsx)("div",{style:{width:"100%",height:u},ref:d})};s.displayName="ChartViewAdapter";var l=s,u=function(e){var t=e.data,n=e.onHover,o=e.height,c=e.isFetching,i=Object(r.a)("interactive-default"),s=Object(r.a)("action-primary-focus");return Object(a.jsx)(l,{isFetching:c,height:o,data:t,lineColor:i,topColor:s,bottomColor:"#00FF1900",onHover:n})};u.displayName="ChartView";t.a=Object(o.memo)(u)},3555:function(e,t,n){"use strict";n(3136);var r=n(3128);n.d(t,"a",(function(){return r.ReceiveTokenRoutes}));n(3129)},3561:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ie}));var r=n(1153),o=n(3),c=n.n(o),i=n(10),a=n.n(i),s=n(2),l=n.n(s),u=n(457),d=n(460),b=n(32),j=n(1146),f=n(41),O=n(1),p=n(57),m=n(429),h=n(1189),v=n(3141),x=n(135),g=n(56),y=n(11),w=n(20),k=n(43),I=n(178),P=n(3081),S=n(39),_=n(769);var C=n(47),T=n(782),D=n(130),M=n(427),A=n(259),L=n.n(A),E=n(240),R=n(72),H=n(3420),B=n(756),F=n(14),N=n(3110),z=n(31),V=n(179),W=n(797),U=n.n(W),G=n(146),K=n.n(G),q=n(103),X=n(26),J=n.n(X),Y=n(145),Q=n(0);function Z(e){return $.apply(this,arguments)}function $(){return($=c()((function*(e){var t,n,r,o,c=e.historyTx,i=e.actionType,a=e.navigation,s=null!=(t=null==(n=c.decodedTx)?void 0:n.encodedTx)?t:{},l=null==c||null==(r=c.decodedTx)?void 0:r.encodedTxEncrypted;if(l)try{o=JSON.parse(yield k.a.servicePassword.decryptByInstanceId(l))}catch(p){o={from:"-",to:"-",value:"-",data:"-"}}var u=c.decodedTx,d=u.nonce,b=u.accountId,j=u.networkId;if(!(K()(d)||!U()(d)||d<0)){var f={from:s.from,to:s.to,value:s.value,data:s.data,nonce:d,gas:s.gas,gasLimit:s.gasLimit,gasPrice:s.gasPrice,maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas};if("cancel"===i&&(f.to=f.from,f.value="0",f.data="0x"),"speedUp"===i&&o&&(o.from!==f.from||o.to!==f.to||o.value!==f.value||o.data!==f.data||!new J.a(f.nonce||"0").eq(o.nonce||"0")))return V.a.show({title:"Speedup failed. History transaction data not matched"},{type:"error"}),void w.a.sendTx.info("Speedup failed. History transaction data not matched",{encodedTxOrigin:o,encodedTxEvm:f});var O={accountId:b,networkId:j,actionType:i,resendActionInfo:{type:i,replaceHistoryId:c.id},encodedTx:f,feeInfoEditable:!0,feeInfoUseFeeInTx:!0,ignoreFetchFeeCalling:!0};a.navigate(Y.c.Modal,{screen:Y.b.Send,params:{screen:N.f.SendConfirm,params:L()(O)}})}}))).apply(this,arguments)}function ee(e){var t=e.historyTx,n=Object(I.o)(),r=Object(m.a)(),o="cancel"===t.replacedType;return Object(Q.jsxs)(Q.Fragment,{children:[o?null:Object(Q.jsx)(q.a,{size:"sm",ml:2,onPress:function(){Z({historyTx:t,actionType:"cancel",navigation:n})},children:r.formatMessage({id:"action__cancel"})}),Object(Q.jsx)(q.a,{type:"primary",size:"sm",ml:2,onPress:function(){Z(o?{historyTx:t,actionType:"cancel",navigation:n}:{historyTx:t,actionType:"speedUp",navigation:n})},children:r.formatMessage({id:"action__speed_up"})})]})}var te=n(3541),ne=n(3568),re=n(3334);function oe(e){var t,n,r,o=e.historyTx,c=e.isFirst,i=e.isLast,a=o.decodedTx,s=a.status,l=Object(m.a)(),u=Object(I.f)().network,d=Object(B.a)().isLight,j=Object(I.o)(),f=Object(re.c)({decodedTx:a}),O=s!==g.c.Pending&&Object(Q.jsx)(H.a,{typography:"Body2",color:"text-subdued",text:null!=(t=a.txid)?t:"",short:!0,prefix:"Hash: "}),p=s!==g.c.Confirmed&&Object(Q.jsx)(R.a,{typography:"Body2",color:f.textColor,children:l.formatMessage({id:f.text})}),h=null;"cancel"===o.replacedType&&(h=Object(Q.jsx)(R.a,{typography:"Body2",color:"text-subdued",children:"TxCancel"})),"speedUp"===o.replacedType&&(h=Object(Q.jsx)(R.a,{typography:"Body2",color:"text-subdued",children:"TxSpeedUp"}));var v=null!=u&&null!=(n=u.settings)&&n.txCanBeReplaced?Object(Q.jsx)(ee,{historyTx:o}):void 0,x=Object(Q.jsx)(te.a,{typography:"Body2",color:"text-subdued",isShort:!0,timestamp:null!=(r=a.updatedAt)?r:a.createdAt});F.a.isDev&&Object(Q.jsxs)(E.a,{space:2,mt:2,children:[O,p,h,Object(Q.jsx)(b.a,{flex:1}),x]});return Object(Q.jsx)(D.a.Item,{borderTopRadius:c?12:0,borderBottomRadius:i?12:0,borderWidth:d?1:0,borderBottomWidth:i&&d?1:0,borderTopWidth:c&&d?1:0,borderColor:"border-subdued",px:{base:"4",lg:"6"},py:"16px",onPress:function(){j.navigate(z.h.Modal,{screen:z.e.TransactionDetail,params:{screen:N.h.HistoryDetailModal,params:L()({decodedTx:a,historyTx:o})}})},children:Object(Q.jsxs)(M.a,{children:[Object(Q.jsx)(ne.a,{historyTx:o,decodedTx:a,transformType:"T0",space:"31px",showDivider:!0,showConnectionLine:!0}),a.status===g.c.Pending?Object(Q.jsxs)(E.a,{space:2,mt:2,children:[Object(Q.jsx)(b.a,{flex:1}),v]}):null]})})}var ce=n(1188),ie=Object(O.createContext)(null);function ae(e){var t=e.children,n=e.isLoading,r=void 0!==n&&n,o=e.isTab,c=e.headerView,i=e.refresh,s=Object(O.useState)({isLoading:r,isTab:o,headerView:c,refresh:i}),l=a()(s,2),u=l[0],d=l[1],b=Object(O.useMemo)((function(){return{context:u,setContext:d}}),[u]);return Object(Q.jsx)(ie.Provider,{value:b,children:t})}function se(){return Object(O.useContext)(ie)}var le=n(755);function ue(e){var t,n=e.isLoading,r=e.refresh,o=Object(m.a)(),c=se();return Object(Q.jsx)(b.a,{py:4,flexDirection:"column",alignItems:"center",children:Object(Q.jsx)(le.a,{emoji:"\ud83d\udd50",title:o.formatMessage({id:"transaction__history_empty_title"}),subTitle:o.formatMessage({id:"transaction__history_empty_desc"}),actionTitle:o.formatMessage({id:"action__refresh"}),handleAction:null!=(t=null==c?void 0:c.context.refresh)?t:r,isLoading:Boolean((null==c?void 0:c.context.isLoading)||n)})})}var de=n(199),be=n(1154),je=n(1149),fe=n(80),Oe=n(392);function pe(e){var t,n=e.closeOverlay,r=Object(m.a)(),o=null==(t=Object(I.h)((function(e){return e.settings.hideScamHistory})))||t;return Object(Q.jsx)(be.a,{modalLizeProps:{tapGestureEnabled:!1},title:r.formatMessage({id:"title__settings"}),closeOverlay:n,children:Object(Q.jsxs)(b.a,{pb:4,pr:2,children:[Object(Q.jsx)(R.a,{typography:"Subheading",color:"text-subdued",children:r.formatMessage({id:"form__anti_scam"})}),Object(Q.jsx)(R.a,{typography:"Body1Strong",mt:3,children:r.formatMessage({id:"form__hide_0_amount_transfers"})}),Object(Q.jsxs)(E.a,{mt:1,alignItems:"flex-start",space:3,children:[Object(Q.jsx)(R.a,{typography:"Body2",color:"text-subdued",flex:1,children:r.formatMessage({id:"form__hide_0_amount_transfers_desc"})}),Object(Q.jsx)(je.a,{labelType:"false",isChecked:o,onToggle:function(){return k.a.dispatch(Object(fe.x)(!o))}})]})]})})}var me=function(){Object(Oe.a)((function(e){return Object(Q.jsx)(pe,{closeOverlay:e})}))};function he(e){var t,n=e.isLoading,r=e.refresh,o=e.networkId,c=Object(m.a)(),i=Object(I.q)({networkId:o}).network;return Object(Q.jsxs)(b.a,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",pb:3,children:[Object(Q.jsx)(f.h.Heading,{children:c.formatMessage({id:"transaction__history"})}),Object(Q.jsxs)(b.a,{flexDirection:"row",children:[Object(Q.jsx)(de.a,{onPress:function(){null==r||r()},isLoading:Boolean(n),p:2,size:"sm",name:"ArrowPathMini",type:"plain",circle:!0}),(null==i||null==(t=i.settings)?void 0:t.supportFilterScam)&&Object(Q.jsx)(de.a,{onPress:me,ml:3,p:2,size:"sm",name:"Cog8ToothMini",type:"plain",circle:!0})]})]})}function ve(e){e.isEmpty;var t,n,r=e.refresh,o=e.networkId,c=se();return Object(Q.jsxs)(b.a,{children:[null==c||null==(t=c.context)?void 0:t.headerView,Object(Q.jsx)(he,{networkId:o,refresh:null!=(n=null==c?void 0:c.context.refresh)?n:r,isLoading:null==c?void 0:c.context.isLoading})]},"header")}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e){var t=e.title,n=e.titleKey,r=e.data,o=Object(m.a)(),c=t||o.formatMessage({id:n})||"";return Object(Q.jsx)(b.a,{py:2,flexDirection:"row",children:Object(Q.jsxs)(b.a,{flexDirection:"row",alignItems:"center",children:[Object(Q.jsx)(f.h.Subheading,{color:"text-subdued",children:c}),r[0]&&r[0].decodedTx.status===g.c.Pending&&Object(Q.jsx)(b.a,{ml:3,children:Object(Q.jsx)(j.a,{title:r.length.toString(),type:"default",size:"sm"})})]})},"section-header")}var we=Object(O.memo)((function(e){var t=e.accountId,n=e.networkId,r=e.data,o=e.SectionListComponent,i=Object(d.a)().size,s=Object(P.a)(),l=Object(O.useMemo)((function(){return["NORMAL","LARGE"].includes(i)?32:16}),[i]),j=function(e){var t=e.accountId,n=e.networkId,r=e.history,o=Object(O.useState)([]),i=a()(o,2),s=i[0],l=i[1],u=Object(S.e)((function(e){return e.settings.hideScamHistory})),d=Object(_.a)({networkId:n}).network;return Object(O.useEffect)((function(){var e;u&&t&&d&&null!=d&&null!=(e=d.settings)&&e.supportFilterScam?c()((function*(){for(var e=[],n=0;n<r.length;n+=1){(yield k.a.serviceHistory.checkIsScamHistoryTx({accountId:t,networkId:d.id,historyTx:r[n]}))||e.push(r[n])}l(e)}))():l(r)}),[t,d,r,u]),{filteredHistory:s}}({accountId:t,networkId:n,history:r}).filteredHistory,f=Object(O.useMemo)((function(){return function(e){var t,n=e.items,r=e.formatDate,o={titleKey:"transaction__pending",data:[]},c=[];return n.forEach((function(e){if(e.decodedTx.status===g.c.Pending){var n;null==(n=o)||n.data.push(e)}else{var i=r(e.decodedTx.updatedAt||e.decodedTx.createdAt||0);t&&t.title===i||(t&&c.push(t),t={title:i,data:[]}),t.data.push(e)}})),t&&c.push(t),o.data.length||(o=void 0),o?[o].concat(c).filter(Boolean):[].concat(c).filter(Boolean)}({items:j,formatDate:function(e){return s.formatDate(new Date(e),{hideTheYear:!0,hideTimeForever:!0})}})}),[s,j]),p=!f||!f.length,m=Object(O.useCallback)((function(e){var t,n=e.item,r=e.index,o=e.section;return Object(Q.jsx)(oe,{historyTx:n,isFirst:0===r,isLast:r===(null==o||null==(t=o.data)?void 0:t.length)-1})}),[]),h=Object(O.useCallback)((function(e){var t=e.section,n=t.title,r=t.titleKey,o=t.data;return Object(Q.jsx)(ye,{title:n,titleKey:r,data:o})}),[]),v=Object(O.useCallback)((function(){return Object(Q.jsx)(u.a,{},"separator")}),[]),x={renderItem:m,renderSectionHeader:h,contentContainerStyle:{paddingHorizontal:l,marginTop:16},sections:f,ListHeaderComponent:Object(Q.jsx)(ve,{isEmpty:p,networkId:n},"header"),ListEmptyComponent:Object(Q.jsx)(ue,{},"empty"),ListFooterComponent:Object(Q.jsx)(b.a,{h:"20px"},"footer"),ItemSeparatorComponent:v,keyExtractor:function(e,t){return e.id||t.toString(10)},showsVerticalScrollIndicator:!1,stickySectionHeadersEnabled:!1};return Object(Q.jsx)(o,ge({},x))}));function ke(e){var t=e.accountId,n=e.networkId,o=e.tokenId,i=e.headerView,s=e.isHomeTab,l=Object(O.useState)([]),u=a()(l,2),d=u[0],b=u[1],j=se(),f=Object(T.e)(ce.c.History),m=k.a.serviceHistory,g=Object(I.h)((function(e){return e.refresher.refreshHistoryTs})),P=Object(O.useCallback)(c()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.refresh,c=void 0===r||r;if(!t||!n)return Promise.resolve([]);if(c){try{yield m.refreshHistory({networkId:n,accountId:t,tokenIdOnNetwork:o})}catch(a){w.a.common.error(a)}yield Object(C.g)(1e3)}var i=yield m.getLocalHistory({networkId:n,accountId:t,tokenIdOnNetwork:""===o?o:o||void 0,limit:y.y.DISPLAY_TX_LIMIT});return i})),[t,n,m,o]),S=Object(O.useCallback)((function(){return P({refresh:!1})}),[P]),_=Object(p.t)(),D=Object(O.useMemo)((function(){return!(!t||!n)&&(!!Object(x.c)(t,n)&&(!!_&&(!s||f)))}),[t,f,_,s,n]),M=s?"fetchHistoryTx-homeTab":"fetchHistoryTx",A=Object(h.b)(M,P,{refreshInterval:3e4,revalidateOnMount:!1,revalidateOnFocus:!1,shouldRetryOnError:!1,isPaused:function(){return!D},onSuccess:function(e){(function(e){var t=e.oldTxList,n=e.newTxList;if(t.length!==n.length)return!0;for(var r=0;r<5;r+=1){var o=t[r],c=n[r];if(!c&&!o)return!1;if(!c||!o)return!0;if(c.id!==o.id||c.decodedTx.createdAt!==o.decodedTx.createdAt||c.decodedTx.updatedAt!==o.decodedTx.updatedAt||c.decodedTx.status!==o.decodedTx.status||c.decodedTx.totalFeeInNative!==o.decodedTx.totalFeeInNative)return!0}return!1})({oldTxList:d||[],newTxList:e||[]})&&b(e)}}),L=A.mutate,E=A.isValidating,R=Object(O.useCallback)((function(){return m.refreshHistoryUi()}),[m]);Object(O.useEffect)((function(){null==j||j.setContext((function(e){return e.isLoading!==E||e.refresh!==R||e.headerView!==i?ge(ge({},e),{},{refresh:R,isLoading:E,headerView:i}):e}))}),[R,E,j,i]);var H=Object(O.useMemo)((function(){var e=d[0];return e&&(null==e?void 0:e.decodedTx.networkId)===n&&(null==e?void 0:e.decodedTx.accountId)===t}),[t,d,n]);if(Object(O.useEffect)((function(){c()((function*(){if(D&&!H){var e=yield S();b(e||[])}}))()}),[t,n,S,D,H]),Object(O.useEffect)((function(){D&&L()}),[g,t,n,L,D]),!t||!n)return null;var B=s?v.Tabs.SectionList:r.a;return Object(Q.jsx)(we,{accountId:t,networkId:n,data:d,SectionListComponent:B})}function Ie(e){var t=e.headerView,n=e.isHomeTab;return Object(Q.jsx)(ae,{headerView:t,isTab:n,children:Object(Q.jsx)(ke,ge({},e))})}},4101:function(e,t,n){"use strict";n.r(t);var r=n(32),o=n(459),c=n(85),i=n(100),a=n(1),s=n(57),l=n(429),u=n(566),d=n(178),b=n(3088),j=n(391),f=n(145),O=n(462),p=n(3),m=n.n(p),h=n(10),v=n.n(h),x=n(14),g=n(3304),y=n(3378),w=n(3377),k=n(3236),I=n(0),P=function(e){var t,n,o,c,s,l=e.contract,u=e.networkId,j=e.style,f=Object(a.useState)(!0),O=v()(f,2),p=O[0],h=O[1],P=Object(a.useState)(0),S=v()(P,2),_=S[0],C=S[1],T=Object(b.b)({networkId:u,contractAdress:l}),D=Object(a.useRef)([]),M=Object(w.a)(_,null==(t=D.current)||null==(n=t[_])||null==(o=n[0])?void 0:o[0]),A=Object(d.u)().selectedFiatMoneySymbol,L=void 0===T||null===T;Object(i.a)()?s="100":x.a.isNativeIOSPad&&(s="300");var E=Object(a.useCallback)(function(){var e=m()((function*(e){var t=k.a.indexOf(e);if(!D.current[t]){h(!0);var n=yield Object(g.b)({contract:l,networkId:u,days:k.c[t],points:s,vs_currency:A});null!=n&&n.length&&(D.current[t]=n)}C(t),h(!1)}));return function(t){return e.apply(this,arguments)}}(),[l,u,s,A]);return Object(a.useEffect)((function(){E(k.a[0])}),[E]),Object(I.jsx)(r.a,{style:j,children:Object(I.jsx)(y.a,{isFetching:p,timeDefaultLabel:M,data:L?null:(null==(c=D.current)?void 0:c[_])||[],children:Object(I.jsx)(k.d,{enabled:!p&&!L,selectedIndex:_,onTimeChange:E})})})};P.displayName="PriceChart";var S=P,_=n(1195),C=n(130),T=n(289),D=n(277),M=n(41),A=n(115),L=n(756),E=n(2),R=n.n(E),H=n(103),B=n(308),F=n.n(B),N=n(3372),z=n.n(N),V=n(43),W=n(3373),U=n(3232);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=Object.assign({},(F()(e),e)),n=Object(l.a)(),r=Object(d.o)(),o=Object(d.f)(),c=o.networkId,i=o.wallet,s=Object(a.useCallback)((function(){r.navigate(f.c.Modal,{screen:f.b.Staking,params:{screen:U.a.StakingAmount,params:{networkId:c}}})}),[r,c]);return Object(I.jsx)(H.a,K(K({},t),{},{onPress:s,isDisabled:"watching"===(null==i?void 0:i.type),children:n.formatMessage({id:"action__stake"})}))};function X(){var e=Object(l.a)(),t=Object(L.a)().themeVariant;return Object(I.jsxs)(r.a,{borderRadius:12,bg:"surface-default",p:"4",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderWidth:"light"===t?1:0,borderColor:"border-subdued",children:[Object(I.jsxs)(r.a,{flexDirection:"row",alignItems:"center",flex:1,children:[Object(I.jsx)(A.a,{w:"8",h:"8",bg:"interactive-default",mr:"3",borderRadius:"full",children:Object(I.jsx)(c.a,{name:"DatabaseMini",color:"icon-on-primary"})}),Object(I.jsxs)(r.a,{mr:"4",flex:1,children:[Object(I.jsx)(M.h.Body1Strong,{children:e.formatMessage({id:"form__stake_earn"})}),Object(I.jsx)(M.h.Caption,{color:"text-subdued",children:e.formatMessage({id:"form__stake_earn_desc"},{0:"4.12%"})})]})]}),Object(I.jsx)(q,{})]})}var J=function(e){var t,n=e.state,o=e.networkId,i=e.accountId,s=Object(l.a)(),u=Object(d.o)(),b=Object(W.a)(o,i);Object(a.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=m()((function*(){if(b){if(void 0===b.nonce)return void V.a.serviceStaking.setAccountStakingActivity({networkId:o,accountId:i,data:void 0});var e=yield V.a.serviceHistory.queryTransactionNonceStatus({networkId:o,accountId:i,nonce:b.nonce});if("pending"===e)return;if("canceled"===e||"failed"===e)return void V.a.serviceStaking.setAccountStakingActivity({networkId:o,accountId:i,data:void 0});var t,n=yield V.a.serviceStaking.fetchStakedStateOnKele({networkId:o,accountId:i});if(n)n.total&&n.total>Number(null!=(t=b.oldValue)?t:0)&&V.a.serviceStaking.setAccountStakingActivity({networkId:o,accountId:i,data:void 0})}}))).apply(this,arguments)}if(b){var n,r=null!=(n=b.createdAt)?n:0;if(r&&!(Date.now()-r>36e5)){e();var c=setInterval(e,3e4);return function(){return clearInterval(c)}}V.a.serviceStaking.setAccountStakingActivity({networkId:o,accountId:i,data:void 0})}}),[b,o,i]);var j=Object(a.useCallback)((function(){u.navigate(f.c.Modal,{screen:f.b.Staking,params:{screen:U.a.StakedETHOnKele,params:{networkId:o}}})}),[u,o]);return Object(I.jsxs)(r.a,{borderRadius:12,bg:"surface-default",flexDirection:"row",p:"4",children:[Object(I.jsx)(r.a,{mr:"3",children:Object(I.jsx)(D.a,{w:"8",h:"8",source:z.a})}),Object(I.jsxs)(r.a,{flex:"1",children:[Object(I.jsxs)(r.a,{children:[Object(I.jsx)(M.h.Body1Strong,{children:s.formatMessage({id:"title__staked_on_str"},{0:"kelepool"})}),b?Object(I.jsxs)(r.a,{flexDirection:"row",alignItems:"center",children:[Object(I.jsx)(T.b,{size:"sm"}),Object(I.jsx)(M.h.Body2,{ml:"2",color:"text-subdued",children:s.formatMessage({id:"title__staking_in_process"},{0:"5"})})]}):Object(I.jsx)(M.h.Body2,{color:"text-subdued",children:(null!=(t=null==n?void 0:n.total)?t:"0")+" ETH"})]}),Object(I.jsxs)(r.a,{justifyContent:"space-between",flexDirection:"row",mt:"4",children:[Object(I.jsx)(r.a,{children:b?null:Object(I.jsxs)(C.a,{flexDirection:"row",alignItems:"center",onPress:j,children:[Object(I.jsx)(M.h.Body2,{color:"text-subdued",children:s.formatMessage({id:"content__details"})}),Object(I.jsx)(c.a,{name:"ChevronRightOutline",size:16})]})}),Object(I.jsxs)(_.a,{direction:"row",space:4,children:[Object(I.jsx)(H.a,{size:"sm",isDisabled:!0,children:s.formatMessage({id:"action__unstake"})}),Object(I.jsx)(q,{size:"sm",type:"primary"})]})]})]})]})},Y=function(e){var t=e.networkId,n=e.accountId,r=Object(W.b)(t,n),o=Object(W.a)(t,n);return Object(a.useEffect)((function(){V.a.serviceStaking.fetchStakedStateOnKele({accountId:n,networkId:t})}),[n,t]),r&&r.total&&r.total>0||o?Object(I.jsx)(J,{state:r,networkId:t,accountId:n}):Object(I.jsx)(X,{})},Q=function(e){var t=e.networkId,n=e.accountId;return Object(I.jsx)(Y,{networkId:t,accountId:n})},Z=function(e){var t,n=e.networkId,o=e.tokenIdOnNetwork,c=Object(d.f)().accountId,i=Object(j.o)(n,o);return n&&i&&(t=Object(I.jsx)(Q,{networkId:n,accountId:c})),t?Object(I.jsx)(r.a,{mb:"4",children:t}):null},$=n(3561),ee=n(199),te=n(754),ne=n(101),re=n(3073),oe=n(39),ce=n(3115),ie=n(3555),ae=n(461),se=n(187),le=n(3079),ue=n(1151),de=function(e){var t=e.networkId,n=e.balances,r=e.contractAdress,o=e.token,c=Object(b.b)({networkId:t,contractAdress:r});return Object(I.jsx)(re.f,{value:Object(ue.e)({token:o,price:c,balances:n})})};function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=function(e){var t,n,o=e.token,c=e.priceReady,u=e.sendAddress,j=Object(l.a)(),p=Object(le.e)(),h=Object(i.a)(),x=Object(oe.d)(),g=x.wallet,y=x.network,w=x.networkId,k=x.accountId,P=x.account,S=Object(s.u)(),_=null!=(t=Object(b.b)({networkId:null==o?void 0:o.networkId,contractAdress:null==o?void 0:o.tokenIdOnNetwork}))?t:0,C=Object(d.c)(w,k),T=(null!=(n=C[Object(ne.g)(je(je({},o),{},{sendAddress:u}))])?n:{balance:"0"}).balance,D=Object(a.useState)(""),A=v()(D,2),L=A[0],E=A[1],R=Object(a.useState)(""),H=v()(R,2),B=H[0],F=H[1];Object(a.useEffect)((function(){void 0!==(null==o?void 0:o.address)&&void 0!==(null==o?void 0:o.networkId)&&(V.a.serviceFiatPay.getFiatPayUrl({type:"buy",address:null==P?void 0:P.address,tokenAddress:null==o?void 0:o.address,networkId:null==o?void 0:o.networkId}).then((function(e){return E(e)})),V.a.serviceFiatPay.getFiatPayUrl({type:"sell",address:null==P?void 0:P.address,tokenAddress:null==o?void 0:o.address,networkId:null==o?void 0:o.networkId}).then((function(e){return F(e)})))}),[null==P?void 0:P.address,null==o?void 0:o.address,null==o?void 0:o.networkId,E]);var N=Object(a.useCallback)((function(e){S.navigate(f.c.Modal,{screen:f.b.FiatPay,params:{screen:ce.FiatPayRoutes.MoonpayWebViewModal,params:{url:e}}})}),[S]),z=Object(a.useCallback)(m()((function*(){if(o&&(V.a.serviceSwap.sellToken(o),P)){V.a.serviceSwap.setSendingAccountSimple(P);var e=yield V.a.serviceSwap.getPaymentToken(o);(null==e?void 0:e.networkId)===(null==y?void 0:y.id)&&V.a.serviceSwap.setRecipientToAccount(P,y)}var t,n;h?(V.a.serviceMarket.switchMarketTopTab(se.e),null==(t=S.getParent())||t.navigate(f.d.Market)):null==(n=S.getParent())||n.navigate(f.d.Swap)})),[y,P,h,S,o]),W=Object(a.useMemo)((function(){var e;return Object(I.jsxs)(r.a,{flexDirection:h?"column":"row",alignItems:"center",children:[Object(I.jsx)(te.c,{size:12,showTokenVerifiedIcon:!0,token:je(je({},o),{},{logoURI:(null==o?void 0:o.logoURI)||(null==y?void 0:y.logoURI)})}),Object(I.jsxs)(r.a,{ml:h?0:4,alignItems:h?"center":"flex-start",children:[Object(I.jsx)(r.a,{flexDirection:"row",mt:2,mx:h?4:0,children:Object(I.jsx)(re.a,{balance:T,suffix:null!=o&&o.tokenIdOnNetwork?null==o?void 0:o.symbol:null==y?void 0:y.symbol,formatOptions:{fixed:null!=(e=null!=o&&o.tokenIdOnNetwork?null==y?void 0:y.tokenDisplayDecimals:null==y?void 0:y.nativeDisplayDecimals)?e:4},as:M.h.DisplayXLarge,render:function(e){return Object(I.jsxs)(r.a,{flexDirection:"row",alignItems:"center",justifyContent:"center",children:[Object(I.jsx)(M.h.DisplayXLarge,{textAlign:h?"center":"left",mr:"2",children:e}),Object(I.jsx)(te.b,{size:24,token:o||{}})]})}})}),Object(I.jsx)(M.h.Body2,{mt:1,children:Object(I.jsx)(de,{networkId:w,token:o,contractAdress:null==o?void 0:o.tokenIdOnNetwork,balances:C})})]})]})}),[h,o,null==y?void 0:y.logoURI,null==y?void 0:y.symbol,null==y?void 0:y.tokenDisplayDecimals,null==y?void 0:y.nativeDisplayDecimals,T,w,C]),U=Object(a.useMemo)((function(){return Object(I.jsxs)(r.a,{flexDirection:"row",px:{base:1,md:0},mx:-3,children:[Object(I.jsxs)(r.a,{flex:1,mx:3,minW:"56px",alignItems:"center",children:[Object(I.jsx)(ee.a,{circle:!0,size:h?"xl":"lg",name:"PaperAirplaneOutline",type:"basic",isDisabled:"watching"===(null==g?void 0:g.type),onPress:function(){var e;S.navigate(f.c.Modal,{screen:f.b.Send,params:{screen:ae.a.PreSendAddress,params:{accountId:k,networkId:w,from:"",to:"",amount:"",token:null!=(e=null==o?void 0:o.tokenIdOnNetwork)?e:"",sendAddress:u}}})}}),Object(I.jsx)(M.h.CaptionStrong,{textAlign:"center",mt:"8px",color:"watching"===(null==g?void 0:g.type)?"text-disabled":"text-default",children:j.formatMessage({id:"action__send"})})]}),Object(I.jsxs)(r.a,{flex:1,mx:3,minW:"56px",alignItems:"center",children:[Object(I.jsx)(ee.a,{circle:!0,size:h?"xl":"lg",name:"QrCodeOutline",type:"basic",isDisabled:"watching"===(null==g?void 0:g.type),onPress:function(){S.navigate(f.c.Modal,{screen:f.b.Receive,params:{screen:ie.a.ReceiveToken,params:{}}})}}),Object(I.jsx)(M.h.CaptionStrong,{textAlign:"center",mt:"8px",color:"watching"===(null==g?void 0:g.type)?"text-disabled":"text-default",children:j.formatMessage({id:"action__receive"})})]}),Object(I.jsxs)(r.a,{flex:1,mx:3,minW:"56px",alignItems:"center",children:[Object(I.jsx)(ee.a,{circle:!0,size:h?"xl":"lg",name:"ArrowsRightLeftOutline",type:"basic",isDisabled:"watching"===(null==g?void 0:g.type),onPress:z}),Object(I.jsx)(M.h.CaptionStrong,{textAlign:"center",mt:"8px",color:"watching"===(null==g?void 0:g.type)?"text-disabled":"text-default",children:j.formatMessage({id:"title__swap"})})]}),!h&&p?Object(I.jsxs)(I.Fragment,{children:[L.length>0&&Object(I.jsxs)(r.a,{flex:1,mx:3,minW:"56px",alignItems:"center",children:[Object(I.jsx)(ee.a,{circle:!0,size:h?"xl":"lg",name:"PlusOutline",type:"basic",isDisabled:"watching"===(null==g?void 0:g.type),onPress:function(){N(L)}}),Object(I.jsx)(M.h.CaptionStrong,{textAlign:"center",mt:"8px",color:"watching"===(null==g?void 0:g.type)?"text-disabled":"text-default",children:j.formatMessage({id:"action__buy"})})]}),B.length>0&&Object(I.jsxs)(r.a,{flex:1,mx:3,minW:"56px",alignItems:"center",children:[Object(I.jsx)(ee.a,{circle:!0,size:h?"xl":"lg",name:"CurrencyDollarOutline",type:"basic",isDisabled:"watching"===(null==g?void 0:g.type),onPress:function(){N(B)}}),Object(I.jsx)(M.h.CaptionStrong,{textAlign:"center",mt:"8px",color:"watching"===(null==g?void 0:g.type)?"text-disabled":"text-default",children:j.formatMessage({id:"action__sell"})})]})]}):null,c&&!h&&Object(ne.i)(null==o?void 0:o.coingeckoId)&&Object(I.jsxs)(r.a,{flex:1,mx:3,minW:"56px",alignItems:"center",children:[Object(I.jsx)(ee.a,{circle:!0,size:h?"xl":"lg",name:"BellOutline",type:"basic",onPress:function(){S.navigate(f.c.Modal,{screen:f.b.ManageToken,params:{screen:O.a.PriceAlertList,params:{price:_,token:o}}})}}),Object(I.jsx)(M.h.CaptionStrong,{textAlign:"center",mt:"8px",color:"text-default",children:j.formatMessage({id:"form__price_alert"})})]})]})}),[_,h,null==g?void 0:g.type,j,L,B,c,S,k,w,o,u,N,z,p]);return Object(a.useMemo)((function(){return Object(I.jsxs)(r.a,{w:"100%",py:h?8:12,flexDirection:h?"column":"row",justifyContent:h?"flex-start":"space-between",alignItems:h?"stretch":"center",bgColor:"background-default",children:[Object(I.jsx)(r.a,{w:h?"full":void 0,children:W}),Object(I.jsx)(r.a,{mt:h?8:0,alignItems:h?void 0:"flex-end",ml:h?void 0:"auto",children:U})]})}),[h,W,U])};t.default=function(){var e=Object(l.a)(),t=Object(a.useRef)(!0),n=Object(s.u)(),p=Object(s.x)(),m=Object(i.a)(),h=p.params,v=h.accountId,x=h.networkId,g=h.tokenId,y=h.sendAddress,w=Object(b.b)({networkId:x,contractAdress:g}),k=Object(j.k)(x,g).token,P=Object(d.f)(),_=P.account,C=P.network,T=Object(a.useMemo)((function(){return!!k&&!!w}),[w,k]);Object(a.useLayoutEffect)((function(){t.current?t.current=!1:n.canGoBack()&&n.goBack()}),[null==_?void 0:_.id,null==C?void 0:C.id,n]),Object(a.useEffect)((function(){n.setOptions({title:(null==k?void 0:k.name)||(null==_?void 0:_.name)||""})}),[n,k,v,x,null==_?void 0:_.name]);var D=Object(a.useCallback)((function(e){"priceAlert"===e&&n.navigate(f.c.Modal,{screen:f.b.ManageToken,params:{screen:O.a.PriceAlertList,params:{price:w,token:k}}})}),[k,n,w]),M=Object(a.useCallback)((function(){return Object(I.jsx)(o.b,{dropdownPosition:"right",title:e.formatMessage({id:"action__more"}),onChange:D,footer:null,activatable:!1,triggerProps:{width:"40px"},dropdownProps:{width:248},options:[{label:e.formatMessage({id:"form__price_alert"}),value:"priceAlert",iconProps:{name:"BellOutline"}}],renderTrigger:function(){return Object(I.jsx)(c.a,{name:"DotsHorizontalOutline"})}})}),[e,D]);Object(a.useLayoutEffect)((function(){T&&m&&n.setOptions({headerRight:M})}),[n,e,M,D,T,k,m]);var A=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(fe,{token:k,sendAddress:y,priceReady:T}),Object(I.jsx)(Z,{networkId:null==k?void 0:k.networkId,tokenIdOnNetwork:null==k?void 0:k.tokenIdOnNetwork}),Object(I.jsx)(S,{style:{marginBottom:20},networkId:x,contract:g})]});return Object(I.jsx)(r.a,{bg:"background-default",flex:1,marginX:"auto",w:"100%",maxW:u.e,children:Object(I.jsx)($.a,{accountId:v,networkId:x,tokenId:g,headerView:A})})}}}]);