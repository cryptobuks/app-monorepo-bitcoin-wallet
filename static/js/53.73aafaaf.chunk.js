(this.webpackJsonp=this.webpackJsonp||[]).push([[53],{3071:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),l=n(5),f=n.n(l);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var h=function(e){u()(n,e);var t=p(n);function n(e){var n;return(n=t.call(this,e.options)).vault=e,n}return n.prototype.addressFromBase=function(){var e=i()((function*(e){return this.vault.addressFromBase(e)}));return function(t){return e.apply(this,arguments)}}(),a()(n)}(n(1147).a);!function(e){u()(n,e);var t=p(n);function n(){return t.apply(this,arguments)}a()(n)}(h)},3073:function(e,t,n){"use strict";n.d(t,"i",(function(){return T})),n.d(t,"d",(function(){return k})),n.d(t,"h",(function(){return P})),n.d(t,"g",(function(){return C})),n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return R})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return N})),n.d(t,"f",(function(){return S}));var r=n(72),i=n(2),o=n.n(i),a=n(146),c=n.n(a),u=n(10),s=n.n(u),d=n(1),l=n(26),f=n.n(l),p=n(134),h=n(178),y=n(3088),v=n(391),g=n(1151),m=n(952),w=n(0);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(){var e,t,n;return null!=(e=null==(t=f.a.config(void 0))||null==(n=t.FORMAT)?void 0:n.decimalSeparator)?e:""}function I(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=new f.a(e);if(t.unit&&(n=n.div("1"+"0".repeat(t.unit))),!n.isFinite())return null;var r=x(),i=("number"===typeof t.fixed?t.fullPrecision?n.toFormat(t.fixed,f.a.ROUND_FLOOR):n.decimalPlaces(t.fixed,f.a.ROUND_FLOOR).toFormat():n.toFormat()).split(r),o=s()(i,2),a=o[0],c=o[1];return{int:a,dec:c,sep:r}}catch(u){return null}}(e,t);return n?void 0===n.dec?""+n.int:""+n.int+n.sep+n.dec:null}function T(e,t,n){var r,i,o=n||{},a=o.unit,u=o.fixed,s=o.fullPrecision,d=t?t.toUpperCase().trim():void 0;d&&d.length>(null!=(r=null==n?void 0:n.unitMaxLength)?r:20)&&(d=d.slice(0,null!=(i=null==n?void 0:n.unitMaxLength)?i:11)+"...");return c()(e)?{amount:void 0,unit:d}:{amount:I(e,{unit:a,fixed:u,fullPrecision:s})||"0",unit:d}}function j(){return{useFormatCurrencyDisplay:function(e,t){var n,r,i=Object(h.u)().selectedFiatMoneySymbol,o=void 0===i?"usd":i,a=null!=(n=null==(r=Object(h.h)((function(e){return e.fiatMoney.map}))[o])?void 0:r.unit)?n:"",c=Object(d.useMemo)((function(){var t=new f.a(1);if(!t.isNaN())return e.reduce((function(e,t){if(void 0===t||void 0===e)return e;var n=new f.a(null!=e?e:"0"),r=new f.a(null!=t?t:"0");return n.multipliedBy(r)}),t)}),[1,e]);return Object(d.useMemo)((function(){return void 0===c||"0"===c?{amount:void 0,unit:void 0}:{amount:I(c,O(O({},t),{},{fixed:"btc"===o?8:2,fullPrecision:!0}))||"0",unit:a}}),[c,t,o,a])},useFormatBalanceDisplay:function(e,t,n){return Object(d.useMemo)((function(){return T(e,t,n)}),[e,n,t])}}}f.a.config({DECIMAL_PLACES:25});var k=function(e){var t=e.numbers,n=e.formatOptions,i=void 0===n?{}:n,o=e.as,a=void 0===o?r.a:o,c=e.render,u=(0,j().useFormatCurrencyDisplay)(t,i),s=Object(d.useMemo)((function(){var e;return"sats"===(null==(e=u.unit)?void 0:e.toLowerCase())?Object(w.jsxs)(w.Fragment,{children:[t.length?u.amount:"--","\xa0"," "+u.unit]}):Object(w.jsxs)(w.Fragment,{children:[u.unit,"\xa0",t.length?u.amount:"--"]})}),[u.amount,u.unit,t.length]);if(c)return null==c?void 0:c(s);var l=a;return Object(w.jsx)(l,{children:s})};function P(e){var t=e.token,n=e.value,r=e.formatOptions,i=void 0===r?{}:r,o=e.as,a=e.render,c=e.networkId,u=Object(y.b)({networkId:c,contractAdress:null==t?void 0:t.tokenIdOnNetwork}),s=void 0===u||null===u;return Object(w.jsx)(k,{numbers:s?[]:[u,n,n?1:void 0],render:a,formatOptions:i,as:o})}function C(e){var t=Object(h.f)(),n=t.accountId,r=t.networkId;return Object(w.jsx)(P,O(O({},e),{},{accountId:n,networkId:r}))}function A(e){var t=e.value,n=e.formatOptions,r=void 0===n?{}:n,i=e.as,o=e.render,a=e.accountId,c=e.networkId;return Object(w.jsx)(P,{accountId:a,networkId:c,token:null,value:t,formatOptions:r,render:o,as:i})}var R=function(e){var t=e.balance,n=e.formatOptions,i=void 0===n?{}:n,o=e.as,a=void 0===o?r.a:o,c=e.render,u=e.suffix,s=(0,j().useFormatBalanceDisplay)(t,u,i),l=Object(d.useMemo)((function(){return Object(w.jsxs)(w.Fragment,{children:[s.amount,null!=s&&s.unit?" "+(null==s?void 0:s.unit):null]})}),[s.amount,null==s?void 0:s.unit]);if(c)return null==c?void 0:c(l);var f=a;return Object(w.jsx)(f,{children:l})};function E(e){var t=e.token,n=e.render,i=e.accountId,o=e.networkId,a=Object(v.m)({networkId:o,accountId:i,token:t,fallback:"0"}),c=Object(h.e)({accountId:i,networkId:o}).network,u=!(null!=t&&t.tokenIdOnNetwork)?null==c?void 0:c.nativeDisplayDecimals:null==c?void 0:c.tokenDisplayDecimals;return Object(w.jsx)(R,{balance:a,suffix:null==t?void 0:t.symbol,formatOptions:{fixed:null!=u?u:4},render:null!=n?n:function(e){return Object(w.jsx)(r.a,{typography:{sm:"Body1Strong",md:"Body2Strong"},children:e})}})}function N(e){var t=e.token,n=e.render,r=Object(h.f)(),i=r.networkId,o=r.accountId;return Object(w.jsx)(E,{token:t,render:n,accountId:o,networkId:i})}function S(e){var t,n,r=e.decimals,i=e.value,o=e.onlyNumber,a=e.convertValue,c=Object(h.u)().selectedFiatMoneySymbol,u=void 0===c?"usd":c,s=Object(h.h)((function(e){return e.fiatMoney.map}));if("number"!==typeof i&&!(i instanceof f.a))return null;var d=(null==(t=s[u])?void 0:t.value)||0,l=(null==(n=s[u])?void 0:n.unit)||"",y=null!=r?r:Object(g.d)(i instanceof f.a?i.toNumber():i),v=(i instanceof f.a?i.toNumber():i)+(a?new f.a(d).multipliedBy(a).toNumber():0);return"sats"===l.toLowerCase()?Object(w.jsxs)(w.Fragment,{children:[v<.01?""+Object(m.a)(v):Object(w.jsx)(p.a,{value:null!=v?v:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:y})," "+(o?"":l)]}):Object(w.jsxs)(w.Fragment,{children:[""+(o?"":l),v<.01?""+Object(m.a)(v):Object(w.jsx)(p.a,{value:null!=v?v:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:y})]})}},3077:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(10),i=n.n(r),o=n(2),a=n.n(o),c=n(3),u=n.n(c),s=n(6),d=n.n(s),l=n(9),f=n.n(l),p=n(12),h=n.n(p),y=n(5),v=n.n(y),g=n(20),m=n(19);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var x=function(e){f()(n,e);var t=O(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.signTransaction=function(){var e=u()((function*(e,t){var n=t.password;if("undefined"===typeof n)throw new m.q("Software signing requires a password.");var r=yield this.getSigners(n,e.inputs.map((function(e){return e.address})));return g.a.engine.info("signTransaction",this.networkId,e),b(b({},yield this.engine.providerManager.signTransaction(this.networkId,e,r)),{},{encodedTx:e.encodedTx})}));return function(t,n){return e.apply(this,arguments)}}(),r.signMessage=function(){var e=u()((function*(e,t){var n=this,r=t.password;if("undefined"===typeof r)throw new m.q("Software signing requires a password.");var o=yield this.getDbAccount(),a=Object.values(yield this.getSigners(r,[o.address])),c=i()(a,1)[0];return g.a.engine.info("signMessage",this.networkId,e),Promise.all(e.map((function(e){return n.engine.providerManager.signMessage(n.networkId,e,c)})))}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},d()(n)}(n(3071).a)},3088:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(1),i=n(39),o=n(391),a=function(e){var t=e.networkId,n=e.contractAdress,o=Object(i.e)((function(e){return e.tokens.tokenPriceMap}));return Object(r.useMemo)((function(){if(t&&o)return o[t+(n?"-"+n:"")]}),[n,t,o])},c=function(e){var t=e.networkId,n=e.contractAdress,r=Object(i.e)((function(e){return e.settings.selectedFiatMoneySymbol}));return Object(o.n)({networkId:null!=t?t:"",tokenIdOnNetwork:null!=n?n:"",vsCurrency:r})}},3093:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(2),i=n.n(r),o=n(146),a=n.n(o),c=n(3),u=n.n(c),s=n(6),d=n.n(s),l=n(9),f=n.n(l),p=n(12),h=n.n(p),y=n(5),v=n.n(y),g=n(26),m=n.n(g),w=n(11),b=n(20),O=n(14),x=n(53),I=n(19),T=n(184),j=n(658),k=n(56),P=n(1147);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}if(O.a.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var E=function(t){f()(r,t);var n=R(r);function r(){return n.apply(this,arguments)}var i=r.prototype;return i.init=function(){var e=u()((function*(e){yield this.initProvider(),yield this.initKeyring(e)}));return function(t){return e.apply(this,arguments)}}(),i.initKeyring=function(){var e=u()((function*(e){this.keyring=yield e.keyringCreator(this)}));return function(t){return e.apply(this,arguments)}}(),i.signTransaction=function(){var e=u()((function*(e,t){return this.keyring.signTransaction(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),i.signAndSendTransaction=function(){var e=u()((function*(e,t,n){var r=yield this.signTransaction(e,t);return n?A(A({},r),{},{encodedTx:e.encodedTx}):this.broadcastTransaction(A(A({},r),{},{encodedTx:e.encodedTx}))}));return function(t,n,r){return e.apply(this,arguments)}}(),i.broadcastTransaction=function(){var e=u()((function*(e,t){b.a.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var n=yield this.engine.providerManager.broadcastTransaction(this.networkId,e.rawTx,t);return b.a.engine.info("broadcastTransaction END:",{txid:n,rawTx:e.rawTx}),A(A({},e),{},{txid:n,encodedTx:e.encodedTx})}));return function(t,n){return e.apply(this,arguments)}}(),i.buildEncodedTxFromBatchTransfer=function(){var e=u()((function*(e,t,n){throw new I.l}));return function(t,n,r){return e.apply(this,arguments)}}(),i.buildEncodedTxsFromSetApproveForAll=function(){var e=u()((function*(e,t){throw new I.l}));return function(t,n){return e.apply(this,arguments)}}(),i.activateAccount=function(){var e=u()((function*(){throw new I.l}));return function(){return e.apply(this,arguments)}}(),i.activateToken=function(){var e=u()((function*(e,t){throw new I.l}));return function(t,n){return e.apply(this,arguments)}}(),i.getTokenAllowance=function(){var e=u()((function*(e,t){throw new I.l}));return function(t,n){return e.apply(this,arguments)}}(),i.batchTokensAllowance=function(){var e=u()((function*(e,t){throw new I.l}));return function(t,n){return e.apply(this,arguments)}}(),i.getOutputAccount=function(){var e=u()((function*(){var e=yield this.getDbAccount({noCache:!0});return{id:e.id,name:e.name,type:e.type,path:e.path,coinType:e.coinType,tokens:[],address:e.address}}));return function(){return e.apply(this,arguments)}}(),i.getAccountBalance=function(){var e=u()((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=yield this.getDbAccount(),i=r.address;return this.getBalances((t?[{address:i}]:[]).concat(e.map((function(e){return{address:i,tokenAddress:e}}))),n)}));return function(t){return e.apply(this,arguments)}}(),i.updatePendingTxs=function(){var e=u()((function*(e){throw new I.l}));return function(t){return e.apply(this,arguments)}}(),i.getAccountNonce=function(){var e=u()((function*(){return Promise.resolve(null)}));return function(){return e.apply(this,arguments)}}(),i.fixActionDirection=function(){var e=u()((function*(e){var t,n,r,i,o=e.action,a=e.accountAddress;(o.direction=k.b.OTHER,o.type===k.a.NATIVE_TRANSFER)&&(o.direction=yield this.buildTxActionDirection({from:(null==(t=o.nativeTransfer)?void 0:t.from)||"",to:(null==(n=o.nativeTransfer)?void 0:n.to)||"",address:a}));o.type===k.a.TOKEN_TRANSFER&&(o.direction=yield this.buildTxActionDirection({from:(null==(r=o.tokenTransfer)?void 0:r.from)||"",to:(null==(i=o.tokenTransfer)?void 0:i.to)||"",address:a}));return o}));return function(t){return e.apply(this,arguments)}}(),i.fixDecodedTx=function(){var e=u()((function*(e){var t,n;e.createdAt=null!=(t=e.createdAt)?t:Date.now();var r=null==(n=e.encodedTx)?void 0:n.nonce;e.nonce=a()(r)?e.nonce:new m.a(r).toNumber();for(var i=e.owner,o=0;o<e.actions.length;o+=1){var c=e.actions[o];yield this.fixActionDirection({action:c,accountAddress:i})}if(e.outputActions)for(var u=0;u<e.outputActions.length;u+=1){var s=e.outputActions[u];yield this.fixActionDirection({action:s,accountAddress:i})}return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),i.fixHistoryTx=function(){var e=u()((function*(e){return e.decodedTx=yield this.fixDecodedTx(e.decodedTx),O.a.isDev&&O.a.isDesktop&&Object.assign(e,{_tmpCreatedAtText:new Date(e.decodedTx.createdAt||0).toLocaleString(),_tmpUpdatedAtText:new Date(e.decodedTx.updatedAt||0).toLocaleString(),_tmpStatus:e.decodedTx.status,_tmpIsFinal:e.decodedTx.isFinal}),Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),i.buildHistoryTx=function(){var e=u()((function*(e){var t=e.historyTxToMerge,n=(e.encodedTx,e.decodedTx),r=e.signedTx,i=e.isSigner,o=e.isLocalCreated,a=(null==r?void 0:r.txid)||(null==n?void 0:n.txid)||"";if(!a)throw new Error("buildHistoryTx txid not found");var c=yield this.getAccountAddress();n.txid=a||n.txid,n.owner=c,i&&(n.signer=c),null!=r&&r.txKey&&(n.extraInfo?n.extraInfo.txKey=r.txKey:n.extraInfo={txKey:r.txKey});var u=A(A({id:this.networkId+"_"+a+"_"+this.accountId,isLocalCreated:Boolean(o)},t),{},{decodedTx:n});return u=yield this.fixHistoryTx(u),Promise.resolve(u)}));return function(t){return e.apply(this,arguments)}}(),i.checkIsScamHistoryTx=function(){var e=u()((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),i.fetchOnChainHistory=function(){var e=u()((function*(e){throw new I.l}));return function(t){return e.apply(this,arguments)}}(),i.fixAddressCase=function(e){return Promise.resolve(e)},i.buildTxActionDirection=function(){var e=u()((function*(e){var t=e.from,n=e.to,r=e.address;return t=yield this.fixAddressCase(t||""),n=yield this.fixAddressCase(n),r=yield this.fixAddressCase(r),t===n&&t===r?k.b.SELF:t&&t===r?k.b.OUT:n&&n===r?k.b.IN:k.b.OTHER}));return function(t){return e.apply(this,arguments)}}(),i.getNextNonce=function(){var e=u()((function*(e,t){var n,r,i=null!=(n=null==(r=(yield this.engine.providerManager.getAddresses(e,[t.address]))[0])?void 0:r.nonce)?n:0,o=(yield this.engine.getHistory(e,t.id,void 0,!1),yield x.a.history.getMaxPendingNonce({accountId:this.accountId,networkId:e})),c=yield x.a.history.getPendingNonceList({accountId:this.accountId,networkId:e}),u=Math.max(a()(o)?0:o+1,i);if(Number.isNaN(u)&&(u=i),u>i)for(var s=i;s<u;s+=1)if(!c.includes(s)){u=s;break}if(u<i&&(u=i),u-i>=w.y.PENDING_QUEUE_MAX_LENGTH)throw new I.v(w.y.PENDING_QUEUE_MAX_LENGTH);return u}));return function(t,n){return e.apply(this,arguments)}}(),i.validateSendAmount=function(e,t,n){return Promise.resolve(!0)},i.notifyChainChanged=function(e,t){},i.getFetchBalanceAddress=function(e){return Promise.resolve(e.address)},i.getPrivateKeyByCredential=function(t){return Promise.resolve(e.from(t.startsWith("0x")?t.slice(2):t,"hex"))},i.getMinDepositAmount=function(){var e=u()((function*(){return"0"}));return function(){return e.apply(this,arguments)}}(),i.specialCheckEncodedTx=function(){var e=u()((function*(e){return{success:!0}}));return function(t){return e.apply(this,arguments)}}(),d()(r)}(function(e){f()(n,e);var t=R(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.initProvider=function(){var e=u()((function*(){var e=(yield this.getNetwork()).impl;a()(j.a[e])||(this.engineProvider=yield this.engine.providerManager.getProvider(this.networkId))}));return function(){return e.apply(this,arguments)}}(),r.proxyJsonRPCCall=function(){var e=u()((function*(e){throw new I.l}));return function(t){return e.apply(this,arguments)}}(),r.createClientFromURL=function(e){throw new I.l},r.getEthersProvider=function(){var e=u()((function*(){throw new I.l}));return function(){return e.apply(this,arguments)}}(),r.getClientEndpointStatus=function(){var e=u()((function*(e){var t=this.createClientFromURL(e),n=performance.now(),r=(yield t.getInfo()).bestBlockNumber;return{responseTime:Math.floor(performance.now()-n),latestBlock:r}}));return function(t){return e.apply(this,arguments)}}(),r.validateAddress=function(){var e=u()((function*(e){var t=yield this.engineProvider.verifyAddress(e),n=t.normalizedAddress;if(!t.isValid||"undefined"===typeof n)throw new I.f;return Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),r.validateImportedCredential=function(e){return Promise.resolve(this.settings.importedAccountEnabled&&/^(0x)?[0-9a-zA-Z]{64}$/.test(e))},r.validateWatchingCredential=function(){var e=u()((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.engineProvider.verifyAddress(e)).isValid)}));return function(t){return e.apply(this,arguments)}}(),r.validateTokenAddress=function(){var e=u()((function*(e){var t=yield this.engineProvider.verifyTokenAddress(e),n=t.normalizedAddress;if(!t.isValid||"undefined"===typeof n)throw new I.i;return Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),r.validateCanCreateNextAccount=function(){var e=u()((function*(e,t){return Promise.resolve(!0)}));return function(t,n){return e.apply(this,arguments)}}(),r.checkAccountExistence=function(){var e=u()((function*(e){return Promise.resolve(!0)}));return function(t){return e.apply(this,arguments)}}(),r.getBalances=function(){var e=u()((function*(e,t){return(yield this.engine.providerManager.getClient(this.networkId)).getBalances(e.map((function(e){var t=e.address,n=e.tokenAddress;return{address:t,coin:A({},"string"===typeof n?{tokenAddress:n}:{})}})))}));return function(t,n){return e.apply(this,arguments)}}(),r.getFrozenBalance=function(){var e=u()((function*(e){return 0}));return function(t){return e.apply(this,arguments)}}(),r.getTransactionStatuses=function(e){return this.engine.providerManager.getTransactionStatuses(this.networkId,e)},r.getTransactionFeeInNative=function(e){return Promise.resolve("")},r.isContractAddress=function(){var e=u()((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),r.getAccountNameInfoMap=function(){var e=u()((function*(){var e=yield this.getNetwork();return Object(T.a)(e.impl)}));return function(){return e.apply(this,arguments)}}(),r.canAutoCreateNextAccount=function(){var e=u()((function*(e){return Promise.resolve(!1)}));return function(t){return e.apply(this,arguments)}}(),r.filterAccounts=function(){var e=u()((function*(e){var t=e.accounts;e.networkId;return Promise.resolve(t)}));return function(t){return e.apply(this,arguments)}}(),r.shouldChangeAccountWhenNetworkChanged=function(){var e=u()((function*(e){e.previousNetwork,e.newNetwork,e.activeAccountId;return Promise.resolve({shouldReloadAccountList:!1,shouldChangeActiveAccount:!1})}));return function(t){return e.apply(this,arguments)}}(),r.getAccountNameInfosByImportedOrWatchingCredential=function(){var e=u()((function*(e){return Promise.resolve([])}));return function(t){return e.apply(this,arguments)}}(),d()(n)}(P.a))}).call(this,n(22).Buffer)},3094:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),l=n(5),f=n.n(l),p=n(309),h=n(253);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var v=function(t){u()(r,t);var n=y(r);function r(){return n.apply(this,arguments)}var o=r.prototype;return o.getHardwareInfo=function(){var e=i()((function*(){var e,t,n,r=yield this.engine.getHWDeviceByWalletId(this.vault.walletId);return{connectId:null!=(e=null==r?void 0:r.mac)?e:"",deviceId:null!=(t=null==r?void 0:r.deviceId)?t:"",deviceType:null!=(n=null==r?void 0:r.deviceType)?n:""}}));return function(){return e.apply(this,arguments)}}(),o.getWalletPassphraseState=function(){var e=i()((function*(){var e=yield this.engine.getWallet(this.vault.walletId);return{passphraseState:null==e?void 0:e.passphraseState,useEmptyPassphrase:!Object(h.g)(e)}}));return function(){return e.apply(this,arguments)}}(),o.getHardwareSDKInstance=function(){var t=i()((function*(){var t,n,r,i,o;return null!=(o=yield null==(t=e)||null==(n=t.$backgroundApiProxy)||null==(r=n.backgroundApi)||null==(i=r.serviceHardware)||null==i.getSDKInstance?void 0:i.getSDKInstance())?o:p.b}));return function(){return t.apply(this,arguments)}}(),a()(r)}(n(3071).a)}).call(this,n(40))},3095:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),l=n(12),f=n.n(l),p=n(5),h=n.n(p),y=n(428),v=n(19);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var b=function(e){d()(n,e);var t=w(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.getPrivateKeys=function(){var e=a()((function*(e,t){var n=(yield this.getDbAccount()).path.split("/"),r=t||[n.pop()],i=n.join("/"),o=(yield this.engine.dbApi.getCredential(this.walletId,e)).seed;if("undefined"===typeof o)throw new v.q("Unable to get credential.");var a=(yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)).curve;return Object(y.c)(a,o,e,i,r).reduce((function(e,t){var n;return m(m({},e),{},((n={})[t.path]=t.extendedKey.key,n))}),{})}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},u()(n)}(n(3077).a)},3096:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),l=n(5),f=n.n(l),p=n(19);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(e){u()(n,e);var t=h(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.getPrivateKeys=function(){var e=i()((function*(e,t){if("undefined"!==typeof t)throw new p.l("Getting private keys from extended private key");var n=(yield this.engine.dbApi.getCredential(this.accountId,e)).privateKey;if("undefined"===typeof n)throw new p.q("Unable to get credential.");return{"":n}}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},a()(n)}(n(3077).a)},3097:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),l=n(5),f=n.n(l),p=n(19);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(e){u()(n,e);var t=h(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.signTransaction=function(){var e=i()((function*(e,t){throw new p.q("signTransaction is not supported for watching accounts")}));return function(t,n){return e.apply(this,arguments)}}(),r.signMessage=function(){var e=i()((function*(e,t){throw new p.q("signMessage is not supported for watching accounts")}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},a()(n)}(n(3071).a)},3098:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(42),i=n(70),o=n(20),a=n(14);function c(e,t){return"string"!==typeof t?null:e===r.HardwareErrorCode.DeviceInitializeFailed&&t.includes("ECONNABORTED")?new i.h({message:t}):t.includes("Bridge network error")?new i.e({message:t}):null}function u(e){var t,n=e||{},u=n.code,s=n.error,d=n.message,l=null!=(t=null!=s?s:d)?t:"Unknown error";if(c(u,l))return c(u,l);switch(o.a.hardwareSDK.info("Device Utils Convert Device Error:",u,l),u){case r.HardwareErrorCode.UnknownError:return new i.H(e);case r.HardwareErrorCode.DeviceFwException:return new i.t(e);case r.HardwareErrorCode.DeviceUnexpectedMode:return"string"===typeof l&&-1!==l.indexOf("ui-device_bootloader_mode")?new i.E(e):new i.H(e);case r.HardwareErrorCode.DeviceCheckDeviceIdError:return new i.m(e);case r.HardwareErrorCode.DeviceNotFound:return new i.k(e);case r.HardwareErrorCode.DeviceUnexpectedBootloaderMode:return new i.E(e);case r.HardwareErrorCode.DeviceInterruptedFromOutside:case r.HardwareErrorCode.DeviceInterruptedFromUser:return new i.K(e);case r.HardwareErrorCode.DeviceNotSupportPassphrase:return new i.F(e);case r.HardwareErrorCode.IFrameLoadFail:return new i.v(e);case r.HardwareErrorCode.IframeTimeout:return new i.w(e);case r.HardwareErrorCode.FirmwareUpdateDownloadFailed:return new i.p(e);case r.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot:return new i.s(e);case r.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure:return new i.q(e);case r.HardwareErrorCode.FirmwareUpdateLimitOneDevice:return new i.r(e);case r.HardwareErrorCode.CallMethodNeedUpgradeFirmware:return new i.t(e);case r.HardwareErrorCode.NewFirmwareUnRelease:return new i.D(e);case r.HardwareErrorCode.NetworkError:return new i.C(e);case r.HardwareErrorCode.BlePermissionError:return new i.A(e);case r.HardwareErrorCode.BleLocationError:return new i.z({message:l});case r.HardwareErrorCode.BleLocationServicesDisabled:return new i.b({message:l});case r.HardwareErrorCode.BleDeviceNotBonded:return new i.j(e);case r.HardwareErrorCode.BleWriteCharacteristicError:return new i.d(e);case r.HardwareErrorCode.BleScanError:return new i.c({message:l});case r.HardwareErrorCode.BleAlreadyConnected:return new i.a(e);case r.HardwareErrorCode.RuntimeError:return-1!==l.indexOf("EIP712 blind sign is disabled")?new i.G(e):-1!==l.indexOf("Unknown message")||-1!==l.indexOf("Failure_UnexpectedMessage")?new i.I(e):new i.H(e);case r.HardwareErrorCode.PinInvalid:return new i.x(e);case r.HardwareErrorCode.DeviceCheckPassphraseStateError:return new i.y(e);case r.HardwareErrorCode.DeviceOpenedPassphrase:return new i.n(e);case r.HardwareErrorCode.DeviceNotOpenedPassphrase:return new i.l(e);case r.HardwareErrorCode.PinCancelled:case r.HardwareErrorCode.ActionCancelled:return new i.J(e);case r.HardwareErrorCode.BridgeNotInstalled:case i.i.NeedOneKeyBridge:return new i.B(e);case r.HardwareErrorCode.BridgeNetworkError:return new i.e(e);case r.HardwareErrorCode.BridgeTimeoutError:return a.a.isDesktop&&(o.a.hardwareSDK.debug("desktop bridge timeout, restart desktop bridge."),window.desktopApi.reloadBridgeProcess()),new i.f(e);case r.HardwareErrorCode.PollingTimeout:return new i.h(e);case r.HardwareErrorCode.PollingStop:return new i.g(e);case r.HardwareErrorCode.BlindSignDisabled:return new i.G(e);default:return new i.H(e)}}},3719:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={ecdsa:new Uint8Array([2]),ed25519:new Uint8Array([0]),ethereum:new Uint8Array([2]),sr25519:new Uint8Array([1])}},3999:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n(4116),i=n(56),o=n(19),a=function(e,t){var n=t.replace(/(_)/g,"").toLowerCase();return"balances"!==e||"transfer"!==n&&"transferkeepalive"!==n&&"transferall"!==n?"assets"!==e||"transfer"!==n&&"transferkeepalive"!==n?i.a.UNKNOWN:i.a.TOKEN_TRANSFER:i.a.NATIVE_TRANSFER},c=function(e){var t=e.method,n=t.name,r=t.pallet;return a(r,n)},u=function(e,t){try{return Object(r.a)(e,t)}catch(i){var n=i.message;if("Expected a mnemonic with 24 words (or 25 including a password)"===n)throw new o.q(n,"msg__error_mnemonics_can_only_be_12_24");throw i}}},4571:function(e,t){},4656:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n(2),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),l=n(12),f=n.n(l),p=n(5),h=n.n(p),y=n(59),v=n(974),g=n(19),m=n(184),w=n(89),b=n(3094),O=n(293),x=n(3098),I=n(11),T=n(20),j=n(3719);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var A="m/44'/"+I.l+"'",R=function(e){d()(n,e);var t=C(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.getChainInfo=function(){var e=a()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),r.getChainInfoImplOptions=function(){var e=a()((function*(){return(yield this.getChainInfo()).implOptions}));return function(){return e.apply(this,arguments)}}(),r.prepareAccounts=function(){var e=a()((function*(e){var t,n=e.indexes,r=e.names,i=n.map((function(e){return A+"/"+e+"'/0'/0'"})),o=yield this.getHardwareSDKInstance(),a=yield this.getHardwareInfo(),c=a.connectId,u=a.deviceId,s=yield this.getWalletPassphraseState(),d=yield this.getChainInfoImplOptions(),l=yield this.getNetworkChainId();try{t=yield o.polkadotGetAddress(c,u,P({bundle:i.map((function(e){return{path:e,showOnOneKey:!1,prefix:d.addressPrefix,network:l}}))},s))}catch(k){throw T.a.common.error(k),new g.p(k)}if(!t.success)throw T.a.common.error(t.payload),Object(x.a)(t.payload);var f=[],p=0;for(var h of t.payload){var y=h.address,v=h.path,b=h.publicKey;if(y){var O=Object(m.a)(I.H).default.prefix,j=(r||[])[p]||O+" #"+(n[p]+1);f.push({id:this.walletId+"--"+v,name:j,type:w.b.VARIANT,path:v,coinType:I.l,pub:b||"",address:"",addresses:{}}),p+=1}}return f}));return function(t){return e.apply(this,arguments)}}(),r.getAddress=function(){var e=a()((function*(e){var t,n=yield this.getHardwareSDKInstance(),r=yield this.getHardwareInfo(),i=r.connectId,o=r.deviceId,a=yield this.getChainInfoImplOptions(),c=yield this.getNetworkChainId(),u=yield this.getWalletPassphraseState(),s=yield n.polkadotGetAddress(i,o,P({path:e.path,prefix:a.addressPrefix,network:c,showOnOneKey:e.showOnOneKey},u));if(s.success&&null!=(t=s.payload)&&t.address)return s.payload.address;throw Object(x.a)(s.payload)}));return function(t){return e.apply(this,arguments)}}(),r.signTransaction=function(){var e=a()((function*(e,t){T.a.common.info("signTransaction",e);var n=yield this.getDbAccount(),r=this.vault,i=yield this.getNetworkChainId(),o=(yield r.serializeUnsignedTransaction(e.payload.encodedTx)).rawTx,a=yield this.getHardwareInfo(),c=a.connectId,u=a.deviceId,s=yield this.getWalletPassphraseState(),d=yield this.getHardwareSDKInstance(),l=yield d.polkadotSignTransaction(c,u,P({path:n.path,network:i,rawTx:Object(y.bytesToHex)(o)},s));if(l.success){var f=l.payload.signature,p=Object(v.a)(j.a.ed25519,Object(y.hexToBytes)(f)),h=yield r.serializeSignedTransaction(e.payload.encodedTx,Object(y.bytesToHex)(p));return Promise.resolve({txid:"",rawTx:h,signature:Object(O.a)(Object(y.bytesToHex)(p))})}throw Object(x.a)(l.payload)}));return function(t,n){return e.apply(this,arguments)}}(),u()(n)}(b.a)},4657:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F}));var r=n(10),i=n.n(r),o=n(2),a=n.n(o),c=n(3),u=n.n(c),s=n(6),d=n.n(s),l=n(9),f=n.n(l),p=n(12),h=n.n(p),y=n(5),v=n.n(y),g=n(59),m=n(3525),w=n(974),b=n(3948),O=n(87),x=n(19),I=n(184),T=n(950),j=n(89),k=n(3095),P=n(293),C=n(11),A=n(20),R=n(3719),E=n(3999);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var B="m/44'/"+C.l+"'",F=function(t){f()(r,t);var n=D(r);function r(){return n.apply(this,arguments)}var o=r.prototype;return o.getChainInfo=function(){var e=u()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getChainInfoImplOptions=function(){var e=u()((function*(){return(yield this.getChainInfo()).implOptions}));return function(){return e.apply(this,arguments)}}(),o.getPrivateKeys=function(){var t=u()((function*(t,n){var r=(yield this.getDbAccount()).path.split("/"),i=n||[r.pop()],o=r.join("/"),a=(yield this.engine.dbApi.getCredential(this.walletId,t)).entropy;if("undefined"===typeof a)throw new x.q("Unable to get credential.");var c=Object(m.mnemonicFromEntropy)(a,t);return i.map((function(n){var r=o+"/"+n,i=Object(E.a)(c,r);return{path:r,key:Object(O.f)(t,e.from(i.secretKey.slice(0,32)))}})).reduce((function(e,t){var n;return S(S({},e),{},((n={})[t.path]=t.key,n))}),{})}));return function(e,n){return t.apply(this,arguments)}}(),o.getSigners=function(){var e=u()((function*(e,t){var n,r=yield this.getDbAccount(),i=r.address;if(1!==t.length)throw new x.q("Polkadot signers number should be 1.");if(t[0]!==i)throw new x.q("Wrong address required for signing.");var o=(yield this.getPrivateKeys(e))[r.path];if("undefined"===typeof o)throw new x.q("Unable to get signer.");return(n={})[i]=new T.b(o,e,"ed25519"),n}));return function(t,n){return e.apply(this,arguments)}}(),o.prepareAccounts=function(){var e=u()((function*(e){var t=e.password,n=e.indexes,r=e.names,i=(yield this.engine.dbApi.getCredential(this.walletId,t)).entropy,o=Object(m.mnemonicFromEntropy)(i,t),a=n.map((function(e){var t=B+"/"+e+"'/0'/0'";return{path:t,pubkey:Object(E.a)(o,t).publicKey}}));if(a.length!==n.length)throw new x.q("Unable to get public key.");var c=[],u=0;for(var s of a){var d=s.path,l=s.pubkey,f=Object(I.a)(C.H).default.prefix,p=(r||[])[u]||f+" #"+(n[u]+1);c.push({id:this.walletId+"--"+d,name:p,type:j.b.VARIANT,path:d,coinType:C.l,pub:Object(g.bytesToHex)(l),address:"",addresses:{}}),u+=1}return c}));return function(t){return e.apply(this,arguments)}}(),o.signTransaction=function(){var t=u()((function*(t,n){var r,o;A.a.common.info("signTransaction result",t);var a=yield this.getDbAccount(),c=this.vault,u=(yield c.serializeUnsignedTransaction(t.payload.encodedTx)).hash,s=(yield this.getSigners(n.password||"",[a.address]))[a.address];if(!(null==(r=t.inputs)||null==(o=r[0])?void 0:o.publicKey))throw new x.q("Unable to get sender public key.");var d=yield s.sign(e.from(u)),l=i()(d,1)[0],f=Object(w.a)(R.a.ed25519,Object(b.a)(l)),p=yield c.serializeSignedTransaction(t.payload.encodedTx,Object(g.bytesToHex)(f));return Promise.resolve({txid:"",rawTx:p,signature:Object(P.a)(Object(g.bytesToHex)(f))})}));return function(e,n){return t.apply(this,arguments)}}(),o.signMessage=function(){var e=u()((function*(e,t){var n=yield this.getDbAccount(),r=(yield this.getSigners(t.password||"",[n.address]))[n.address],o=this.vault;return Promise.all(e.map(function(){var e=u()((function*(e){var t=yield o.serializeMessage(e.message),n=yield r.sign(t),a=i()(n,1)[0],c=Object(w.a)(R.a.ed25519,Object(b.a)(a));return Object(P.a)(Object(g.bytesToHex)(c))}));return function(t){return e.apply(this,arguments)}}()))}));return function(t,n){return e.apply(this,arguments)}}(),d()(r)}(k.a)}).call(this,n(22).Buffer)},4658:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var r=n(10),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),l=n(12),f=n.n(l),p=n(5),h=n.n(p),y=n(59),v=n(3526),g=n(974),m=n(3948),w=n(19),b=n(950),O=n(89),x=n(3096),I=n(293),T=n(11),j=n(20),k=n(3719);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var C=function(t){d()(r,t);var n=P(r);function r(){return n.apply(this,arguments)}var o=r.prototype;return o.getChainInfo=function(){var e=a()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getChainInfoImplOptions=function(){var e=a()((function*(){return(yield this.getChainInfo()).implOptions}));return function(){return e.apply(this,arguments)}}(),o.getSigners=function(){var e=a()((function*(e,t){var n,r=yield this.getDbAccount(),i=r.address;if(1!==t.length)throw new w.q("Cosmos signers number should be 1.");if(t[0]!==i)throw new w.q("Wrong address required for signing.");var o=(yield this.getPrivateKeys(e))[r.path];if("undefined"===typeof o)throw new w.q("Unable to get signer.");return(n={})[i]=new b.b(o,e,"ed25519"),n}));return function(t,n){return e.apply(this,arguments)}}(),o.prepareAccounts=function(){var e=a()((function*(e){var t=e.privateKey,n=e.name;if(32!==t.length)throw new w.q("Invalid private key.");var r=v.ed25519.publicFromPrivate(t).toString("hex");return Promise.resolve([{id:"imported--"+T.l+"--"+r,name:n||"",type:O.b.VARIANT,path:"",coinType:T.l,pub:r,address:"",addresses:{}}])}));return function(t){return e.apply(this,arguments)}}(),o.signTransaction=function(){var t=a()((function*(t,n){var r,o;j.a.common.info("signTransaction result",t);var a=yield this.getDbAccount(),c=this.vault,u=(yield c.serializeUnsignedTransaction(t.payload.encodedTx)).hash,s=(yield this.getSigners(n.password||"",[a.address]))[a.address];if(!(null==(r=t.inputs)||null==(o=r[0])?void 0:o.publicKey))throw new w.q("Unable to get sender public key.");var d=yield s.sign(e.from(u)),l=i()(d,1)[0],f=Object(g.a)(k.a.ed25519,Object(m.a)(l)),p=yield c.serializeSignedTransaction(t.payload.encodedTx,Object(y.bytesToHex)(f));return Promise.resolve({txid:"",rawTx:p,signature:Object(I.a)(Object(y.bytesToHex)(f))})}));return function(e,n){return t.apply(this,arguments)}}(),o.signMessage=function(){var e=a()((function*(e,t){var n=yield this.getDbAccount(),r=(yield this.getSigners(t.password||"",[n.address]))[n.address],o=this.vault;return Promise.all(e.map(function(){var e=a()((function*(e){var t=yield o.serializeMessage(e.message),n=yield r.sign(t),a=i()(n,1)[0],c=Object(g.a)(k.a.ed25519,Object(m.a)(a));return Object(I.a)(Object(y.bytesToHex)(c))}));return function(t){return e.apply(this,arguments)}}()))}));return function(t,n){return e.apply(this,arguments)}}(),u()(r)}(x.a)}).call(this,n(22).Buffer)},4659:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),l=n(5),f=n.n(l),p=n(19),h=n(89),y=n(3097),v=n(11);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var m=function(e){u()(n,e);var t=g(n);function n(){return t.apply(this,arguments)}return n.prototype.prepareAccounts=function(){var e=i()((function*(e){var t,n=e.name,r=e.target,i=e.accountIdPrefix,o=yield this.vault.validateAddress(r);if("undefined"===typeof o)throw new p.f;return Promise.resolve([{id:i+"--"+v.l+"--"+r,name:n||"",type:h.b.VARIANT,path:"",coinType:v.l,pub:"",address:"",addresses:(t={},t[this.networkId]=o,t)}])}));return function(t){return e.apply(this,arguments)}}(),a()(n)}(y.a)},4660:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(293),i=n(4661),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:42;return"string"===typeof e&&Object(r.c)(Object(r.a)(e))?i.a.fromPublicKey(Object(r.d)(e),t):"string"===typeof e?i.a.fromEncoded(e):e}},4661:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(6),i=n.n(r),o=n(68),a=n.n(o),c=n(293),u=n(4662),s=function(){function t(e,t,n){this.version=e,this.payload=t,this.checksum=n,this.version=e,this.payload=t,this.checksum=n}t.createPlaceholder=function(){if(!t.placeholder){var n=new Uint8Array(32);n.fill(0),t.placeholder=new t(e.from([0]),e.from(n),e.from([0,0]))}return t.placeholder},t.from=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:42;return"string"===typeof e&&Object(c.c)(Object(c.a)(e))?t.fromPublicKey(e,n):"string"===typeof e?t.fromEncoded(e):e},t.fromPublicKey=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:42;return"string"===typeof n?t.fromPayload(e.from(n,"hex"),r):t.fromPayload(n,r)},t.fromEncoded=function(e){return t.fromBytes(a.a.decode(e))},t.fromBytes=function(n){var r=e.isBuffer(n)?n:e.from(n),i=35===r.length?2:1;return new t(r.slice(0,1),r.slice(1,-i),r.slice(-i))},t.fromPayload=function(n,r){var i=e.from([r]),o=this.generateChecksum(e.concat([i,n])),a=32===n.length?2:1;return new t(i,n,o.slice(0,a))},t.generateChecksum=function(t){var n=e.from("SS58PRE");return e.from(Object(u.a)(e.concat([n,t]),512))};var n=t.prototype;return n.compare=function(t){return"string"===typeof t&&Object(c.c)(t)?this.payload.compare(e.from(t,"hex")):"string"===typeof t?this.getValue().localeCompare(t):this.payload.compare(t.payload)},n.getValue=function(){return this.encoded||(this.encoded=a.a.encode(e.concat([this.version,this.payload,this.checksum]))),this.encoded},n.getBufferBytes=function(){return this.payload},n.getHexBytes=function(){return this.payload.toString("hex")},i()(t)}()}).call(this,n(22).Buffer)},4662:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(1874);n(59),n(293);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Math.ceil(t/8),o=r.blake2b.create({dkLen:i,key:n.key});return o.update(e),o.digest()}}).call(this,n(22).Buffer)},4896:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(10),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),l=n(12),f=n.n(l),p=n(5),h=n.n(p),y=n(78),v=n.n(y),g=n(126),m=n.n(g),w=n(19),b=n(174),O=u()((function(){}));function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var I=function(e){d()(n,e);var t=x(n);function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).cacheRequest=m()(function(){var t=a()((function*(t,n,r){return e.request(t,n,r)}));return function(e,n,r){return t.apply(this,arguments)}}(),{promise:!0,max:10,normalizer:function(e){var t=i()(e,3),n=t[0],r=t[1],o=t[2];return n+"-"+r+"-"+JSON.stringify(o)},maxAge:5e3}),e}var r=n.prototype;return r.getBaseUrl=function(e){return"https://"+Object(b.d)(e)+".api.subscan.io/api/scan"},r.postJson=function(){var e=a()((function*(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allowCache:!0};return r.allowCache?this.cacheRequest(e,t,n):this.request(e,t,n)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.request=function(){var e=a()((function*(e,t,n){var r=this.getBaseUrl(e);return v.a.post(r+"/"+t,n,{headers:{"Content-Type":"application/json"}}).then((function(e){if(0===e.data.code)return e.data.data;throw new w.n("SubScanClient.postJson: "+e.data.message)}))}));return function(t,n,r){return e.apply(this,arguments)}}(),r.getTransaction=function(){var e=a()((function*(e,t){return this.postJson(e,"extrinsic",{hash:t})}));return function(t,n){return e.apply(this,arguments)}}(),r.getTransactions=function(){var e=a()((function*(e,t){return this.postJson(e,"extrinsics",{address:t,row:20,page:0}).then((function(e){var t;return null!=(t=e.extrinsics)?t:[]}))}));return function(t,n){return e.apply(this,arguments)}}(),u()(n)}(O)},5659:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return ce}));var r=n(158),i=n.n(r),o=n(2),a=n.n(o),c=n(789),u=n.n(c),s=n(10),d=n.n(s),l=n(430),f=n.n(l),p=n(146),h=n.n(p),y=n(3),v=n.n(y),g=n(6),m=n.n(g),w=n(9),b=n.n(w),O=n(12),x=n.n(O),I=n(5),T=n.n(I),j=n(3483),k=n(4563),P=n(5689),C=n(5663),A=n(5669),R=n(3327),E=n(3953),N=n(974),S=n(2081),D=n(1187),B=n(516),F=n(3324),H=n(4564),_=n(26),M=n.n(_),U=n(126),K=n.n(U),V=n(19),q=n(56),L=n(465),z=n(293),W=n(3093),G=n(43),J=n(3073),X=n(20),Q=n(4656),$=n(4657),Z=n(4658),Y=n(4659),ee=n(4660),te=n(2111),ne=n(4896),re=n(3999);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T()(e);if(t){var i=T()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var ce=function(t){b()(r,t);var n=ae(r);function r(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).keyringMap={hd:$.a,hw:Q.a,imported:Z.a,watching:Y.a,external:Y.a},e.settings=te.default,e.getScanClientCache=K()(v()((function*(){return new ne.a})),{promise:!0,max:1}),e.getRPCRuntimeVersionCache=K()(v()((function*(){return(yield e.getApiClient()).rpc.state.getRuntimeVersion()})),{promise:!0,primitive:!0,max:1,normalizer:function(){return""+e.networkId}}),e.getGenesisHashCache=K()(v()((function*(){return(yield e.getApiClient()).rpc.chain.getBlockHash(0)})),{promise:!0,primitive:!0,max:1,normalizer:function(){return""+e.networkId}}),e.getMetadataRpcCache=K()(v()((function*(){return(yield e.getApiClient()).rpc.state.getMetadata()})),{promise:!0,primitive:!0,max:1,normalizer:function(){return""+e.networkId}}),e.getRegistryCache=K()(function(){var t=v()((function*(t){var n,r,i,o=yield e.getNetwork();if(n=h()(t.metadataRpc)||f()(t.metadataRpc)?(yield e.getMetadataRpcCache()).toHex():t.metadataRpc,!t.specVersion||f()(t.specVersion)||!t.specName||f()(t.specName)){var a=yield e.getRPCRuntimeVersionCache();r=a.specVersion.toNumber(),i=a.specName.toString()}else r=Object(E.a)(Object(z.a)(t.specVersion)),i=t.specName;return Object(H.getRegistry)({chainName:o.name,specName:i,specVersion:r,metadataRpc:n})}));return function(e){return t.apply(this,arguments)}}(),{promise:!0,max:1,normalizer:function(){return""+e.networkId}}),e.getMinDepositAmountCache=K()(v()((function*(){return(yield e.getApiClient()).consts.balances.existentialDeposit.toString()})),{promise:!0,primitive:!0,max:1,normalizer:function(){return""+e.networkId}}),e.getNodeProvider=function(e){return"wss:"===new URL(e).protocol?new P.a(e):new C.a(e)},e.getNodeClient=function(){var t=v()((function*(t){var n=e.getNodeProviderCache(t);return A.a.create({provider:n,initWasm:!1})}));return function(e){return t.apply(this,arguments)}}(),e.getNodeProviderCache=K()((function(t){return e.getNodeProvider(t)}),{primitive:!0,max:1,normalizer:function(e){return d()(e,1)[0]},dispose:function(){var e=v()((function*(e){yield e.disconnect()}));return function(t){return e.apply(this,arguments)}}()}),e.getClientCache=K()(function(){var t=v()((function*(t){return e.getNodeClient(t)}));return function(e){return t.apply(this,arguments)}}(),{promise:!0,primitive:!0,max:1,normalizer:function(e){return d()(e,1)[0]},dispose:function(){var e=v()((function*(e){yield e.disconnect()}));return function(t){return e.apply(this,arguments)}}()}),e}var o=r.prototype;return o.getApiClient=function(){var e=v()((function*(){var e=(yield this.engine.getNetwork(this.networkId)).rpcURL;return this.getClientCache(e)}));return function(){return e.apply(this,arguments)}}(),o.getClient=function(){var e=v()((function*(){return(yield this.getChainVault()).getApiClient()}));return function(){return e.apply(this,arguments)}}(),o.getChainVault=function(){var e=v()((function*(){return this.engine.getChainOnlyVault(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getScanClient=function(){var e=v()((function*(){return this.getScanClientCache()}));return function(){return e.apply(this,arguments)}}(),o.getChainInfo=function(){var e=v()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getChainInfoImplOptions=function(){var e=v()((function*(){return(yield this.getChainInfo()).implOptions}));return function(){return e.apply(this,arguments)}}(),o.addressFromAccountId=function(){var e=v()((function*(e){var t;if(h()(e)||f()(e))return"";var n=yield this.getChainInfoImplOptions();return Object(ee.a)(e,null!=(t=null==n?void 0:n.addressPrefix)?t:0).getValue()}));return function(t){return e.apply(this,arguments)}}(),o.addressFromBase=function(){var e=v()((function*(e){var t,n=e,r=null==(t=n.addresses[this.networkId])?void 0:t.trim();return h()(r)||f()(r)?this.addressFromAccountId(n.pub):n.addresses[this.networkId]}));return function(t){return e.apply(this,arguments)}}(),o.createClientFromURL=function(e){throw new V.l},o.getClientEndpointStatus=function(){var e=v()((function*(e){if("wss:"===new URL(e).protocol){var t=new WebSocket(e);return new Promise((function(e,n){t.onopen=function(){var r=performance.now();t.send('{"id":1,"jsonrpc":"2.0","method":"chain_getHeader","params":[]}'),t.onmessage=function(n){var i=JSON.parse(n.data);if(1===i.id){var o=Math.floor(performance.now()-r);t.OPEN&&t.close(),e({responseTime:o,latestBlock:Object(E.a)(i.result.number)})}else t.OPEN&&t.close()},t.onerror=function(e){t.OPEN&&t.close(),n(e)}}}))}var n=this.getNodeProvider(e),r=performance.now(),i=yield n.send("chain_getHeader",[]);return{responseTime:Math.floor(performance.now()-r),latestBlock:Object(E.a)(i.number)}}));return function(t){return e.apply(this,arguments)}}(),o._getPublicKey=function(){var e=v()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prefix,n=void 0===t||t,r=yield this.getDbAccount(),i=r.pub;return n&&(i=Object(z.a)(i)),Promise.resolve(i)}));return function(){return e.apply(this,arguments)}}(),o.validateAddress=function(){var e=v()((function*(e){var t=yield this.getChainInfoImplOptions();return new RegExp(t.addressRegex).test(e)?Promise.resolve(e):Promise.reject(new V.f)}));return function(t){return e.apply(this,arguments)}}(),o.validateWatchingCredential=function(){var e=v()((function*(e){var t=this;return this.validateAddress(e).then((function(e){return t.settings.watchingAccountEnabled&&!!e})).catch((function(){return!1}))}));return function(t){return e.apply(this,arguments)}}(),o.getBalances=function(){var e=v()((function*(e){var t=yield this.getClient(),n=u()(e,(function(e){return e.address}));return Promise.all(Object.entries(n).map(function(){var e=v()((function*(e){var n=d()(e,2),r=n[0];n[1];try{var i=(yield t.query.system.account(r)).data.free;return new M.a(i.toString())}catch(o){return}}));return function(t){return e.apply(this,arguments)}}()))}));return function(t){return e.apply(this,arguments)}}(),o.buildEncodedTxFromTransfer=function(){var e=v()((function*(e){var t,n,r=e.to,i=e.amount,o=e.token,a=(yield this.getDbAccount()).address,c=yield this.getClient(),u=(yield c.rpc.chain.getBlock()).block,s=yield c.rpc.chain.getBlockHash(),d=yield this.getChainVault(),l=yield d.getGenesisHashCache(),f=yield d.getMetadataRpcCache(),p=yield d.getRPCRuntimeVersionCache(),h=p.specVersion,y=p.specName,v=p.transactionVersion,g=yield c.call.accountNonceApi.accountNonce(a),m=yield this.getNetwork(),w=yield d.getRegistryCache({metadataRpc:f.toHex(),specVersion:h.toHex(),specName:y.toString()}),b={address:a,blockHash:s.toHex(),blockNumber:w.createType("BlockNumber",u.header.number).toNumber(),eraPeriod:64,genesisHash:l.toHex(),metadataRpc:f.toHex(),nonce:parseInt(g.toString()),specVersion:h.toNumber(),tip:0,transactionVersion:v.toNumber()},O={metadataRpc:f.toHex(),registry:w};if(o&&""!==o){var x=yield this.engine.ensureTokenInDB(this.networkId,o);if("undefined"===typeof x)throw new V.q("Failed to get token info.");t=new M.a(i).shiftedBy(x.decimals).toFixed(),n=null!=e&&e.keepAlive?H.methods.assets.transferKeepAlive({id:parseInt(o),target:r,amount:t},b,O):H.methods.assets.transfer({id:parseInt(o),target:r,amount:t},b,O)}else t=new M.a(i).shiftedBy(m.decimals).toFixed(),n=null!=e&&e.keepAlive?H.methods.balances.transferKeepAlive({value:t,dest:r},b,O):H.methods.balances.transfer({value:t,dest:r},b,O);return oe(oe({},n),{},{specName:y.toString()})}));return function(t){return e.apply(this,arguments)}}(),o.decodedTxToLegacy=function(e){return Promise.resolve({})},o.decodeTx=function(){var e=v()((function*(e,t){var n,r=yield this.engine.getNetwork(this.networkId),i=yield this.getDbAccount(),o=yield this.engine.getNativeTokenInfo(this.networkId),a=yield this.decodeUnsignedTx(e),c=null,u=Object(re.c)(a);if(u===q.a.NATIVE_TRANSFER||u===q.a.TOKEN_TRANSFER){var s,l=u===q.a.TOKEN_TRANSFER,f=i.address,p="nativeTransfer",h="",y="";if(l){var v,g=a.method.args,m=g.dest.id,w=g.amount;if(h=m,y=null!=(v=null==w?void 0:w.toString())?v:"0",p="tokenTransfer",!(o=yield this.engine.ensureTokenInDB(this.networkId,""))){var b=yield this.fetchTokenInfos([""]),O=d()(b,1)[0];if(O&&(o={id:"1",isNative:!1,networkId:this.networkId,tokenIdOnNetwork:"",name:O.name,symbol:O.symbol,decimals:O.decimals,logoURI:""}),!o)throw new Error("Invalid token address")}}else{var x,I=a.method.args,T=I.dest.id,j=I.value;h=T,y=null!=(x=null==j?void 0:j.toString())?x:"0"}var k={tokenInfo:o,from:null!=f?f:"",to:h,amount:new M.a(y).shiftedBy(-o.decimals).toFixed(),amountValue:y,extraInfo:null};(s={type:u})[p]=k,c=s}else c={type:q.a.UNKNOWN,direction:q.b.OTHER,unknownAction:{extraInfo:{}}};var P={txid:"",owner:i.address,signer:i.address,nonce:a.nonce,actions:[c],status:q.c.Pending,networkId:this.networkId,accountId:this.accountId,feeInfo:null!=(n=null==e?void 0:e.feeInfo)?n:{price:Object(L.d)({value:"1",network:r}),limit:"1"},extraInfo:null,encodedTx:e};return Promise.resolve(P)}));return function(t,n){return e.apply(this,arguments)}}(),o.fetchFeeInfo=function(){var e=v()((function*(e,t){var n=yield this.getNetwork(),r=yield this.getClient(),i=(yield r.derive.tx.signingInfo(e.address,e.nonce,parseInt(e.era)),Object(N.a)(new Uint8Array([1]),new Uint8Array(64).fill(66))),o=yield this.serializeSignedTransaction(e,Object(S.a)(i)),a=Object(D.a)(o),c=(yield r.call.transactionPaymentApi.queryInfo(a,a.length)).toJSON().partialFee.toString(),u=new M.a(c).toFixed(0).toString();return{disableEditFee:!0,nativeSymbol:n.symbol,nativeDecimals:n.decimals,feeSymbol:n.feeSymbol,feeDecimals:n.feeDecimals,limit:u,prices:[Object(L.d)({value:"1",network:n})],defaultPresetIndex:"0"}}));return function(t,n){return e.apply(this,arguments)}}(),o.attachFeeInfoToEncodedTx=function(){var e=v()((function*(e){var t=e.feeInfoValue,n=t.price,r=t.limit;if(!n||"string"!==typeof n)throw new V.q("Invalid gas price.");if("string"!==typeof r)throw new V.q("Invalid fee limit");var i=yield this.getNetwork();Object(L.c)({value:n,network:i});return Promise.resolve(oe(oe({},e.encodedTx),{},{feeInfo:{price:n,limit:r}}))}));return function(t){return e.apply(this,arguments)}}(),o.specialCheckEncodedTx=function(){var e=v()((function*(e){var t=yield this.getAccountBalance([]),n=d()(t,1)[0],r=yield this.decodeUnsignedTx(e);if(Object(re.c)(r)===q.a.NATIVE_TRANSFER){var i,o,a,c,u,s,l,f=r.method.args,p=f.dest.id,h=f.value;if(p===e.address)return Promise.resolve({success:!0});var y,v=yield G.a.serviceToken.getMinDepositAmount({networkId:this.networkId,accountId:this.accountId}),g=yield this.getNetwork(),m=Object(J.i)(v,null,{unit:g.decimals}),w=Object(L.c)({value:null!=(i=null==e||null==(o=e.feeInfo)||null==(a=o.price)?void 0:a.toString())?i:"0",network:g}),b=new M.a(parseFloat(w)*parseFloat(null!=(c=null==e||null==(u=e.feeInfo)?void 0:u.limit)?c:"0")).toFixed(0);if(null!=n&&null!=(s=n.minus(null!=(l=null==h?void 0:h.toString())?l:"0"))&&s.minus(b).lt(v))return Promise.resolve({success:!1,key:"msg__error_dot_account_retention_prompt",params:{0:(null!=(y=m.amount)?y:"0")+" "+g.symbol}})}return Promise.resolve({success:!0})}));return function(t){return e.apply(this,arguments)}}(),o.updateEncodedTx=function(){var e=v()((function*(e,t,n){if("transfer"===n.type){var r=yield this.decodeUnsignedTx(e);if(Object(re.c)(r)===q.a.NATIVE_TRANSFER){var i,o;X.a.sendTx.debug("updateEncodedTx","send max amount");var a=r.method.args.dest.id,c=yield this.getChainVault(),u=yield c.getRegistryCache(e),s={address:r.address,blockHash:e.blockHash,blockNumber:Object(E.a)(Object(z.a)(e.blockNumber)),eraPeriod:64,genesisHash:e.genesisHash,metadataRpc:e.metadataRpc,nonce:Object(E.a)(Object(z.a)(e.nonce)),specVersion:Object(E.a)(Object(z.a)(e.specVersion)),tip:0,transactionVersion:Object(E.a)(Object(z.a)(e.transactionVersion))},d={metadataRpc:e.metadataRpc,registry:u},l=yield this.getNetwork(),f=new M.a(t.amount).shiftedBy(l.decimals).toFixed();return-1!==(null==(i=r.method)||null==(o=i.name)?void 0:o.indexOf("KeepAlive"))?H.methods.balances.transferKeepAlive({value:f,dest:a},s,d):H.methods.balances.transferAll({dest:a,keepAlive:!1},s,d)}}return Promise.resolve(e)}));return function(t,n,r){return e.apply(this,arguments)}}(),o.buildUnsignedTxFromEncodedTx=function(){var e=v()((function*(e){var t=yield this.getDbAccount();return Promise.resolve({inputs:[{address:Object(z.d)(t.address),value:new M.a(0),publicKey:Object(z.d)(t.pub)}],outputs:[],payload:{encodedTx:e},encodedTx:e})}));return function(t){return e.apply(this,arguments)}}(),o.broadcastTransaction=function(){var e=v()((function*(e){X.a.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});try{var t=yield this.getClient(),n=(yield t.rpc.author.submitExtrinsic(e.rawTx)).toHex();return X.a.engine.info("broadcastTransaction Done:",{txid:n,rawTx:e.rawTx}),oe(oe({},e),{},{txid:n})}catch(i){if(i instanceof V.q)throw i;var r=(i||{}).message;if(-1!==r.indexOf("Invalid Transaction: Inability to pay some fees"))throw new V.q(r,"msg__broadcast_dot_tx_Insufficient_fee");if(-1!==r.indexOf("Invalid Transaction: Transaction is outdated"))throw new V.q(r,"msg__broadcast_dot_tx_outdated");throw new V.q(r)}}));return function(t){return e.apply(this,arguments)}}(),o.getExportedCredential=function(){var e=v()((function*(e){var t=yield this.getDbAccount();if(t.id.startsWith("hd-")||t.id.startsWith("imported")){var n=this.keyring,r=Object.values(yield n.getPrivateKeys(e)),i=d()(r,1)[0];return"0x"+Object(j.decrypt)(e,i).toString("hex")}throw new V.q("Only credential of HD or imported accounts can be exported")}));return function(t){return e.apply(this,arguments)}}(),o.fetchOnChainHistory=function(){var e=v()((function*(e){var t=this,n=e.localHistory,r=void 0===n?[]:n;if(e.tokenIdOnNetwork)return Promise.resolve([]);var o=yield this.getScanClient(),a=yield this.getDbAccount(),c=(yield this.engine.getNativeTokenInfo(this.networkId)).decimals,u=(yield o.getTransactions(this.networkId,a.address)).map(function(){var e=v()((function*(e){var n=r.find((function(t){return t.decodedTx.txid===e.extrinsic_hash}));if(n&&n.decodedTx.isFinal)return Promise.resolve(null);try{var o,u=e.account_id,s=Object(re.b)(e.call_module,e.call_module_function),l={type:q.a.UNKNOWN};if(s===q.a.NATIVE_TRANSFER||s===q.a.TOKEN_TRANSFER){var f,p=JSON.parse(e.params),h="",y="0",v="0";if("transfer"===e.call_module_function||"transfer_keep_alive"===e.call_module_function){var g=d()(p,2),m=g[0],w=g[1];h=yield t.addressFromAccountId(i()(m,"value.Id","")),y=w.value.toString()}if("transfer_all"===e.call_module_function){var b=d()(p,1)[0];h=yield t.addressFromAccountId(i()(b,"value.Id","")),y="0"}if(s===q.a.TOKEN_TRANSFER){var O=d()(p,3),x=O[0],I=O[1],T=O[2];v=x.value.toString(),h=yield t.addressFromAccountId(i()(I,"value.Id","")),y=T.value.toString()}var j=s===q.a.TOKEN_TRANSFER,k=q.b.IN;u===a.address&&(k=h===a.address?q.b.SELF:q.b.OUT);var P=yield t.engine.getNativeTokenInfo(t.networkId),C="nativeTransfer";if(j&&(C="tokenTransfer","undefined"===typeof(P=yield t.engine.ensureTokenInDB(t.networkId,v))))throw new V.q("Failed to get token info.");(f={type:s,direction:k})[C]={tokenInfo:P,from:u,to:h,amount:new M.a(y).shiftedBy(-P.decimals).toFixed(),amountValue:y,extraInfo:null},l=f}var A=e.fee_used,R=e.success,E=q.c.Pending;!1===R?E=q.c.Failed:!0===R&&(E=q.c.Confirmed);var N={txid:e.extrinsic_hash,owner:a.address,signer:u,nonce:e.nonce,actions:[l],status:E,networkId:t.networkId,accountId:t.accountId,encodedTx:void 0,extraInfo:null,totalFeeInNative:new M.a(A).shiftedBy(-c).toFixed()};return N.updatedAt=1e3*e.block_timestamp,N.createdAt=null!=(o=null==n?void 0:n.decodedTx.createdAt)?o:N.updatedAt,N.isFinal=N.status===q.c.Confirmed,yield t.buildHistoryTx({decodedTx:N,historyTxToMerge:n})}catch(S){X.a.common.error(S)}return Promise.resolve(null)}));return function(t){return e.apply(this,arguments)}}());return(yield Promise.all(u)).filter(Boolean)}));return function(t){return e.apply(this,arguments)}}(),o.getTransactionStatuses=function(){var e=v()((function*(e){var t=this,n=yield this.getScanClient();return Promise.all(e.map(function(){var e=v()((function*(e){try{var r=yield n.getTransaction(t.networkId,e),i=k.TransactionStatus.PENDING;return!1===r.success?i=k.TransactionStatus.CONFIRM_BUT_FAILED:r.finalized&&(i=k.TransactionStatus.CONFIRM_AND_SUCCESS),yield Promise.resolve(i)}catch(a){var o=a.message;if("404"===o||"400"===o)return Promise.resolve(k.TransactionStatus.NOT_FOUND)}}));return function(t){return e.apply(this,arguments)}}()))}));return function(t){return e.apply(this,arguments)}}(),o.validateSendAmount=function(){var e=v()((function*(e,t,n){try{if(h()(e)||f()(e))return!0;var r=yield this.getNetwork(),i=yield G.a.serviceToken.getMinDepositAmount({networkId:this.networkId,accountId:this.accountId}),o=new M.a(i),a=new M.a(e).shiftedBy(r.decimals),c=yield this.getBalances([{address:n}]),u=d()(c,1)[0],s=Object(J.i)(o,null,{unit:r.decimals});if(!s.amount)return!1;if(null!=u&&u.plus(a).lt(o))throw new V.j("form__amount_recipient_activate",{amount:s.amount,unit:r.symbol});return!0}catch(l){throw l}}));return function(t,n,r){return e.apply(this,arguments)}}(),o.getMinDepositAmount=function(){var e=v()((function*(){return(yield this.getChainVault()).getMinDepositAmountCache()}));return function(){return e.apply(this,arguments)}}(),o.destroy=function(){var e=v()((function*(){yield this.getMetadataRpcCache.clear(),this.getNodeProviderCache.clear()}));return function(){return e.apply(this,arguments)}}(),o.decodeUnsignedTx=function(){var e=v()((function*(e){var t=yield this.getChainVault(),n=yield t.getRegistryCache(e),r=e.metadataRpc;return Object(H.decode)(e,{metadataRpc:r,registry:n})}));return function(t){return e.apply(this,arguments)}}(),o.serializeUnsignedTransaction=function(){var e=v()((function*(e){var t=e,n=t.metadataRpc,r=yield this.getChainVault(),i=yield r.getRegistryCache(t);i.setMetadata(Object(H.createMetadata)(i,n));var o=H.construct.signingPayload(t,{registry:i}),a=i.createType("ExtrinsicPayload",o,{version:R.EXTRINSIC_VERSION}).toU8a({method:!0}),c=a.length>256?i.hash(a):a;return{rawTx:a,hash:Object(B.a)(c)}}));return function(t){return e.apply(this,arguments)}}(),o.serializeMessage=function(){var t=v()((function*(t){var n=Object(F.f)(t);return e.from(Object(B.a)(n))}));return function(e){return t.apply(this,arguments)}}(),o.serializeSignedTransaction=function(){var e=v()((function*(e,t){var n=e.metadataRpc,r=yield this.getChainVault(),i=yield r.getRegistryCache(e);return H.construct.signedTx(e,Object(z.a)(t),{metadataRpc:n,registry:i})}));return function(t,n){return e.apply(this,arguments)}}(),o.encodeUnsignedTransaction=function(){var e=v()((function*(e){var t=yield this.getChainVault(),n=yield t.getRegistryCache(e);return H.construct.encodeUnsignedTransaction(e,{registry:n})}));return function(t){return e.apply(this,arguments)}}(),m()(r)}(W.a)}.call(this,n(22).Buffer)}}]);