(this.webpackJsonp=this.webpackJsonp||[]).push([[105],{3245:function(e,t,n){"use strict";n.r(t);var i=n(100),o=n(252),c=n(457),r=n(755),a=n(130),s=n(199),l=n(290),d=n(41),u=n(32),f=n(85),b=n(3),j=n.n(b),p=n(10),m=n.n(p),h=n(259),x=n.n(h),O=n(1),g=n(1139),v=n(479),_=n.n(v),C=n(429),y=n(291),w=n(11),M=n(43),I=n(39),S=n(47),D=n(392),k=n(393),P=n(103),A=n(72),L=n(179),T=n(573),W=n(178),E=n(3279),z=n(0),B=function(e){var t=e.closeOverlay,n=Object(O.useState)(""),i=m()(n,2),o=i[0],c=i[1],r=Object(C.a)(),a=Object(E.a)(),s=a.getClipboard,d=a.canGetClipboard,u=Object(W.f)().networkImpl;return Object(z.jsx)(l.a,{visible:!0,onClose:t,footerButtonProps:{primaryActionTranslationId:"action__add",primaryActionProps:{type:"primary"},onPrimaryActionPress:function(){var e=j()((function*(){var e=o.trim();if(/^wc:.+@.+\?.+/.test(e))T.a.openConnectToDappModal({uri:e});else if(e.length>0){e.startsWith("http://")||e.startsWith("https://")||(e="https://"+e);try{var n=new URL(e),i=n.hostname,c=n.origin;if(i.includes(".")||i.includes("localhost")){var a=yield M.a.serviceDapp.getActiveConnectedAccountsAsync({origin:c,impl:u});null!=a&&a.length?L.a.show({title:r.formatMessage({id:"msg__this_address_already_exists"})}):setTimeout(j()((function*(){yield M.a.serviceDapp.openConnectionModal({origin:c})})),600)}}catch(s){}}t()}));return function(){return e.apply(this,arguments)}}()},contentProps:{title:r.formatMessage({id:"title__add_site_connection"}),contentElement:Object(z.jsx)(k.a,{rightCustomElement:d?Object(z.jsx)(P.a,{type:"plain",onPress:j()((function*(){var e=yield s();e&&c(e)})),children:Object(z.jsx)(A.a,{color:"text-success",children:r.formatMessage({id:"action__paste"})})}):null,autoFocus:!0,w:"full",mt:"2",type:"text",placeholder:r.formatMessage({id:"form__start_with_wc_or_https_placeholder"}),value:o,onChangeText:function(e){c(e)}})}})},R=n(1143),N=n(1162),V=Object(O.memo)((function(e){var t=e.connections,n=e.onAddConnectSite,i=e.onDisConnectWalletConnected,o=Object(C.a)(),c=Object(W.f)(),r=c.accountId,l=c.networkId,b=c.walletId,p=Object(O.useState)((function(){return[]})),h=m()(p,2),x=h[0],v=h[1],_=Object(W.h)((function(e){return e.refresher.refreshConnectedSitesTs}));Object(O.useEffect)((function(){var e=function(){var e=j()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;yield Object(S.g)(e);var t=yield M.a.serviceDapp.getWalletConnectSession();v((function(){return t?[t]:[]}))}));return function(){return e.apply(this,arguments)}}();e(),e(600)}),[t,_,r,l,b]);var w=Object(O.useCallback)((function(e){var t,n,o,c,r,l,f,b=e.item,p=e.index,m=null!=(t=null!=(n=null==(o=b.peerMeta)?void 0:o.name)?n:null==(c=b.peerMeta)?void 0:c.url)?t:"",h=null!=(r=null==b||null==(l=b.peerMeta)?void 0:l.icons[0])?r:"";return Object(z.jsx)(a.a,{children:Object(z.jsx)(u.a,{padding:"16px",height:"76px",width:"100%",bgColor:"surface-default",borderTopRadius:0===p?"12px":"0px",borderRadius:p===(null==x?void 0:x.length)-1?"12px":"0px",borderWidth:1,borderTopWidth:0===p?1:0,borderBottomWidth:p===(null==x?void 0:x.length)-1?1:0,borderColor:"border-subdued",children:Object(z.jsxs)(u.a,{alignItems:"center",flexDirection:"row",flex:1,children:[Object(z.jsx)(u.a,{size:"32px",overflow:"hidden",rounded:"full",children:Object(z.jsx)(g.a,{w:"full",h:"full",src:h,alt:h},h)}),Object(z.jsxs)(u.a,{ml:"3",flex:1,children:[Object(z.jsx)(d.h.Body2Strong,{noOfLines:2,children:m}),Object(z.jsx)(d.h.Body2,{color:"text-subdued",children:Object(y.b)(null!=(f=b.accounts[0])?f:"")+"\xb7 EVM"})]}),Object(z.jsx)(s.a,{name:"XCircleMini",type:"plain",circle:!0,onPress:function(){i(m,j()((function*(){yield M.a.walletConnect.disconnect()})))}})]})})})}),[i,x.length]);return Object(z.jsx)(u.a,{children:Object(z.jsx)(R.b,{renderItem:w,data:x,ListHeaderComponent:Object(z.jsxs)(u.a,{flexDirection:"column",children:[Object(z.jsxs)(u.a,{flexDirection:"row",alignItems:"center",justifyContent:"space-around",flex:1,children:[Object(z.jsx)(P.a,{type:"basic",leftIconName:"PlusMini",iconSize:20,size:"lg",flex:1,mr:"4",onPress:n,children:o.formatMessage({id:"action__add"})}),Object(z.jsx)(P.a,{type:"basic",size:"lg",flex:1,leftIconName:"ViewfinderCircleMini",iconSize:20,onPress:function(){Object(N.a)()},children:o.formatMessage({id:"action__scan"})})]}),Object(z.jsxs)(u.a,{flexDirection:"row",alignItems:"center",mb:1,mt:3,flex:1,children:[Object(z.jsx)(f.a,{name:"WalletconnectLogoIllus"}),Object(z.jsx)(d.h.Subheading,{ml:"2",color:"text-subdued",children:o.formatMessage({id:"form__walletconnect__uppercase"})})]})]}),ListFooterComponent:Object(z.jsx)(u.a,{display:"flex",flexDirection:"row",alignItems:"center",flex:1,mb:"1",mt:"6",children:Object(z.jsx)(d.h.Subheading,{color:"text-subdued",children:o.formatMessage({id:"title__connect_sites"})})}),ListEmptyComponent:Object(z.jsx)(a.a,{borderRadius:"12",flexDirection:"row",p:"4",alignItems:"center",bg:"surface-default",onPress:function(){Object(N.a)()},children:Object(z.jsxs)(u.a,{display:"flex",alignItems:"center",flexDirection:"row",flex:1,children:[Object(z.jsx)(u.a,{alignItems:"center",justifyContent:"center",size:"32px",overflow:"hidden",rounded:"full",backgroundColor:"surface-neutral-default",children:Object(z.jsx)(f.a,{name:"ViewfinderCircleMini",size:20})}),Object(z.jsx)(d.h.Body2Strong,{ml:"3",children:o.formatMessage({id:"action__scan_to_connect"})})]})})})})})),G=function(e){switch(e){case w.M:return"Solana";case w.I:case w.L:case w.A:case w.E:case w.N:case w.Q:return e.toUpperCase();default:return""}};function H(e){var t=e.item,n=Object(O.useState)(t.site.icon),i=m()(n,2),o=i[0],c=i[1];return Object(O.useEffect)((function(){t.site.icon||j()((function*(){yield Object(S.g)(0);var e=yield M.a.serviceDapp.getWalletConnectSession();c((function(){var n,i;return e&&(null==(n=e.peerMeta)?void 0:n.url)===t.site.origin?null==(i=e.peerMeta)?void 0:i.icons[0]:t.site.origin+"/favicon.ico"}))}))()}),[t.site.origin,t.site.icon]),Object(z.jsx)(u.a,{size:"32px",overflow:"hidden",rounded:"full",children:Object(z.jsx)(g.a,{w:"full",h:"full",src:o,alt:o,fallbackElement:Object(z.jsx)(f.a,{name:"LinkOutline",size:32})},o)})}function U(e){var t=e.item,n=M.a.serviceDapp,i=Object(I.d)(),o=i.accountId,c=i.networkId,r=i.walletId,a=Object(O.useState)(t.address),s=m()(a,2),l=s[0],u=s[1];return Object(O.useEffect)((function(){j()((function*(){var e;yield Object(S.g)(0);var i=yield n.getActiveConnectedAccountsAsync({origin:t.site.origin,impl:t.networkImpl}),o=null==i||null==(e=i[0])?void 0:e.address;u(o)}))()}),[t.networkImpl,t.site.origin,n,o,c,r]),Object(z.jsx)(d.h.Body2,{color:"text-subdued",numberOfLines:1,children:Object(y.b)(l)+"\xb7 "+G(t.networkImpl)})}var F=n(3750),J=n(456),X=Object(J.a)(),Q=[{name:F.a.ManageConnectedSitesModel,component:function(){var e=Object(C.a)(),t=Object(I.e)((function(e){return e.dapp.connections})),n=Object(O.useMemo)((function(){return function(e){var t=x()(e),n=[],i=new Map;for(var o of t){var c=o.site.origin+o.address+o.networkImpl;i.has(c)||(o.site.hostname=new URL(o.site.origin).hostname,n.push(o),i.set(c,1))}return n.sort((function(e,t){return _()({insensitive:!0})(e.site.hostname,t.site.hostname)}))}(t)}),[t]),i=Object(O.useCallback)((function(t,n){Object(D.a)((function(i){return Object(z.jsx)(l.a,{visible:!0,onClose:i,footerButtonProps:{primaryActionTranslationId:"action__disconnect",primaryActionProps:{type:"destructive",onPromise:function(){var e=j()((function*(){yield n(),i()}));return function(){return e.apply(this,arguments)}}()},wrap:!0},contentProps:{iconType:"danger",iconName:"ConnectOffOutline",title:e.formatMessage({id:"dialog__disconnect_from_this_site"}),content:e.formatMessage({id:"dialog__disconnect_all_accounts_desc"},{0:t})}})}))}),[e]),b=Object(O.useCallback)((function(){Object(D.a)((function(e){return Object(z.jsx)(B,{closeOverlay:e})}))}),[]),p=Object(O.useCallback)((function(e){var t=e.item,o=e.index;return Object(z.jsx)(a.a,{children:Object(z.jsx)(u.a,{padding:"16px",height:"76px",width:"100%",bgColor:"surface-default",borderTopRadius:0===o?"12px":"0px",borderRadius:o===(null==n?void 0:n.length)-1?"12px":"0px",borderWidth:1,borderTopWidth:0===o?1:0,borderBottomWidth:o===(null==n?void 0:n.length)-1?1:0,borderColor:"border-subdued",children:Object(z.jsxs)(u.a,{flexDirection:"row",flex:1,alignItems:"center",children:[Object(z.jsx)(H,{item:t}),Object(z.jsxs)(u.a,{flexDirection:"column",ml:"3",justifyContent:"center",flex:1,children:[Object(z.jsx)(d.h.Body1Strong,{children:t.site.hostname}),Object(z.jsx)(U,{item:t})]}),Object(z.jsx)(s.a,{name:"XCircleMini",type:"plain",circle:!0,onPress:function(){i(t.site.origin,j()((function*(){yield M.a.serviceDapp.cancellConnectedSite(t)})))}})]})})})}),[i,null==n?void 0:n.length]),m=Object(O.useCallback)((function(){return Object(z.jsx)(V,{connections:t,onDisConnectWalletConnected:i,onAddConnectSite:b})}),[t,i,b]);return Object(z.jsx)(o.b,{hidePrimaryAction:!0,maxHeight:"560px",header:e.formatMessage({id:"title__connect_sites"}),footer:null,flatListProps:{ListHeaderComponent:m,data:n,renderItem:p,ListEmptyComponent:Object(z.jsx)(u.a,{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"350px",children:Object(z.jsx)(r.a,{icon:Object(z.jsx)(f.a,{name:"InboxOutline",size:48}),title:e.formatMessage({id:"empty__no_connected_sites"}),subTitle:e.formatMessage({id:"empty__no_connected_sites_desc"})})}),ItemSeparatorComponent:c.a,showsVerticalScrollIndicator:!1}})}}];t.default=function(){var e=Object(i.a)();return Object(z.jsx)(X.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:Q.map((function(e){return Object(z.jsx)(X.Screen,{name:e.name,component:e.component},e.name)}))})}},3279:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(179),o=n(1),c=n(429),r=n(1144),a=n(14);function s(){var e=Object(c.a)(),t=a.a.canGetClipboard;return{copyText:Object(o.useCallback)((function(t,n){t&&(Object(r.a)(t),i.a.show({title:e.formatMessage({id:n||"msg__copied"})}))}),[e]),getClipboard:r.b,canGetClipboard:t}}},3750:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.ManageConnectedSitesModel="ManageConnectedSitesModal"}(i||(i={}))}}]);