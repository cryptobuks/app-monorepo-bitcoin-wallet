(this.webpackJsonp=this.webpackJsonp||[]).push([[108,845],{3027:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalNavigatorRoutes",(function(){return m}));var r=n(2),o=n.n(r),c=n(100),a=n(1),i=n(292),s=n(463),l=n(145),u=n(760),d=n(456),b=n(0);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m,p=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3162))})),f=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3125))})),O=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3136))})),h=Object(s.a)((function(){return n.e(107).then(n.bind(null,3229))})),x=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3194))})),v=Object(s.a)((function(){return n.e(93).then(n.bind(null,3177))})),g=Object(s.a)((function(){return Promise.all([n.e(43),n.e(55)]).then(n.bind(null,3244))})),_=Object(s.a)((function(){return n.e(104).then(n.bind(null,3197))})),y=Object(s.a)((function(){return n.e(65).then(n.bind(null,3115))})),k=Object(s.a)((function(){return Promise.all([n.e(2),n.e(4),n.e(96)]).then(n.bind(null,3216))})),w=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3196))})),P=Object(s.a)((function(){return n.e(6).then(n.bind(null,3199))})),I=Object(s.a)((function(){return Promise.resolve().then(n.bind(null,1158))})),S=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(75)]).then(n.bind(null,3241))})),C=Object(s.a)((function(){return n.e(843).then(n.bind(null,3137))})),M=Object(s.a)((function(){return n.e(105).then(n.bind(null,3245))})),A=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3193))})),T=Object(s.a)((function(){return Promise.all([n.e(1),n.e(37)]).then(n.bind(null,3178))})),R=Object(s.a)((function(){return Promise.all([n.e(1),n.e(86)]).then(n.bind(null,3127))})),N=Object(s.a)((function(){return Promise.all([n.e(3),n.e(94)]).then(n.bind(null,3195))})),z=Object(s.a)((function(){return Promise.all([n.e(0),n.e(39),n.e(47)]).then(n.bind(null,3240))})),D=Object(s.a)((function(){return n.e(844).then(n.bind(null,3198))})),E=Object(s.a)((function(){return n.e(98).then(n.bind(null,3231))})),U=Object(s.a)((function(){return n.e(41).then(n.bind(null,3128))})),B=Object(s.a)((function(){return n.e(101).then(n.bind(null,3247))})),F=Object(s.a)((function(){return n.e(103).then(n.bind(null,3250))})),W=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(71)]).then(n.bind(null,3238))})),H=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3192))})),L=Object(s.a)((function(){return n.e(76).then(n.bind(null,3246))})),V=Object(s.a)((function(){return Promise.resolve().then(n.bind(null,955))})),X=Object(s.a)((function(){return Promise.all([n.e(5),n.e(15),n.e(48)]).then(n.bind(null,3237))})),q=Object(s.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3129))})),Q=Object(s.a)((function(){return Promise.resolve().then(n.bind(null,1159))})),J=Object(s.a)((function(){return n.e(102).then(n.bind(null,3234))})),Y=Object(s.a)((function(){return n.e(88).then(n.bind(null,3243))})),G=Object(s.a)((function(){return Promise.all([n.e(0),n.e(64)]).then(n.bind(null,3251))})),Z=Object(s.a)((function(){return n.e(42).then(n.bind(null,3242))})),K=Object(s.a)((function(){return n.e(81).then(n.bind(null,3248))}));!function(e){e.ReceiveTokenNavigator="ReceiveTokenNavigator",e.SendNavigator="SendNavigator"}(m||(m={}));var $=[{name:l.b.CreateAccount,component:O},{name:l.b.RecoverAccount,component:h},{name:l.b.Receive,component:U},{name:l.b.Send,component:H},{name:l.b.ScanQrcode,component:W},{name:l.b.BackupWallet,component:p},{name:l.b.TransactionDetail,component:q},{name:l.b.ManageToken,component:N},{name:l.b.SubmitRequest,component:V},{name:l.b.HistoryRequest,component:S},{name:l.b.Password,component:D},{name:l.b.OnekeyLiteReset,component:P},{name:l.b.OnekeyLiteChangePinInputPin,component:w},{name:l.b.DappConnectionModal,component:v},{name:l.b.Collectibles,component:f},{name:l.b.CreateWallet,component:x},{name:l.b.ManagerWallet,component:R},{name:l.b.ManagerAccount,component:T},{name:l.b.EnableLocalAuthentication,component:_},{name:l.b.ManageNetwork,component:A},{name:l.b.OnekeyHardware,component:k},{name:l.b.HardwareUpdate,component:I},{name:l.b.Discover,component:g},{name:l.b.Swap,component:X},{name:l.b.UpdateFeature,component:Q},{name:l.b.FiatPay,component:y},{name:l.b.AddressBook,component:Y},{name:l.b.ImportBackupPassword,component:C},{name:l.b.Staking,component:L},{name:l.b.ManageConnectedSites,component:M},{name:l.b.PushNotification,component:E},{name:l.b.Webview,component:J},{name:l.b.Revoke,component:B},{name:l.b.NFTMarket,component:z},{name:l.b.Overview,component:G},{name:l.b.CurrencySelect,component:K},{name:l.b.BulkSender,component:F},{name:l.b.Market,component:Z}],ee=Object(d.a)();t.default=Object(a.memo)((function(){var e=Object(c.a)(),t=Object(a.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1,presentation:"modal"},Object(u.a)({isVerticalLayout:e}))}),[e]);return Object(b.jsx)(i.a,{children:Object(b.jsx)(ee.Navigator,{screenOptions:t,children:$.map((function(e){return Object(b.jsx)(ee.Screen,{name:e.name,component:e.component},e.name)}))})})}))},4098:function(e,t,n){"use strict";n.r(t);var r=n(32),o=n(240),c=n(72),a=n(103),i=n(124),s=n(10),l=n.n(s),u=n(100),d=n(1),b=n(57),j=n(3066),m=n(429),p=n(3141),f=n(961),O=n(178),h=n(11),x=n(14),v=n(3239),g=n(172),_=n(3210),y=n(115),k=n(3111),w=n(130),P=n(754),I=n(43),S=n(0);function C(e){var t=e.networkId,n=Object(O.m)().allNetworks,a=Object(O.q)({networkId:t}).network,i=I.a.serviceNetwork,s=Object(m.a)(),l=n.filter((function(e){return!e.isTestnet&&e.enabled&&(null==e?void 0:e.settings.supportBatchTransfer)&&(e.impl!==h.I||e.impl===h.I&&f.a[e.id])})),u=Object(d.useCallback)((function(e){e.enabled&&i.changeActiveNetwork(e.id)}),[i]);return Object(S.jsx)(y.a,{children:Object(S.jsxs)(r.a,{maxW:"340px",children:[Object(S.jsx)(c.a,{fontSize:"56px",textAlign:"center",mt:8,children:"\ud83e\udd37\u200d\u2640\ufe0f"}),Object(S.jsx)(c.a,{typography:"DisplayMedium",mt:3,textAlign:"center",children:s.formatMessage({id:"title__str_network_is_not_supported_yet"},{chain:null==a?void 0:a.name})}),Object(S.jsx)(c.a,{typography:"Body1",color:"text-subdued",mt:2,textAlign:"center",children:s.formatMessage({id:"content__choose_a_supported_network"})}),Object(S.jsx)(o.a,{space:2,mt:6,flexWrap:"wrap",justifyContent:"center",children:l.map((function(e){return Object(S.jsx)(k.a,{label:null==e?void 0:e.name,placement:"top",children:Object(S.jsx)(w.a,{onPress:function(){return u(e)},children:Object(S.jsx)(r.a,{mb:3,children:Object(S.jsx)(P.c,{position:"relative",mb:3,size:8,token:{logoURI:null==e?void 0:e.logoURI}})})})},e.id)}))})]})})}var M=n(85),A=n(16),T=n.n(A),R=n(3),N=n.n(R),z=n(179),D=n(2),E=n.n(D),U=n(26),B=n.n(U),F=n(391),W=n(145),H=n(461),L=n(1154),V=n(393),X=n(392);function q(e){var t=e.onAmountChanged,n=e.closeOverlay,i=Object(d.useState)(""),s=l()(i,2),b=s[0],j=s[1],p=Object(d.useState)(!0),f=l()(p,2),O=f[0],h=f[1],x=Object(m.a)(),v=Object(u.a)();Object(d.useEffect)((function(){if(""!==b){var e=new B.a(b);h(e.isPositive())}else h(!0)}),[b]);var g=Object(d.useCallback)((function(){O&&(t(b),n())}),[b,n,O,t]);return Object(S.jsxs)(L.a,{closeOverlay:n,showCloseButton:!v,title:x.formatMessage({id:"action__edit_amount"}),children:[Object(S.jsx)(c.a,{typography:"Body1",color:"text-subdued",textAlign:"center",children:x.formatMessage({id:"content__this_will_be_applied_to_all_receiver_address_in_the_input"})}),Object(S.jsxs)(r.a,{mt:5,children:[Object(S.jsx)(V.a,{w:"full",size:"xl",placeholder:x.formatMessage({id:"content__amount"}),value:b,onChangeText:j}),Object(S.jsxs)(o.a,{mt:2,space:"10px",alignItems:"center",opacity:O?0:1,children:[Object(S.jsx)(M.a,{name:"InformationCircleOutline",size:14,color:"icon-warning"}),Object(S.jsx)(c.a,{typography:"Caption",color:"text-warning",children:x.formatMessage({id:"msg__enter_a_number"})})]})]}),Object(S.jsxs)(o.a,{mt:6,space:3,children:[Object(S.jsx)(a.a,{size:"xl",flex:1,onPress:n,children:x.formatMessage({id:"action__cancel"})}),Object(S.jsx)(a.a,{isDisabled:!O||""===b,size:"xl",type:"primary",flex:1,onPress:g,children:x.formatMessage({id:"action__confirm"})})]})]})}var Q=n(1146);function J(e){var t=e.option,n=e.isChecked,a=e.onSelected,i=t.title,s=t.subtitle,l=t.content,u=t.isUnlimited;return Object(S.jsx)(w.a,{borderRadius:12,_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed",borderColor:"surface-pressed"},paddingX:3,paddingY:2,marginX:-3,onPress:function(){return a(u)},children:Object(S.jsxs)(o.a,{space:4,alignItems:"center",children:[Object(S.jsxs)(r.a,{flex:1,children:[s?Object(S.jsxs)(o.a,{space:2,children:[Object(S.jsx)(c.a,{typography:"Body1Strong",children:i}),Object(S.jsx)(Q.a,{title:s,size:"sm"})]}):Object(S.jsx)(c.a,{typography:"Body1Strong",children:i}),Object(S.jsx)(c.a,{typography:"Body2",color:"text-subdued",lineHeight:"20px",children:l})]}),Object(S.jsx)(r.a,{opacity:n?1:0,children:Object(S.jsx)(M.a,{name:"CheckMini",color:"icon-success"})})]})})}function Y(e){var t=e.closeOverlay,n=e.isUnlimited,o=e.setIsUnlimited,c=Object(m.a)(),i=Object(u.a)(),s=[{title:c.formatMessage({id:"form__exact_amount"}),subtitle:c.formatMessage({id:"content__safer"}),content:c.formatMessage({id:"content__approve_the_amount_to_tokens_to_be_sent"}),isUnlimited:!1},{title:c.formatMessage({id:"form__unlimited"}),content:c.formatMessage({id:"content__you_dont_need _to_approve_again_in_the_future"}),isUnlimited:!0}],l=Object(d.useCallback)((function(e){o(e),t()}),[t,o]);return Object(S.jsx)(L.a,{closeOverlay:t,showCloseButton:!i,title:c.formatMessage({id:"title__approval"}),children:Object(S.jsxs)(r.a,{pb:i?6:0,children:[s.map((function(e){return Object(S.jsx)(J,{isChecked:n===e.isUnlimited,option:e,onSelected:l},e.title)})),Object(S.jsx)(a.a,{type:"primary",size:"xl",mt:6,onPress:t,children:c.formatMessage({id:"action__done"})})]})})}var G=n(3565),Z=n(3558),K=n(3121);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=n(4077),ne=n.n(te),re=n(759);function oe(e){var t="";switch(e){case K.c.CSV:t="https://onekey-devops.s3.ap-southeast-1.amazonaws.com/send_ERC20.csv";break;case K.c.TXT:t="https://onekey-devops.s3.ap-southeast-1.amazonaws.com/send_ERC20.txt";break;case K.c.Excel:t="https://onekey-devops.s3.ap-southeast-1.amazonaws.com/send_ERC20.xlsx";break;default:t="https://onekey-devops.s3.ap-southeast-1.amazonaws.com/send_ERC20.txt"}Object(re.d)(t)}function ce(){var e=Object(m.a)();return Object(S.jsxs)(o.a,{space:"10px",children:[Object(S.jsxs)(c.a,{fontSize:14,color:"text-subdued",children:[e.formatMessage({id:"content__download_example"}),":"]}),Object(S.jsx)(w.a,{onPress:function(){return oe(K.c.CSV)},children:Object(S.jsx)(c.a,{fontSize:14,color:"text-subdued",textDecorationLine:"underline",children:"CSV,"})}),Object(S.jsx)(w.a,{onPress:function(){return oe(K.c.TXT)},children:Object(S.jsx)(c.a,{fontSize:14,color:"text-subdued",textDecorationLine:"underline",children:"TXT,"})}),Object(S.jsx)(w.a,{onPress:function(){return oe(K.c.Excel)},children:Object(S.jsx)(c.a,{fontSize:14,color:"text-subdued",textDecorationLine:"underline",children:"Excel"})})]})}var ae=n(1183);function ie(e){var t=Object(d.useRef)(),n=Object(d.useRef)(),o=e.receiverString,c=e.setReceiverString,a=Object(m.a)(),i=function(e){return e.split("\n").map((function(e,t){return""+(t+1)+new Array(e.length+3).join(" ")})).join("\n")}(o),s=Object(d.useCallback)((function(){var e,r;null==(e=n.current)||e.scrollTo({top:null==(r=t.current)?void 0:r.scrollTop})}),[]);return Object(d.useLayoutEffect)((function(){n.current&&(n.current.style.whiteSpace="break-spaces")}),[]),Object(S.jsxs)(r.a,{position:"relative",children:[Object(S.jsx)(ae.a,{ref:t,placeholder:a.formatMessage({id:"form__receiver_address_amount"}),onScroll:s,bgColor:"transparent",bg:"transparent",value:o,pl:"46px",h:"240px",margin:"1px",shadow:"none",fontFamily:x.a.isNativeIOS?"Menlo":"monospace",onChangeText:function(e){return c(e)}}),Object(S.jsx)(ae.a,{ref:n,borderColor:"transparent",color:"text-disabled",value:i,h:"240px",fontFamily:"monospace",position:"absolute",zIndex:-1,left:"1px",top:"1px",right:"1px",bottom:"1px",isReadOnly:!0})]})}function se(e){var t=e.errors,n=Object(m.a)(),r=Object(d.useMemo)((function(){for(var e=[],r=t.length,a=0,i=B.a.min(r,3).toNumber();a<i;a+=1){var s=t[a];e.push(Object(S.jsxs)(o.a,{space:"10px",alignItems:"center",children:[Object(S.jsx)(M.a,{name:"InformationCircleOutline",size:12,color:"icon-warning"}),Object(S.jsxs)(c.a,{typography:"Caption",color:"text-warning",fontSize:12,children:[n.formatMessage({id:"form__line_str"},{0:s.lineNumber}),": ",s.message]},s.lineNumber)]},s.lineNumber))}return r>3&&e.push(Object(S.jsxs)(o.a,{space:"10px",alignItems:"center",children:[Object(S.jsx)(M.a,{name:"InformationCircleOutline",size:12,color:"icon-warning"}),Object(S.jsx)(c.a,{typography:"Caption",fontSize:12,color:"text-warning",children:n.formatMessage({id:"msg__other_str_lines_errors"},{count:r-3})})]})),e}),[t,n]);return Object(S.jsx)(S.Fragment,{children:r})}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=e.receiverFromOut,n=e.setReceiverFromOut,o=e.setReceiver,a=e.type,i=e.receiverErrors,s=Object(m.a)(),u=Object(d.useState)(""),b=l()(u,2),j=b[0],p=b[1],f=function(e){var t=e.header,n=Object(d.useState)([]),r=l()(n,2),o=r[0],c=r[1],a=Object(G.a)(ee({multiple:!1,accept:{"text/csv":[".csv"],"text/plain":[".txt"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},onDropAccepted:function(){var e=N()((function*(e){try{var n=yield e[0].arrayBuffer(),r=Object(Z.a)(n,{raw:!0}),o=Z.b.sheet_to_json(r.Sheets[r.SheetNames[0]],{header:t});c(o)}catch(a){}}));return function(t){return e.apply(this,arguments)}}()},e));return ee(ee({},a),{},{data:o})}({header:[K.d.Address,K.d.Amount],noClick:!0}),h=f.isDragAccept,x=f.data,v=f.getRootProps,g=Object(O.i)(j,1e3);return Object(d.useEffect)((function(){o(function(e,t){var n=[];if(""===e)return[];for(var r=e.split("\n"),o=0;o<r.length;o+=1){var c=r[o].split(",");(t===K.b.Token||K.b.NativeToken)&&n.push({Address:ne()(c[0]),Amount:ne()(c[1])})}return n}(g,a))}),[g,o,a]),Object(d.useEffect)((function(){t.length>0&&p(function(e){var t=e.length;return e.reduce((function(e,n,r){return""+e+[n.Address,n.Amount].join(",")+(r===t-1?"":"\n")}),"")}(t))}),[t]),Object(d.useEffect)((function(){x&&x[0]&&x[0].Address&&x[0].Amount&&n(x.filter((function(e){return e.Address!==K.d.Address&&e.Amount!==K.d.Amount})))}),[x,n]),Object(S.jsxs)(r.a,{children:[Object(S.jsxs)("div",ue(ue({style:{width:"100%",height:"100%",position:"relative"}},v()),{},{children:[Object(S.jsx)(ie,{receiverString:j,setReceiverString:p}),h&&Object(S.jsx)(y.a,{flex:"1",bg:"backdrop",zIndex:999,position:"absolute",left:"0",right:"0",top:"0",bottom:"0",borderRadius:12,children:Object(S.jsx)(r.a,{bg:"surface-default",borderWidth:1,borderColor:"interactive-default",w:"358px",borderRadius:12,h:"148px",children:Object(S.jsxs)(y.a,{h:"full",children:[Object(S.jsx)(M.a,{name:"DocumentArrowUpOutline",size:38}),Object(S.jsx)(c.a,{mt:5,children:s.formatMessage({id:"form__drag_file_here"})})]})})})]})),Object(S.jsx)(r.a,{mt:3,children:Object(S.jsx)(se,{errors:i})})]})}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e){var t=e.setReceiverFromOut,n=e.setIsUploadMode,o=Object(i.a)(["surface-default","border-default","interactive-default"]),a=l()(o,3),s=a[0],u=a[1],d=a[2],b=Object(m.a)(),j=Object(G.a)({multiple:!1,accept:{"text/csv":[".csv"],"text/plain":[".txt"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},onDropAccepted:function(){var e=N()((function*(e){try{var r=yield e[0].arrayBuffer(),o=Object(Z.a)(r,{raw:!0}),c=Z.b.sheet_to_json(o.Sheets[o.SheetNames[0]],{header:[K.d.Address,K.d.Amount]});c&&c[0]&&c[0].Address&&c[0].Amount&&(t(c.filter((function(e){return e.Address!==K.d.Address&&e.Amount!==K.d.Amount}))),n(!1))}catch(a){}}));return function(t){return e.apply(this,arguments)}}()}),p=j.isDragAccept,f=j.getRootProps,O=j.getInputProps;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",je(je({},f()),{},{style:{cursor:"pointer",background:s,borderWidth:1,borderStyle:"solid",borderRadius:"12px",height:"148px",borderColor:p?d:u},children:[Object(S.jsx)("input",je({},O())),Object(S.jsxs)(y.a,{w:"full",h:"full",children:[Object(S.jsx)(M.a,{name:"UploadOutline",size:40,color:"icon-subdued"}),Object(S.jsx)(c.a,{fontSize:14,mt:"20px",children:b.formatMessage({id:"form__drag_or_drop_file_to_import"})})]})]})),Object(S.jsx)(r.a,{mt:4,children:Object(S.jsx)(ce,{})})]})}function pe(e){var t=e.accountId,n=e.networkId,a=e.receiverFromOut,i=e.setReceiverFromOut,s=e.setReceiver,l=e.type,d=e.receiverErrors,b=e.isUploadMode,j=e.setIsUploadMode,p=Object(m.a)(),f=Object(u.a)();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(o.a,{justifyContent:"space-between",alignItems:"center",mb:f?7:8,children:[Object(S.jsx)(c.a,{fontSize:18,typography:"Heading",children:p.formatMessage({id:"form__receiver_address_amount"})}),Object(S.jsx)(w.a,{_hover:{backgroundColor:"transparent"},color:"text-subdued",onPress:function(){return j(!b)},children:function(e){var t=e.isHovered;return Object(S.jsxs)(o.a,{alignItems:"center",space:"5px",children:[Object(S.jsx)(M.a,{size:16,name:b?"PencilOutline":"UploadOutline",color:t?"text-default":"text-subdued"}),Object(S.jsx)(c.a,{color:t?"text-default":"text-subdued",fontSize:16,children:p.formatMessage({id:b?"action__edit":"action__upload"})})]})}})]}),Object(S.jsx)(r.a,{display:b?"flex":"none",children:Object(S.jsx)(me,{setReceiverFromOut:i,setIsUploadMode:j})}),Object(S.jsx)(r.a,{display:b?"none":"flex",children:Object(S.jsx)(de,{accountId:t,networkId:n,setReceiver:s,receiverFromOut:a,setReceiverFromOut:i,type:l,receiverErrors:d})}),Object(S.jsx)(c.a,{fontSize:12,color:"text-subdued",mt:f?4:3,children:p.formatMessage({id:"form__each_line_should_include_the_address_and_the_amount_seperated_by_commas"})})]})}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e){var t,n=e.accountId,i=e.networkId,s=e.accountAddress,j=e.type,f=Object(d.useState)(null),h=l()(f,2),x=h[0],v=h[1],g=Object(d.useState)([]),_=l()(g,2),y=_[0],k=_[1],C=Object(d.useState)([]),A=l()(C,2),R=A[0],D=A[1],E=Object(d.useState)(!1),U=l()(E,2),L=U[0],V=U[1],Q=Object(d.useState)(!1),J=l()(Q,2),G=J[0],Z=J[1],$=Object(d.useState)(!1),ee=l()($,2),te=ee[0],ne=ee[1],re=Object(m.a)(),oe=Object(u.a)(),ae=Object(b.u)(),ie=Object(O.q)({networkId:i}).network,se=Object(F.a)(i,n),le=Object(O.b)(i,n,!0),ue=le.find((function(e){return e.isNative})),de=le.filter((function(e){return!e.isNative})),be=I.a.serviceBatchTransfer,je=I.a.serviceToken,me=I.a.serviceOverview,fe=j===K.b.NativeToken,he=fe?ue:de[0],xe=x||he,ve=Object(F.l)({accountId:n,networkId:i,token:xe,fallback:"0"}),ge=Object(d.useMemo)((function(){var e;return re.formatMessage({id:"content__balance_str"},{0:ve+" "+(null!=(e=null==xe?void 0:xe.symbol)?e:"")})}),[null==xe?void 0:xe.symbol,re,ve]),_e=function(e){var t=e.networkId,n=e.receiver,r=e.type,o=e.token,c=Object(d.useState)(!1),a=l()(c,2),i=a[0],s=a[1],u=Object(d.useState)(!0),b=l()(u,2),j=b[0],p=b[1],f=Object(d.useState)([]),O=l()(f,2),h=O[0],x=O[1],v=Object(m.a)();return Object(d.useEffect)((function(){N()((function*(){var e=[];if(p(!0),r===K.b.NativeToken||r===K.b.Token){for(var c=0;c<n.length;c+=1){var a=n[c],i=a.Address,l=a.Amount,u=!1,d=new B.a(l);if(u||(d.isNaN()||d.isNegative())&&(e.push({lineNumber:c+1,message:v.formatMessage({id:"form__modify_the_line_with_the_correct_format"})}),u=!0),!u&&null!=o&&o.decimals){var b=new B.a(1).shiftedBy(-o.decimals);d.lt(b)&&!d.isZero()&&(e.push({lineNumber:c+1,message:v.formatMessage({id:"form__str_minimum_transfer"},{0:b.toFixed()})}),u=!0)}if(!u)try{yield I.a.validator.validateAddress(t,i.trim())}catch(j){e.push({lineNumber:c+1,message:v.formatMessage({id:"form__incorrect_address_format"})}),u=!0}}p(!1),s(0===e.length),x(e)}}))()}),[v,t,n,null==o?void 0:o.decimals,r]),{isValid:i,isValidating:j,errors:h}}({networkId:i,receiver:y,type:j,token:x||he}),ye=_e.isValid,ke=_e.isValidating,we=_e.errors,Pe=Object(d.useCallback)((function(e){v(e)}),[]),Ie=Object(d.useCallback)((function(e){var t=y.map((function(t){return Oe(Oe({},t),{},{Amount:e})}));D(t)}),[y,D]),Se=Object(d.useCallback)((function(){ae.navigate(W.c.Modal,{screen:W.b.BulkSender,params:{screen:K.a.TokenSelector,params:{accountId:n,networkId:i,tokens:de,onTokenSelected:Pe}}})}),[n,Pe,ae,i,de]),Ce=Object(d.useCallback)((function(){var e;e=Ie,Object(X.a)((function(t){return Object(S.jsx)(q,{onAmountChanged:e,closeOverlay:t})}))}),[Ie]),Me=Object(d.useCallback)((function(){!function(e){var t=e.isUnlimited,n=e.setIsUnlimited;X.a((function(e){return Object(S.jsx)(Y,{isUnlimited:t,setIsUnlimited:n,closeOverlay:e})}))}({isUnlimited:te,setIsUnlimited:ne})}),[te]),Ae=Object(d.useCallback)((function(e,t){return!e.reduce((function(e,t){return e.plus(t.amount)}),new B.a(0)).gt(ve)||(z.a.show({title:re.formatMessage({id:"form__amount_invalid"},{0:null==t?void 0:t.symbol})},{type:"error"}),!1)}),[ve,re]),Te=Object(d.useCallback)(N()((function*(){var e;if(0!==y.length&&!ke&&!G&&ye){var t,r=[];Z(!0);for(var o=x||he,c=0;c<y.length;c+=1)r.push({from:s,to:y[c].Address,amount:y[c].Amount,token:null==o?void 0:o.tokenIdOnNetwork,sendAddress:null==o?void 0:o.sendAddress});if(Ae(r,o)){var a=yield be.buildEncodedTxsFromBatchApprove({networkId:i,accountId:n,transferInfos:r,isUnlimited:te}),l=a[a.length-1];l&&(t=void 0!==(t=l.nonce)?new B.a(t).toNumber():t);var u=(null==ie||null==(e=ie.settings)?void 0:e.maxActionsInTx)||0,d=[];if(u>0)for(var b=0,m=r.length;b<m;b+=u)d.push(r.slice(b,b+u));else d.push(r);for(var p=[],f=0,O=d.length;f<O;f+=1){var h=yield be.buildEncodedTxFromBatchTransfer({networkId:i,accountId:n,transferInfos:d[f],prevNonce:t});t=void 0!==(t=h.nonce)?new B.a(t).toNumber():t,p.push(h)}Z(!1),ae.navigate(W.c.Modal,{screen:W.b.Send,params:{screen:H.a.BatchSendConfirm,params:{networkId:i,accountId:n,feeInfoUseFeeInTx:!1,feeInfoEditable:!0,encodedTxs:[].concat(T()(a),p),transferCount:r.length,transferType:j,payloadInfo:{type:"Transfer",transferInfos:r}}}})}else Z(!1)}})),[s,n,he,G,te,ye,ke,ae,null==ie||null==(t=ie.settings)?void 0:t.maxActionsInTx,i,y,x,be,j,Ae]);return Object(b.s)(Object(d.useCallback)((function(){return n&&i&&(je.startRefreshAccountTokens(),me.startQueryPendingTasks(),je.fetchAccountTokens({accountId:n,networkId:i})),function(){je.stopRefreshAccountTokens(),me.stopQueryPendingTasks()}}),[n,i,me,je])),Object(d.useEffect)((function(){n&&i&&v(null)}),[n,i]),Object(S.jsx)(p.Tabs.ScrollView,{children:Object(S.jsxs)(r.a,{paddingX:oe?4:0,paddingY:5,children:[Object(S.jsx)(w.a.Item,{disabled:se||fe,px:4,py:2,borderColor:"border-default",borderWidth:1,borderRadius:12,onPress:Se,children:Object(S.jsxs)(o.a,{alignItems:"center",children:[Object(S.jsx)(P.c,{flex:1,size:8,showInfo:!0,showTokenVerifiedIcon:!1,token:x||he,name:(null==x?void 0:x.name)||(null==he?void 0:he.name),showExtra:!1,description:ge}),!fe&&Object(S.jsx)(M.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}),Object(S.jsx)(r.a,{mt:6,children:Object(S.jsx)(pe,{accountId:n,networkId:i,setReceiver:k,receiverFromOut:R,setReceiverFromOut:D,receiverErrors:we,type:j,isUploadMode:L,setIsUploadMode:V})}),Object(S.jsxs)(r.a,{display:L?"none":"flex",children:[Object(S.jsx)(c.a,{fontSize:12,color:"text-subdued",mt:oe?4:3,children:re.formatMessage({id:"content__deflationary_token_transfers_are_not_supported_at_this_moment"})}),Object(S.jsxs)(o.a,{space:4,alignItems:"center",flexWrap:"wrap",children:[Object(S.jsx)(a.a,{mt:4,type:"basic",size:"xs",leftIconName:"CurrencyDollarSolid",onPress:Ce,children:re.formatMessage({id:"action__edit_amount"})}),!fe&&(null==ie?void 0:ie.settings.batchTokenTransferApprovalRequired)&&Object(S.jsx)(a.a,{mt:4,type:"basic",size:"xs",leftIconName:"CurrencyDollarSolid",onPress:Me,children:re.formatMessage({id:te?"action__approval_unlimited":"action__approval_exact_amount"})})]}),Object(S.jsx)(r.a,{mt:4,children:Object(S.jsx)(a.a,{isLoading:ke||G,isDisabled:ke||!ye||0===y.length||G,type:"primary",size:"xl",maxW:oe?"full":"280px",onPress:Te,children:re.formatMessage({id:"action__preview"})})}),Object(S.jsx)(r.a,{mt:4,children:Object(S.jsx)(ce,{})})]})]})})}t.default=function(){var e,t=Object(m.a)(),n=Object(g.c)(),s=Object(b.u)(),y=Object(u.a)(),k=Object(i.a)(["background-default"]),w=l()(k,1)[0],P=Object(O.f)(),I=P.accountId,M=P.networkId,A=P.accountAddress,T=P.network,R=!(null!=T&&T.isTestnet)&&(null==T?void 0:T.enabled)&&(null==T?void 0:T.settings.supportBatchTransfer)&&(T.impl!==h.I||T.impl===h.I&&f.a[T.id]),N=Object(O.n)(M),z=Object(_.a)({networkId:M}).connectAndCreateExternalAccount,D=Object(d.useMemo)((function(){return!x.a.isWeb||I?null:Object(S.jsx)(a.a,{onPress:z,mr:6,children:t.formatMessage({id:"action__connect_wallet"})})}),[t,z,I]),E=Object(d.useCallback)((function(e){var t=e.tintColor;return Object(S.jsxs)(o.a,{alignItems:"center",children:[Object(S.jsx)(j.a,{tintColor:t,onPress:n,canGoBack:!0}),!y&&Object(S.jsx)(c.a,{typography:"Heading",color:"text-default",children:"Bulk Send"})]})}),[n,y]),U=Object(d.useCallback)((function(){return I?Object(S.jsx)(r.a,{pr:"6",children:Object(S.jsx)(v.b,{type:y?"basic":"plain"})}):D}),[I,y,D]);return Object(d.useLayoutEffect)((function(){s.setOptions({title:"",headerRight:U})}),[s,E,U]),R?Object(S.jsxs)(p.Tabs.Container,{headerContainerStyle:{width:"100%",maxWidth:768},containerStyle:{width:"100%",maxWidth:768,marginHorizontal:"auto",backgroundColor:w,alignSelf:"center",flex:1},renderHeader:function(){return Object(S.jsx)(c.a,{display:"none",children:"''"})},headerHeight:y?0:30,swipeEnabled:!1,disableRefresh:!0,children:[Object(S.jsx)(p.Tabs.Tab,{name:K.b.NativeToken,label:null!=(e=null==N?void 0:N.symbol)?e:"",children:Object(S.jsx)(he,{accountId:I,networkId:M,accountAddress:A,type:K.b.NativeToken})}),Object(S.jsx)(p.Tabs.Tab,{name:K.b.Token,label:t.formatMessage({id:"form__token"}),children:Object(S.jsx)(he,{accountId:I,networkId:M,accountAddress:A,type:K.b.Token})})]}):Object(S.jsx)(C,{networkId:M})}}}]);