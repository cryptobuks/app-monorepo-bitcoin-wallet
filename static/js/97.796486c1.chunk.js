(this.webpackJsonp=this.webpackJsonp||[]).push([[97],{3085:function(e,t,a){"use strict";a.d(t,"a",(function(){return w.a}));var n=a(41),r=a(289),i=a(32),s=a(3),o=a.n(s),c=a(179),l=a(10),u=a.n(l),d=a(1),f=a(57),b=a(429),j=a(73),m=a(43),h=a(39),O=a(125),g=a(20),p=a(115),_=a(14),v=a(178),w=a(653),x=a(757),y=a(103),k=a(162),M=a(770),C=a.n(M),S=a(652),A=a(3104),P=a(332),E=a(1166),T=a(0),V=function(e){var t=e.onOk,a=e.hideTitle,r=e.placeCenter,s=Object(b.a)(),c=Object(d.useRef)(),l=Object(h.e)((function(e){return e.settings.enableLocalAuthentication})),u=Object(S.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{password:""}}),f=u.control,j=u.handleSubmit,O=u.setError,g=Object(A.a)({useFormReturn:u,revalidate:!1,clearErrorIfEmpty:!0}).formValues,_=j(function(){var e=o()((function*(e){(yield m.a.serviceApp.verifyPassword(e.password))?null==t||t(e.password,!1):O("password",{message:s.formatMessage({id:"msg__wrong_password"})})}));return function(t){return e.apply(this,arguments)}}()),v=Object(d.useMemo)((function(){return C()(_,1e3,{trailing:!1})}),[_]),w=Object(d.useCallback)((function(e){null==t||t(e,!0)}),[t]);Object(d.useEffect)((function(){l?Object(P.b)().then((function(e){e||setTimeout((function(){var e;return null==(e=c.current)?void 0:e.focus()}),100)})):setTimeout((function(){var e;return null==(e=c.current)?void 0:e.focus()}),100)}),[]);var M=Object(d.useMemo)((function(){return Object(T.jsxs)(T.Fragment,{children:[a?null:Object(T.jsxs)(i.a,{mb:"8",children:[Object(T.jsx)(n.h.DisplayLarge,{textAlign:"center",mb:2,children:s.formatMessage({id:"Verify_Password"})}),Object(T.jsx)(n.h.Body1,{textAlign:"center",color:"text-subdued",children:s.formatMessage({id:"Verify_password_to_continue"})})]}),Object(T.jsxs)(k.a,{children:[Object(T.jsx)(k.a.Item,{name:"password",defaultValue:"",control:f,rules:{minLength:{value:8,message:s.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:s.formatMessage({id:"msg__password_validation"})}},children:Object(T.jsx)(k.a.PasswordInput,{ref:c,onSubmitEditing:_})}),Object(T.jsx)(y.a,{isDisabled:!(null!=g&&g.password),type:"primary",size:"xl",onPress:v,children:s.formatMessage({id:"action__continue",defaultMessage:"Continue"})})]}),Object(T.jsx)(p.a,{mt:"8",children:Object(T.jsx)(E.a,{onOk:w})})]})}),[f,null==g?void 0:g.password,a,s,w,_,v]);return r?Object(T.jsx)(x.a,{px:{base:a?0:4,md:0},children:Object(T.jsx)(p.a,{testID:"Validation",w:"full",h:"full",bg:"background-default",children:Object(T.jsx)(i.a,{maxW:"96",w:"full",h:"full",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:M})})}):Object(T.jsx)(x.a,{px:{base:a?0:4,md:0},children:M})},I=function(e){var t=e.field,a=e.onOk,n=e.hideTitle,i=e.placeCenter,s=Object(d.useState)(!1),c=u()(s,2),l=c[0],f=c[1],b=Object(d.useState)(!1),j=u()(b,2),h=j[0],O=j[1],g=Object(d.useState)(),x=u()(g,2),y=x[0],k=x[1],M=Object(v.h)((function(e){return e.settings.validationSetting})),C=Object(d.useMemo)((function(){var e=!!t&&!(null==M||!M[t]);return!(!t||t!==w.a.Secret)||e}),[M,t]);Object(d.useEffect)((function(){function e(){return(e=o()((function*(){var e=yield m.a.servicePassword.getPassword();e&&(O(!0),_.a.isNative?setTimeout((function(){return null==a?void 0:a(e,!1)}),500):null==a||a(e,!1)),k(!!e),f(!0)}))).apply(this,arguments)}C||function(){e.apply(this,arguments)}()}),[]);var S=Object(d.useCallback)(function(){var e=o()((function*(e,t){O(!0),yield m.a.servicePassword.savePassword(e),null==a||a(e,t)}));return function(t,a){return e.apply(this,arguments)}}(),[a]);if(!h){if(C)return Object(T.jsx)(V,{onOk:S,hideTitle:n,placeCenter:i});if(l&&!y)return Object(T.jsx)(V,{onOk:S,hideTitle:n,placeCenter:i})}return Object(T.jsx)(p.a,{w:"full",h:"full",children:Object(T.jsx)(r.b,{size:"lg"})})},B=function(e){var t=e.onOk,a=e.skipSavePassword,r=e.hideTitle,s=e.isAutoHeight,l=Object(b.a)(),u=Object(v.l)().isOk,f=Object(v.h)((function(e){return e.status.boardingCompleted})),j=Object(v.h)((function(e){return e.status.authenticationType})),h=Object(S.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{password:"",confirmPassword:""}}),O=h.control,g=h.handleSubmit,p=h.getValues,_=Object(A.a)({useFormReturn:h,revalidate:!1,clearErrorIfEmpty:!0}).formValues,w=Object(d.useMemo)((function(){return!(null!=_&&_.password)||!(null!=_&&_.confirmPassword)}),[null==_?void 0:_.confirmPassword,null==_?void 0:_.password]),M=Object(d.useCallback)(function(){var e=o()((function*(e){e.password===e.confirmPassword?(f&&!a&&(yield m.a.serviceApp.updatePassword("",e.password)),null==t||t(e.password,e.withEnableAuthentication)):c.a.show({title:l.formatMessage({id:"msg__password_needs_to_be_the_same"})},{type:"error"})}));return function(t){return e.apply(this,arguments)}}(),[f,a,t,l]),C="FACIAL"===j?l.formatMessage({id:"content__face_id"}):l.formatMessage({id:"content__touch_id"});return Object(T.jsxs)(x.a,{h:s?{base:"full",sm:"auto"}:"full",px:{base:r?0:4,md:0},children:[r?null:Object(T.jsxs)(i.a,{mb:"8",children:[Object(T.jsxs)(n.h.DisplayLarge,{textAlign:"center",mb:2,children:["\ud83d\udd10"," ",l.formatMessage({id:"title__set_password",defaultMessage:"Set Password"})]}),Object(T.jsx)(n.h.Body1,{textAlign:"center",color:"text-subdued",children:l.formatMessage({id:"Only_you_can_unlock_your_wallet",defaultMessage:"Only you can unlock your wallet"})})]}),Object(T.jsxs)(k.a,{children:[Object(T.jsx)(k.a.Item,{name:"password",defaultValue:"",control:O,rules:{minLength:{value:8,message:l.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:l.formatMessage({id:"msg__password_validation"})},validate:function(e){var t=p("confirmPassword");if(t&&e)return t!==e?l.formatMessage({id:"msg__password_needs_to_be_the_same"}):void 0}},children:Object(T.jsx)(k.a.PasswordInput,{autoFocus:!0,onSubmitEditing:g(M),placeholder:l.formatMessage({id:"form__rule_at_least_int_digits"},{0:8})})}),Object(T.jsx)(k.a.Item,{name:"confirmPassword",defaultValue:"",control:O,rules:{minLength:{value:8,message:l.formatMessage({id:"msg__password_validation"})},validate:function(e){var t=p("password");if(t&&e)return t!==e?l.formatMessage({id:"msg__password_needs_to_be_the_same"}):void 0}},children:Object(T.jsx)(k.a.PasswordInput,{onSubmitEditing:g(M),placeholder:l.formatMessage({id:"Confirm_password"})})}),u?Object(T.jsx)(k.a.Item,{name:"withEnableAuthentication",defaultValue:u,control:O,children:Object(T.jsx)(k.a.CheckBox,{title:l.formatMessage({id:"content__authentication_with"},{0:C})})}):null,Object(T.jsx)(y.a,{type:"primary",size:"xl",onPress:g(M),isDisabled:w,children:l.formatMessage({id:"action__continue",defaultMessage:"Continue"})})]})]})};t.b=Object(d.memo)((function(e){var t=e.children,a=e.skipSavePassword,s=e.field,l=e.walletId,p=e.hideTitle,_=e.isAutoHeight,v=e.placeCenter,w=Object(f.u)(),x=Object(h.i)(l),y=Object(b.a)(),k=m.a.engine,M=m.a.serviceHardware,C=m.a.serviceApp,S=Object(d.useState)(),A=u()(S,2),P=A[0],E=A[1],V=Object(d.useState)(""),L=u()(V,2),W=L[0],D=L[1],F=Object(d.useState)(),R=u()(F,2),H=R[0],z=R[1],G=Object(d.useState)(),J=u()(G,2),q=J[0],K=J[1],N=Object(h.g)().isPasswordSet,Q=Object(d.useState)(N),U=u()(Q,1)[0],X=Object(d.useCallback)((function(e,t){K(t),D(e)}),[]),Y=Object(d.useCallback)((function(e,t){z(t),D(e)}),[]),Z=Object(d.useCallback)((function(){null!=w&&null!=w.canGoBack&&w.canGoBack()&&w.goBack()}),[w]),$="hw"===(null==x?void 0:x.type),ee=(null==x?void 0:x.type)===j.a;return Object(d.useEffect)((function(){C.checkUpdateStatus()}),[]),Object(d.useEffect)((function(){function e(){c.a.show({title:y.formatMessage({id:"action__connection_timeout"})}),Z()}function t(){return(t=o()((function*(){if(null!=x&&x.id){var t=yield k.getHWDeviceByWalletId(x.id);if(t){var a=null;try{var n=yield M.getFeatursByWalletId(x.id);n?(a=n,g.a.hardwareSDK.debug("use features cache: ",n)):a=yield M.getFeatures(t.mac)}catch(r){return Z(),void O.a.showErrorToast(r)}if(!a)return c.a.show({title:y.formatMessage({id:"action__connection_timeout"})}),void Z();E(a)}else e()}else e()}))).apply(this,arguments)}$&&function(){t.apply(this,arguments)}()}),[$,k,null==x?void 0:x.id,y,Z,M]),ee?Object(T.jsx)(i.a,{flex:1,children:t(W,{withEnableAuthentication:H,isLocalAuthentication:q})}):W?Object(T.jsx)(i.a,{w:"full",h:"full",children:t(W,{withEnableAuthentication:H,isLocalAuthentication:q})}):$?P?Object(T.jsx)(i.a,{w:"full",h:"full",children:t(W,{withEnableAuthentication:H,isLocalAuthentication:q,deviceFeatures:P})}):Object(T.jsxs)(i.a,{h:"100%",justifyContent:"center",alignItems:"center",children:[Object(T.jsx)(r.b,{size:"lg"}),Object(T.jsx)(n.h.DisplayMedium,{mt:6,children:y.formatMessage({id:"modal__device_status_check"})})]}):U?Object(T.jsx)(I,{onOk:X,field:s,hideTitle:p,placeCenter:v}):Object(T.jsx)(B,{onOk:Y,skipSavePassword:a,hideTitle:p,isAutoHeight:_})}))},3104:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(185),r=a.n(n),i=a(10),s=a.n(i),o=a(1),c=a(1170);function l(e){var t=e.useFormReturn,a=e.wait,n=void 0===a?500:a,i=e.revalidate,l=void 0===i||i,u=e.clearErrorIfEmpty,d=void 0!==u&&u,f=e.clearErrorWhenTextChange,b=void 0!==f&&f,j=e.onChange,m=t.watch,h=t.trigger,O=t.formState,g=t.clearErrors,p=t.getValues,_=Object(o.useRef)(!1),v=Object(o.useState)(),w=s()(v,2),x=w[0],y=w[1];Object(o.useEffect)((function(){var e=p();y(e),setTimeout((function(){return h()}),0)}),[p,h]),Object(o.useEffect)((function(){var e=r()((function(e,t){var a=t.name,n=t.type;_.current=!1,"change"!==n&&void 0!==n||(y(e),j&&j(e,{name:a,type:n}),d&&""===(null==e?void 0:e[a])&&g(a),l&&h(a))}),n,{leading:!1,trailing:!0}),t=m((function(t,a){var n=a.name,r=a.type;_.current=!0,b&&g(n),e(t,{name:n,type:r})}));return function(){return t.unsubscribe()}}),[d,b,g,j,l,h,n,m]);var k=Object(c.a)(O.isValid&&!Object.keys(O.errors).length&&!O.isValidating,100);return{loadingRef:_,isLoading:_.current,formValues:x,isValid:k}}},3114:function(e,t,a){"use strict";var n=a(3288);a.d(t,"a",(function(){return n.a}))},3288:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(10),r=a.n(n),i=a(15),s=a.n(i),o=a(1),c=a(251),l=a(261),u=a(254),d=a(205);var f=a(562),b=a(662),j=a(23),m=["children"];function h(e){var t=e.children,a=s()(e,m),n=Object(c.a)("Hidden",a,{},{ignoreProps:["only","platform"]}),i=n.from,o=n.till,h=n.only,O=n.platform,g=n.colorMode,p=Object(l.a)().breakpoints,_=Object(b.b)(),v=function(e){var t,a=null===(t=Object(u.a)())||void 0===t?void 0:t.width,n=Object(l.a)();if(Object(d.k)(e,n.breakpoints)){var r=Object(d.g)(n.breakpoints,a);return Object(d.f)(e,n.breakpoints,r)}return e}(Object.keys(p).reduce((function(e,t){return e[t]=t,e}),{})),w=Object(f.a)("breakpoints",[v]),x=r()(w,1)[0],y=Object(f.a)("breakpoints",[i]),k=r()(y,1)[0],M=Object(f.a)("breakpoints",[o]),C=r()(M,1)[0];return i||o||h||g||O?i&&o&&x>=k&&x<C||i&&!o&&x>=k||o&&!i&&x<C||Array.isArray(h)&&h.includes(v)||h===v||Array.isArray(O)&&O.includes(j.a.OS)||O===j.a.OS||g===_.colorMode?null:t:null}Object(o.memo)(h)},4068:function(e,t,a){"use strict";a.r(t);var n=a(3114),r=a(41),i=a(756),s=a(32),o=a(1149),c=a(72),l=a(1),u=a(429),d=a(43),f=a(3085),b=a(178),j=a(39),m=a(80),h=a(0),O=function(e){var t=e.title,a=e.onToggle,n=e.divider,r=e.isChecked;return Object(h.jsxs)(s.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:4,px:{base:4,md:6},borderBottomWidth:n?"1 ":void 0,borderBottomColor:"divider",children:[Object(h.jsx)(c.a,{typography:{sm:"Body1Strong",md:"Body2Strong"},flex:"1",numberOfLines:1,mr:"3",children:t}),Object(h.jsx)(s.a,{children:Object(h.jsx)(o.a,{labelType:"false",isChecked:r,onToggle:a})})]})};t.default=function(){var e=Object(u.a)(),t=Object(b.o)(),a=Object(j.n)().authenticationType,o=Object(j.m)().validationSetting,c=void 0===o?{}:o,g=Object(i.a)().themeVariant;Object(l.useLayoutEffect)((function(){var a=e.formatMessage({id:"action__protection"});t.setOptions({title:a})}),[t,e,a]);var p=Object(l.useCallback)((function(e,t){d.a.dispatch(Object(m.Q)({key:e,value:t}))}),[]);return Object(h.jsx)(s.a,{w:"full",h:"full",bg:"background-default",p:"4",maxW:768,mx:"auto",children:Object(h.jsxs)(s.a,{children:[Object(h.jsx)(r.h.Caption,{mt:"2",color:"text-subdued",children:e.formatMessage({id:"content__password_required_even_unlocked"})}),Object(h.jsx)(s.a,{w:"full",mt:"6",children:Object(h.jsxs)(s.a,{mt:"2",borderRadius:"12",bg:"surface-default",borderWidth:"light"===g?1:void 0,borderColor:"border-subdued",children:[Object(h.jsx)(O,{title:e.formatMessage({id:"form__create_transactions"}),isChecked:c.Payment,divider:!0,onToggle:function(){return p(f.a.Payment,!c.Payment)}}),Object(h.jsx)(O,{title:e.formatMessage({id:"form__create_delete_wallets"}),isChecked:c.Wallet,divider:!0,onToggle:function(){return p(f.a.Wallet,!c.Wallet)}}),Object(h.jsx)(O,{title:e.formatMessage({id:"form__create_delete_accounts"}),isChecked:c.Account,onToggle:function(){return p(f.a.Account,!c.Account)}}),Object(h.jsx)(n.a,{children:Object(h.jsx)(O,{title:e.formatMessage({id:"form__view_recovery_phrase_private_key"}),isChecked:c.Secret,onToggle:function(){return p(f.a.Secret,!c.Secret)}})})]})})]})})}}}]);