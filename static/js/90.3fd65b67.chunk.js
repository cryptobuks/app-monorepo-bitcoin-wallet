(this.webpackJsonp=this.webpackJsonp||[]).push([[90,845],{3027:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalNavigatorRoutes",(function(){return p}));var r=n(2),a=n.n(r),c=n(100),o=n(1),i=n(292),l=n(463),s=n(145),u=n(760),b=n(456),d=n(0);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p,m=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3162))})),O=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3125))})),f=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3136))})),x=Object(l.a)((function(){return n.e(107).then(n.bind(null,3229))})),h=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3194))})),g=Object(l.a)((function(){return n.e(93).then(n.bind(null,3177))})),y=Object(l.a)((function(){return Promise.all([n.e(43),n.e(55)]).then(n.bind(null,3244))})),v=Object(l.a)((function(){return n.e(104).then(n.bind(null,3197))})),w=Object(l.a)((function(){return n.e(65).then(n.bind(null,3115))})),P=Object(l.a)((function(){return Promise.all([n.e(2),n.e(4),n.e(96)]).then(n.bind(null,3216))})),k=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3196))})),S=Object(l.a)((function(){return n.e(6).then(n.bind(null,3199))})),C=Object(l.a)((function(){return Promise.resolve().then(n.bind(null,1158))})),_=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(75)]).then(n.bind(null,3241))})),M=Object(l.a)((function(){return n.e(843).then(n.bind(null,3137))})),N=Object(l.a)((function(){return n.e(105).then(n.bind(null,3245))})),B=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3193))})),A=Object(l.a)((function(){return Promise.all([n.e(1),n.e(37)]).then(n.bind(null,3178))})),I=Object(l.a)((function(){return Promise.all([n.e(1),n.e(86)]).then(n.bind(null,3127))})),D=Object(l.a)((function(){return Promise.all([n.e(3),n.e(94)]).then(n.bind(null,3195))})),E=Object(l.a)((function(){return Promise.all([n.e(0),n.e(39),n.e(47)]).then(n.bind(null,3240))})),T=Object(l.a)((function(){return n.e(844).then(n.bind(null,3198))})),L=Object(l.a)((function(){return n.e(98).then(n.bind(null,3231))})),R=Object(l.a)((function(){return n.e(41).then(n.bind(null,3128))})),F=Object(l.a)((function(){return n.e(101).then(n.bind(null,3247))})),H=Object(l.a)((function(){return n.e(103).then(n.bind(null,3250))})),z=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(71)]).then(n.bind(null,3238))})),V=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3192))})),W=Object(l.a)((function(){return n.e(76).then(n.bind(null,3246))})),X=Object(l.a)((function(){return Promise.resolve().then(n.bind(null,955))})),q=Object(l.a)((function(){return Promise.all([n.e(5),n.e(15),n.e(48)]).then(n.bind(null,3237))})),G=Object(l.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(8),n.e(3),n.e(6),n.e(4),n.e(7),n.e(9)]).then(n.bind(null,3129))})),J=Object(l.a)((function(){return Promise.resolve().then(n.bind(null,1159))})),Q=Object(l.a)((function(){return n.e(102).then(n.bind(null,3234))})),U=Object(l.a)((function(){return n.e(88).then(n.bind(null,3243))})),K=Object(l.a)((function(){return Promise.all([n.e(0),n.e(64)]).then(n.bind(null,3251))})),Y=Object(l.a)((function(){return n.e(42).then(n.bind(null,3242))})),Z=Object(l.a)((function(){return n.e(81).then(n.bind(null,3248))}));!function(e){e.ReceiveTokenNavigator="ReceiveTokenNavigator",e.SendNavigator="SendNavigator"}(p||(p={}));var $=[{name:s.b.CreateAccount,component:f},{name:s.b.RecoverAccount,component:x},{name:s.b.Receive,component:R},{name:s.b.Send,component:V},{name:s.b.ScanQrcode,component:z},{name:s.b.BackupWallet,component:m},{name:s.b.TransactionDetail,component:G},{name:s.b.ManageToken,component:D},{name:s.b.SubmitRequest,component:X},{name:s.b.HistoryRequest,component:_},{name:s.b.Password,component:T},{name:s.b.OnekeyLiteReset,component:S},{name:s.b.OnekeyLiteChangePinInputPin,component:k},{name:s.b.DappConnectionModal,component:g},{name:s.b.Collectibles,component:O},{name:s.b.CreateWallet,component:h},{name:s.b.ManagerWallet,component:I},{name:s.b.ManagerAccount,component:A},{name:s.b.EnableLocalAuthentication,component:v},{name:s.b.ManageNetwork,component:B},{name:s.b.OnekeyHardware,component:P},{name:s.b.HardwareUpdate,component:C},{name:s.b.Discover,component:y},{name:s.b.Swap,component:q},{name:s.b.UpdateFeature,component:J},{name:s.b.FiatPay,component:w},{name:s.b.AddressBook,component:U},{name:s.b.ImportBackupPassword,component:M},{name:s.b.Staking,component:W},{name:s.b.ManageConnectedSites,component:N},{name:s.b.PushNotification,component:L},{name:s.b.Webview,component:Q},{name:s.b.Revoke,component:F},{name:s.b.NFTMarket,component:E},{name:s.b.Overview,component:K},{name:s.b.CurrencySelect,component:Z},{name:s.b.BulkSender,component:H},{name:s.b.Market,component:Y}],ee=Object(b.a)();t.default=Object(o.memo)((function(){var e=Object(c.a)(),t=Object(o.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1,presentation:"modal"},Object(u.a)({isVerticalLayout:e}))}),[e]);return Object(d.jsx)(i.a,{children:Object(d.jsx)(ee.Navigator,{screenOptions:t,children:$.map((function(e){return Object(d.jsx)(ee.Screen,{name:e.name,component:e.component},e.name)}))})})}))},3100:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,a=n(2),c=n.n(a),o=n(72),i=n(15),l=n.n(i),s=n(36),u=n(0),b=["prefix","price","networkId","symbol"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=((r={})[s.a.eth]="ETH",r[s.a.optimism]="ETH",r[s.a.bsc]="BNB",r[s.a.polygon]="MATIC",r[s.a.arbitrum]="ETH",r[s.a.sol]="SOL",r[s.a.avalanche]="AVAX",r);function m(e){var t=e.prefix,n=e.price,r=e.networkId,a=e.symbol,c=null!=a?a:p[null!=r?r:""],o="\u2013";return n&&null!==n&&(o=n+" "+(null!=c?c:"")),t?t+" "+o:""+o}t.b=function(e){var t=e.prefix,n=void 0===t?"":t,r=e.price,a=e.networkId,c=e.symbol,i=l()(e,b);return Object(u.jsx)(o.a,j(j({},i),{},{children:m({prefix:n,price:r,networkId:a,symbol:c})}))}},3114:function(e,t,n){"use strict";var r=n(3288);n.d(t,"a",(function(){return r.a}))},3174:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.SearchModal="SearchModal",e.FilterModal="FilterModal",e.ShareNFTPNLModal="ShareNFTPNLModal",e.CalculatorModal="CalculatorModal",e.MarketPlaceScreen="MarketPlaceScreen"}(r||(r={}))},3288:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(10),a=n.n(r),c=n(15),o=n.n(c),i=n(1),l=n(251),s=n(261),u=n(254),b=n(205);var d=n(562),j=n(662),p=n(23),m=["children"];function O(e){var t=e.children,n=o()(e,m),r=Object(l.a)("Hidden",n,{},{ignoreProps:["only","platform"]}),c=r.from,i=r.till,O=r.only,f=r.platform,x=r.colorMode,h=Object(s.a)().breakpoints,g=Object(j.b)(),y=function(e){var t,n=null===(t=Object(u.a)())||void 0===t?void 0:t.width,r=Object(s.a)();if(Object(b.k)(e,r.breakpoints)){var a=Object(b.g)(r.breakpoints,n);return Object(b.f)(e,r.breakpoints,a)}return e}(Object.keys(h).reduce((function(e,t){return e[t]=t,e}),{})),v=Object(d.a)("breakpoints",[y]),w=a()(v,1)[0],P=Object(d.a)("breakpoints",[c]),k=a()(P,1)[0],S=Object(d.a)("breakpoints",[i]),C=a()(S,1)[0];return c||i||O||x||f?c&&i&&w>=k&&w<C||c&&!i&&w>=k||i&&!c&&w<C||Array.isArray(O)&&O.includes(y)||O===y||Array.isArray(f)&&f.includes(p.a.OS)||f===p.a.OS||x===g.colorMode?null:t:null}Object(i.memo)(O)},3774:function(e,t,n){e.exports=n.p+"static/media/nft_pnl_empty_image.829dbd23.png"},3775:function(e,t,n){e.exports=n.p+"static/media/nft_pnl_empty_image_light.bf388bb9.png"},4108:function(e,t,n){"use strict";n.r(t),n.d(t,"parsePNLData",(function(){return ke}));var r=n(755),a=n(2),c=n.n(a),o=n(3),i=n.n(o),l=n(199),s=n(457),u=n(103),b=n(1145),d=n(3072),j=n(32),p=n(3106),m=n(115),O=n(289),f=n(179),x=n(100),h=n(10),g=n.n(h),y=n(15),v=n.n(y),w=n(3114),P=n(3111),k=n(240),S=n(85),C=n(72),_=n(3074),M=n(1),N=n(57),B=n(26),A=n(554),I=n(429),D=n(291),E=n(1144),T=n(145),L=n(11),R=n(14),F=n(43),H=n(3730),z=n(178),V=n(3210),W=n(3102),X=n(3174),q=n(3100),G=n(36);function J(e){var t=e.keyword,n=e.onAddressSearch,r=Object(z.i)(t,500).toLowerCase(),a=Object(M.useState)(!1),c=g()(a,2),o=c[0],l=c[1],s=Object(M.useState)(""),u=g()(s,2),b=u[0],d=u[1],j=Object(M.useState)(""),p=g()(j,2),m=p[0],O=p[1],f=Object(M.useCallback)(function(){var e=i()((function*(e){return F.a.serviceRevoke.lookupEnsName(e)}));return function(t){return e.apply(this,arguments)}}(),[]),x=Object(M.useCallback)(function(){var e=i()((function*(e){try{return yield F.a.validator.validateAddress(G.a.eth,e),!0}catch(t){return!1}}));return function(t){return e.apply(this,arguments)}}(),[]),h=Object(M.useCallback)(function(){var e=i()((function*(e){return yield F.a.serviceRevoke.getAddress(e,G.a.eth)}));return function(t){return e.apply(this,arguments)}}(),[]);return Object(M.useEffect)((function(){(null==r?void 0:r.length)>0&&i()((function*(){if(r!==b&&r.toLowerCase()!==m.toLowerCase()){l(!0);var e=yield Promise.all([f(r),h(r)]),t=g()(e,2),a=t[0],c=t[1];if(c){if(yield x(c)){var o=a;r.toLowerCase()!==c.toLowerCase()&&d(o=r),O(c),n({address:c.toLocaleLowerCase(),ens:o})}}else d("");l(!1)}}))()}),[r]),Object(M.useMemo)((function(){return{loading:o}}),[o])}var Q=n(3080),U=n(1146),K=n(130),Y=n(3125),Z=n(3081),$=n(3130),ee=n(0),te=["network","loading"];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=function(){return Object(ee.jsx)(ee.Fragment,{children:[1,2,3,4,5].map((function(e){return Object(ee.jsxs)(_.a,{children:[Object(ee.jsx)(_.a.Column,{children:Object(ee.jsx)(b.a,{width:"40px",height:"40px",borderRadius:"12px"})}),Object(ee.jsx)(_.a.Column,{flex:1,text:{label:Object(ee.jsx)(d.a,{shape:"Body1"}),description:Object(ee.jsx)(d.a,{shape:"Body2"})}}),Object(ee.jsx)(_.a.Column,{w:"200px",text:{label:Object(ee.jsx)(d.a,{shape:"Body1"}),description:Object(ee.jsx)(d.a,{shape:"Body2"})}}),Object(ee.jsx)(_.a.Column,{w:"160px",text:{label:Object(ee.jsx)(d.a,{shape:"Body1"}),description:Object(ee.jsx)(d.a,{shape:"Body2"})}}),Object(ee.jsx)(_.a.Column,{w:"140px",alignItems:"flex-end",text:{label:Object(ee.jsx)(d.a,{shape:"Body1"})}}),Object(ee.jsx)(w.a,{till:"lg",children:Object(ee.jsx)(_.a.Column,{w:"140px",alignItems:"flex-end",text:{label:Object(ee.jsx)(d.a,{shape:"Body1"})}})})]},"Skeleton"+e)}))})},ae=function(e){var t=e.network,n=e.loading,r=v()(e,te),a=Object(Z.a)(),o=a.formatDistanceStrict,i=a.format,l=Object(I.a)(),s=Object(N.u)(),u=Object(M.useCallback)((function(e){t&&s.navigate(T.c.Modal,{screen:T.b.Collectibles,params:{screen:Y.CollectiblesModalRoutes.NFTDetailModal,params:{asset:e,network:t,isOwner:!1}}})}),[s,t]),b=Object(M.useCallback)((function(e){var n,r,a,c,s,b,d,j,p=e.item,m=p.asset,O=p.entry,f=p.exit,x=p.profit,h=Object(q.a)({price:new B.BigNumber(x).decimalPlaces(3).toString(),symbol:p.exit.tradeSymbol});h=(x>=0?"+":"")+h,"Mint"===O.eventType?j=l.formatMessage({id:"content__mint"}):"Transfer"===O.eventType&&(j=l.formatMessage({id:"action__receive"}));var g,y=new B.BigNumber(null!=(n=O.tradePrice)?n:0).decimalPlaces(3).toString(),v=new B.BigNumber(null!=(r=null!=(a=null!=(c=f.internalTxValue)?c:f.tokenTxValue)?a:f.tradePrice)?r:0).decimalPlaces(3).toString(),M=p.tokenId?"#"+p.tokenId:"\u2013";"0x57f1887a8bf19b14fc0df6fd9b2acc9af147ea85"===(null==(s=p.contractAddress)?void 0:s.toLowerCase())&&(M=null==(g=p.asset)?void 0:g.name);return Object(ee.jsxs)(_.a,{children:[Object(ee.jsx)(K.a,{flex:1,flexDirection:"row",alignItems:"center",onPress:function(){m&&u(m)},children:function(e){var t=e.isHovered;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(_.a.Column,{children:p.asset&&Object(ee.jsx)($.a,{asset:m,borderRadius:"12px",size:40,opacity:t?80:void 0})}),Object(ee.jsx)(_.a.Column,{flex:1,ml:"12px",text:{label:p.contractName,labelProps:{typography:"Body1Strong",isTruncated:!0},description:M,descriptionProps:{isTruncated:!0}}})]})}}),Object(ee.jsx)(w.a,{till:"md",children:Object(ee.jsx)(P.a,{label:i(new Date(O.timestamp),"yyyy-MM-dd HH:mm"),placement:"top left",children:Object(ee.jsx)(_.a.Column,{w:"200px",text:{label:Object(ee.jsxs)(k.a,{space:1,alignItems:"center",children:[Object(ee.jsx)(C.a,{typography:"Body1Strong",numberOfLines:1,children:Object(q.a)({price:y,symbol:O.tradeSymbol})}),j&&Object(ee.jsx)(U.a,{type:"default",size:"sm",title:j})]}),description:Object(ee.jsxs)(k.a,{space:1,alignItems:"center",children:[Object(ee.jsx)(S.a,{name:"GasIllus",size:16,color:"icon-subdued"}),Object(ee.jsx)(C.a,{typography:"Body2",numberOfLines:1,color:"text-subdued",children:Object(q.a)({price:new B.BigNumber(null!=(b=O.gasFee)?b:0).decimalPlaces(3).toString(),networkId:t.id})})]})}})})}),Object(ee.jsx)(w.a,{till:"md",children:Object(ee.jsx)(P.a,{label:i(new Date(f.timestamp),"yyyy-MM-dd HH:mm"),placement:"top left",children:Object(ee.jsx)(_.a.Column,{w:"160px",text:{label:Object(q.a)({price:v,symbol:f.tradeSymbol}),description:Object(ee.jsxs)(k.a,{space:1,alignItems:"center",children:[Object(ee.jsx)(S.a,{name:"GasIllus",size:16,color:"icon-subdued"}),Object(ee.jsx)(C.a,{typography:"Body2",numberOfLines:1,color:"text-subdued",children:Object(q.a)({price:new B.BigNumber(null!=(d=f.gasFee)?d:0).decimalPlaces(3).toString(),networkId:t.id})})]})}})})}),Object(ee.jsx)(_.a.Column,{w:"140px",text:{label:h,labelProps:{isTruncated:!0,textAlign:"right",numberOfLines:1,color:x>0?"text-success":"text-critical"},description:o(f.timestamp,O.timestamp),descriptionProps:{display:{lg:"none"},textAlign:"right"}}}),Object(ee.jsx)(w.a,{till:"lg",children:Object(ee.jsx)(_.a.Column,{w:"140px",text:{label:o(f.timestamp,O.timestamp),labelProps:{typography:"Body1Strong",textAlign:"right"}}})})]})}),[i,o,u,l,t.id]),d=Object(M.useCallback)((function(){return n?Object(ee.jsx)(re,{}):null}),[n]);return Object(ee.jsx)(Q.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({renderItem:b,showDivider:!0,keyExtractor:function(e){return e.contractAddress+e.tokenId},showsVerticalScrollIndicator:!1,ListFooterComponent:d,contentContainerStyle:{width:"100%",maxWidth:1072,alignSelf:"center",padding:32}},r))},ce=["network","loading"];function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(){return Object(ee.jsx)(ee.Fragment,{children:[1,2,3,4,5].map((function(e){return Object(ee.jsxs)(_.a,{children:[Object(ee.jsx)(_.a.Column,{children:Object(ee.jsx)(b.a,{width:"40px",height:"40px",borderRadius:"12px"})}),Object(ee.jsx)(_.a.Column,{flex:1,text:{label:Object(ee.jsx)(d.a,{shape:"Body1"}),description:Object(ee.jsx)(d.a,{shape:"Body2"})}}),Object(ee.jsx)(_.a.Column,{alignItems:"flex-end",flex:1,text:{label:Object(ee.jsx)(d.a,{shape:"Body1"}),description:Object(ee.jsx)(d.a,{shape:"Body2"})}})]},"Skeleton"+e)}))})},se=function(e){var t=e.network,n=e.loading,r=v()(e,ce),a=Object(N.u)(),c=Object(M.useCallback)((function(e){t&&a.navigate(T.c.Modal,{screen:T.b.Collectibles,params:{screen:Y.CollectiblesModalRoutes.NFTDetailModal,params:{asset:e,network:t,isOwner:!1}}})}),[a,t]),o=Object(Z.a)().formatDistanceStrict,i=Object(M.useCallback)((function(e){var t,n=e.item,r=n.asset,a=n.entry,i=n.exit,l=n.profit,s=Object(q.a)({price:new B.BigNumber(l).decimalPlaces(3).toString(),symbol:n.exit.tradeSymbol});s=(l>=0?"+":"")+s;var u,b=n.tokenId?"#"+n.tokenId:"\u2013";"0x57f1887a8bf19b14fc0df6fd9b2acc9af147ea85"===(null==(t=n.contractAddress)?void 0:t.toLowerCase())&&(b=null==(u=n.asset)?void 0:u.name);return Object(ee.jsxs)(_.a,{children:[Object(ee.jsxs)(K.a,{flex:1,flexDirection:"row",alignItems:"center",onPress:function(){r&&c(r)},children:[Object(ee.jsx)(_.a.Column,{children:Object(ee.jsx)($.a,{asset:r,borderRadius:"12px",size:40})}),Object(ee.jsx)(_.a.Column,{flex:1,ml:"12px",text:{label:n.contractName,labelProps:{typography:"Body1Strong",isTruncated:!0},description:b,descriptionProps:{isTruncated:!0}}})]}),Object(ee.jsx)(_.a.Column,{text:{label:s,labelProps:{textAlign:"right",color:l>0?"text-success":"text-critical"},description:o(i.timestamp,a.timestamp),descriptionProps:{isTruncated:!0,textAlign:"right"}}})]})}),[o,c]),l=Object(M.useCallback)((function(){return n?Object(ee.jsx)(le,{}):Object(ee.jsx)(j.a,{h:"24px"})}),[n]);return Object(ee.jsx)(j.a,{flex:1,children:Object(ee.jsx)(Q.a,ie(ie({renderItem:i,keyExtractor:function(e){return e.contractAddress+" "+e.tokenId},showsVerticalScrollIndicator:!1,ListFooterComponent:l},r),{},{p:4}))})},ue=n(393),be=n(277),de=n(756),je=n(4900),pe=n(23),me=n(422),Oe=n.n(me),fe=n(3774),xe=n.n(fe),he=n(3775),ge=n.n(he),ye=function(e){var t,n=e.onAddressSearch,r=Object(N.u)(),a=Object(z.f)(),c=a.network,o=a.account,i=Object(I.a)(),s=Object(de.a)().themeVariant,b=Object(V.a)({networkId:null!=(t=null==c?void 0:c.id)?t:""}).connectAndCreateExternalAccount,d=Object(M.useCallback)((function(){r.navigate(T.c.Modal,{screen:T.b.NFTMarket,params:{screen:X.a.CalculatorModal,params:void 0}})}),[r]);Object(M.useEffect)((function(){null!=o&&o.address&&n({address:null==o?void 0:o.address})}),[null==o?void 0:o.address,n]);var p=Object(M.useCallback)((function(){return Object(ee.jsx)(k.a,{children:Object(ee.jsx)(l.a,{mr:{base:2.5,md:8},type:"plain",size:"lg",name:"CalculatorOutline",circle:!0,onPress:d})})}),[d]);Object(M.useLayoutEffect)((function(){r.setOptions({title:"",headerRight:p})}),[p,r]);var f=Object(M.useState)(""),h=g()(f,2),y=h[0],v=h[1],w=J({keyword:y,onAddressSearch:n}).loading,P=Object(x.a)(),S=Object(N.t)();return Object(M.useEffect)((function(){return"ios"===pe.a.OS&&Oe.a.setEnable(!S),function(){"ios"===pe.a.OS&&Oe.a.setEnable(!0)}}),[S]),Object(ee.jsxs)(j.a,{flex:1,alignItems:"center",px:"16px",pt:{base:"48px",md:"96px"},children:[Object(ee.jsx)(je.a,{from:{opacity:0,scale:.5},animate:{opacity:1,scale:1},children:Object(ee.jsx)(be.a,{width:358,height:155,source:"light"===s?ge.a:xe.a})}),Object(ee.jsx)(C.a,{textAlign:"center",typography:{sm:"DisplayMedium",md:"DisplaySmall"},children:i.formatMessage({id:"empty__pnl"})}),Object(ee.jsx)(k.a,{mt:"24px",w:P?"full":"400px",justifyContent:"center",children:Object(ee.jsx)(ue.a,{flex:1,size:P?"xl":"default",value:y,onChangeText:v,leftIconName:"SearchOutline",numberOfLines:1,placeholder:i.formatMessage({id:"form__enter_address_ens_name"}),rightCustomElement:!0===w?Object(ee.jsx)(m.a,{p:{base:2,md:1},maxW:"32px",maxH:"32px",children:Object(ee.jsx)(O.b,{size:"sm"})}):null})}),Object(ee.jsxs)(k.a,{w:P?"full":"400px",mt:"24px",space:"12px",alignItems:"center",justifyContent:"center",children:[Object(ee.jsx)(j.a,{height:"1px",bgColor:"divider",flex:1}),Object(ee.jsx)(C.a,{typography:"Body2",color:"text-subdued",children:"OR"}),Object(ee.jsx)(j.a,{height:"1px",bgColor:"divider",flex:1})]}),Object(ee.jsx)(u.a,{onPress:b,type:"primary",size:P?"lg":"base",mt:"24px",children:i.formatMessage({id:"action__connect_wallet"})})]})},ve=["loading","network","accountAddress","onAddressSearch"];function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e){var t=new B.BigNumber(0),n=new B.BigNumber(0),r=new B.BigNumber(0),a=new B.BigNumber(0),c=0,o=0;return e.forEach((function(e){var i,l,s,u,b,d,j=e.entry,p=e.exit,m=new B.BigNumber(null!=(i=j.gasFee)?i:0),O=new B.BigNumber(null!=(l=j.tradePrice)?l:0),f=new B.BigNumber(null!=(s=p.gasFee)?s:0),x=new B.BigNumber(null!=(u=null!=(b=null!=(d=p.internalTxValue)?d:p.tokenTxValue)?b:p.tradePrice)?u:0),h=O.plus(m).plus(f),g=x.minus(h);g.toNumber()>0?(c+=1,n=n.plus(g)):g.toNumber()<0&&(o+=1,r=r.plus(g)),e.profit=g.toNumber(),e.spend=h.toNumber(),t=t.plus(g),a=a.plus(h)})),{totalProfit:t,totalWinProfit:n,totalLoseProfit:r,win:c,lose:o,spend:a,content:e}}var Se=function(){var e=Object(I.a)();return Object(ee.jsxs)(_.a,{mt:"48px",px:0,py:0,children:[Object(ee.jsx)(_.a.Column,{flex:1,text:{label:"NFT",labelProps:{typography:"Subheading",color:"text-subdued"}}}),Object(ee.jsx)(_.a.Column,{w:"200px",text:{label:e.formatMessage({id:"content__entry_price"}),labelProps:{typography:"Subheading",color:"text-subdued"}}}),Object(ee.jsx)(_.a.Column,{w:"160px",text:{label:Object(ee.jsx)(P.a,{label:e.formatMessage({id:"content__royalty_fees_are_excluded"}),placement:"top left",children:Object(ee.jsxs)(k.a,{alignItems:"center",space:1,alignSelf:"flex-start",children:[Object(ee.jsx)(C.a,{typography:"Subheading",color:"text-subdued",children:e.formatMessage({id:"content__exit_value"})}),Object(ee.jsx)(S.a,{name:"QuestionMarkCircleMini",size:16,color:"icon-subdued"})]})}),labelProps:{typography:"Subheading",color:"text-subdued"}}}),Object(ee.jsx)(_.a.Column,{w:"140px",text:{label:e.formatMessage({id:"content__profit"}),labelProps:{typography:"Subheading",color:"text-subdued",textAlign:"right"}}}),Object(ee.jsx)(w.a,{till:"lg",children:Object(ee.jsx)(_.a.Column,{w:"140px",text:{label:e.formatMessage({id:"content__hodl_duration"}),labelProps:{typography:"Subheading",color:"text-subdued",textAlign:"right"}}})})]})},Ce=function(e){var t=e.loading,n=e.network,r=e.accountAddress,a=e.onAddressSearch,c=v()(e,ve),o=c.totalProfit,i=c.win,l=c.lose,h=c.spend,y="0";o&&(y=new B.BigNumber(o).decimalPlaces(3).toString(),y=(o.toNumber()>=0?"+":"")+y),y=Object(q.a)({price:y,networkId:n.id});var P=Object(M.useState)(null!=r?r:""),k=g()(P,2),S=k[0],_=k[1],A=Object(I.a)(),L=Object(M.useRef)(),F=J({keyword:S,onAddressSearch:function(e){var t=e.ens,n=e.address;L.current=t,n&&(_(t||Object(D.b)(n)),a(n))}}).loading,H=Object(x.a)(),V=Object(N.u)(),W=Object(M.useCallback)((function(){if(R.a.isNative){var e,t="";t=L.current&&(null==(e=L.current)?void 0:e.length)>0?L.current:Object(D.b)(S),V.navigate(T.c.Modal,{screen:T.b.NFTMarket,params:{screen:X.a.ShareNFTPNLModal,params:{network:n,nameOrAddress:t,data:c}}})}else Object(E.a)("https://app.onekey.so/pnl"),f.a.show({title:A.formatMessage({id:"msg__link_copied"})})}),[A,S,V,n,c]),G=Object(z.f)().account;Object(M.useEffect)((function(){null!=G&&G.address&&_(null==G?void 0:G.address)}),[null==G?void 0:G.address]),Object(M.useEffect)((function(){0===S.length&&null!=G&&G.address&&a(null==G?void 0:G.address)}),[null==G?void 0:G.address,S,a]);var Q=Object(M.useMemo)((function(){return 0!==S.length&&!0!==F}),[S,F]);return Object(ee.jsxs)(j.a,{width:"full",p:2,pb:{base:3,md:0},children:[Object(ee.jsx)(j.a,{width:"full",flexDirection:"row",children:Object(ee.jsx)(p.a,{w:"full",maxW:"400px",value:S,onChangeText:_,rightIconName:Q?"XCircleMini":void 0,rightElement:Object(ee.jsx)(m.a,{height:"full",right:"8px",children:!0===F?Object(ee.jsx)(O.b,{size:"sm"}):null}),onClear:function(){_("")},placeholder:A.formatMessage({id:"form__enter_address_ens_name"})})}),Object(ee.jsxs)(j.a,{flexDirection:{sm:"row"},alignItems:{sm:"center"},justifyContent:"space-between",mt:"24px",children:[Object(ee.jsxs)(j.a,{children:[Object(ee.jsx)(C.a,{typography:"Body1",color:"text-subdued",children:A.formatMessage({id:"content__total_profits"})}),o?Object(ee.jsx)(C.a,{typography:"Display2XLarge",color:o.toNumber()>0?"text-success":"text-critical",children:y}):Object(ee.jsx)(d.a,{shape:"Display2XLarge"}),Object(ee.jsxs)(j.a,{flexDirection:"row",mt:"8px",children:[Object(ee.jsxs)(j.a,{flexDirection:"row",mr:"24px",alignItems:"center",children:[void 0!==i?Object(ee.jsx)(C.a,{mr:"6px",typography:"Body1Strong",color:"text-success",children:i}):Object(ee.jsx)(d.a,{shape:"Body1"}),Object(ee.jsx)(C.a,{typography:"Body1",color:"text-subdued",children:A.formatMessage({id:"content__winning_flips"})})]}),Object(ee.jsxs)(j.a,{flexDirection:"row",alignItems:"center",mr:"24px",children:[void 0!==l?Object(ee.jsx)(C.a,{mr:"6px",typography:"Body1Strong",color:"text-critical",children:l}):Object(ee.jsx)(d.a,{shape:"Body1"}),Object(ee.jsx)(C.a,{typography:"Body1",color:"text-subdued",children:A.formatMessage({id:"content__losing_flips"})})]}),Object(ee.jsx)(w.a,{from:"base",till:"md",children:Object(ee.jsxs)(j.a,{flexDirection:"row",alignItems:"center",children:[void 0!==h?Object(ee.jsx)(C.a,{mr:"6px",typography:"Body1Strong",children:Object(q.a)({price:new B.BigNumber(h).decimalPlaces(3).toString(),networkId:n.id})}):Object(ee.jsx)(b.a,{width:"24px",height:"12px",mr:"6px"}),Object(ee.jsx)(C.a,{typography:"Body1",color:"text-subdued",children:A.formatMessage({id:"content__spent"})})]})})]})]}),Object(ee.jsx)(u.a,{isDisabled:t,type:"primary",size:H?"lg":"base",leftIconName:"ArrowTopRightOnSquareSolid",onPress:W,mt:{base:6,sm:0},children:A.formatMessage({id:"action__share"})})]}),Object(ee.jsx)(w.a,{from:"base",till:"md",children:Object(ee.jsx)(Se,{})}),Object(ee.jsx)(s.a,{mt:{base:"24px",md:"8px"}})]})},_e={},Me=function(e){var t,n=e.accountAddress,a=Object(x.a)(),c=Object(I.a)(),o=Object(z.f)().account,s=Object(N.u)(),b=Object(W.b)(),d=F.a.serviceNFT,p=Object(V.a)({networkId:null!=(t=null==b?void 0:b.id)?t:""}).connectAndCreateExternalAccount,m=Object(M.useCallback)((function(){s.navigate(T.c.Modal,{screen:T.b.NFTMarket,params:{screen:X.a.CalculatorModal,params:void 0}})}),[s]),O=Object(M.useMemo)((function(){return void 0===(null==o?void 0:o.id)?Object(ee.jsx)(u.a,{onPress:p,children:c.formatMessage({id:"action__connect_wallet"})}):Object(ee.jsx)(H.a,{type:a?"basic":"plain",showAddress:!a})}),[null==o?void 0:o.id,p,c,a]),f=Object(M.useCallback)((function(){return Object(ee.jsxs)(A.a,{space:2,alignItems:"center",mr:{base:2.5,md:8},justifyContent:"flex-end",children:[O,Object(ee.jsx)(l.a,{type:"plain",size:"lg",name:"CalculatorOutline",circle:!0,onPress:m})]})}),[m,O]);Object(M.useLayoutEffect)((function(){s.setOptions({title:"",headerRight:f})}),[f,s]);var h=Object(M.useState)([]),y=g()(h,2),v=y[0],w=y[1],P=Object(M.useRef)({totalProfit:new B.BigNumber(0),totalWinProfit:new B.BigNumber(0),totalLoseProfit:new B.BigNumber(0),lose:0,win:0,spend:new B.BigNumber(0),content:[]}),k=Object(M.useRef)(0),S=Object(M.useState)({}),C=g()(S,2),_=C[0],D=C[1],E=Object(M.useState)(n),L=g()(E,2),R=L[0],q=L[1],G=Object(M.useState)(!0),J=g()(G,2),Q=J[0],U=J[1],K=Object(M.useCallback)(function(){var e=i()((function*(e){var t,n=50*k.current,r=null==(t=P.current)?void 0:t.content.slice(n,n+50),a=r.map((function(e){return{contract_address:e.contractAddress,token_id:e.tokenId}}));if(0!==r.length){var c=yield d.batchAsset({chain:null==b?void 0:b.id,items:a});if(c){var o={};c.forEach((function(e){var t=e.contractAddress+"-"+e.tokenId;o[t]=e})),r.forEach((function(e){var t=e.contractAddress+"-"+e.tokenId,n=o[t];n&&(e.asset=n)})),v.length+r.length>=P.current.content.length&&U(!1),w(0===e?r:function(e){return e.concat(r)})}}else U(!1)}));return function(t){return e.apply(this,arguments)}}(),[v.length,null==b?void 0:b.id,d]),Y=Object(M.useCallback)(function(){var e=i()((function*(e){var t=_e[e];if(t)P.current=t,D(t),K(0);else{var n=yield d.getPNLData({address:e}),r=ke(n);P.current=r,_e[e]=r,D(r),n&&K(0)}}));return function(t){return e.apply(this,arguments)}}(),[K,d]);Object(M.useEffect)((function(){U(!0),D({totalProfit:new B.BigNumber(0),spend:new B.BigNumber(0),win:0,lose:0}),k.current=0,w([]),Y(R)}),[R]);var Z=Object(M.useCallback)((function(){return Object(ee.jsx)(Ce,Pe({accountAddress:n,network:b,onAddressSearch:q,content:P.current.content,loading:0===v.length},_))}),[n,v.length,b,_]),$=Object(M.useCallback)((function(){return Q?null:Object(ee.jsx)(r.a,{emoji:"\ud83d\udcb0",title:c.formatMessage({id:"empty__no_sales_record"}),subTitle:c.formatMessage({id:"empty__no_sales_record_desc"})})}),[c,Q]),te=Object(M.useMemo)((function(){return{data:v,ListHeaderComponent:Z,ListEmptyComponent:$,onEndReached:function(){k.current+=1,K(k.current)}}}),[$,Z,K,v]);return Object(ee.jsx)(j.a,{flex:1,children:a?Object(ee.jsx)(se,Pe(Pe({},te),{},{loading:Q,network:b})):Object(ee.jsx)(ae,Pe(Pe({},te),{},{loading:Q,network:b}))})};t.default=function(){var e=Object(z.f)(),t=e.network,n=e.account,r=(null==t?void 0:t.impl)===L.I,a=Object(M.useState)((function(){return{address:r?null==n?void 0:n.address:void 0}})),c=g()(a,2),o=c[0],i=c[1];return null!=o&&o.address?Object(ee.jsx)(Me,{accountAddress:null==o?void 0:o.address,ens:o.ens}):Object(ee.jsx)(ye,{onAddressSearch:i})}}}]);